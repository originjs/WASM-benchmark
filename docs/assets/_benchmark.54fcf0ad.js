import{o as openBlock,c as createElementBlock,i as createBaseVNode,k as withDirectives,v as vModelText,t as toDisplayString,F as Fragment,l as renderList,j as createTextVNode,m as ref,S as Suspense,r as resolveComponent,n as vShow,p as createCommentVNode,q as createBlock,w as withCtx,a as createVNode}from"./vendor.36576d8b.js";import{_ as _export_sfc,a as __vitePreload}from"./index.db13baaf.js";async function loadEmccCompiledWasm(e,t){let r;typeof window=="undefined"&&typeof global=="object"?r=require("fs").readFileSync(e):r=await fetch("/WASM-benchmark/"+e).then(a=>a.arrayBuffer()).then(a=>new Uint8Array(a));let n={};return await new Promise(a=>{n=t({wasmBinary:r,onRuntimeInitialized:()=>{console.log(`${e} is loaded`),a(null)}})}),n}const _sfc_main$2={name:"benchmarkTest",props:{benchmarkDataset:Object},data(){return{message:"Ready",btnDisabled:!1,jsPerformance:"",wsPerformances:{"":""},comparisons:{"":""},benchmarkName:"JavaScript "}},async setup(e){const t=1,r=10,n=e.benchmarkDataset,{cGlueFunc:a,cWasmUrl:o,rustWasmLoad:u}=n,s={};!!a&&!!o&&(s.cModule=await loadEmccCompiledWasm(o,a)),u&&(s.rustModule=await u,console.log("rust module is loaded"));const{testbench:l,dataSize:f}=n;return{wasmTest:new l(f,t,r,s,e.benchmarkDataset.dom,e.benchmarkDataset.jsCanvas,e.benchmarkDataset.wsCanvas)}},methods:{start(){setTimeout(()=>{if(!this.wasmTest.checkFunctionality()){this.message="Two functions seem not equal",this.btnDisabled=!1;return}setTimeout(()=>{this.jsPerformance=this.wasmTest.runJavaScriptBenchmark(),setTimeout(()=>{this.wsPerformances=this.wasmTest.runWasmBenchmark();const e={};for(const t in this.wsPerformances)e[t]=(this.jsPerformance/this.wsPerformances[t]).toFixed(4);this.comparisons=e,this.message="Done"}),this.message="Running WebAssembly"}),this.message="Running JavaScript"}),this.message="Checking equality"}}},_hoisted_1$2={style:{width:"70%",border:"1px solid","border-radius":"15px"}},_hoisted_2$2={style:{"border-bottom":"1px solid"}},_hoisted_3$2=createBaseVNode("h3",null,"Configure:",-1),_hoisted_4$2=createTextVNode(" Warm-up run loops: "),_hoisted_5$2=createTextVNode(" Benchmark run loops: "),_hoisted_6$2=["disabled"],_hoisted_7$2=createBaseVNode("br",null,null,-1),_hoisted_8$2=createBaseVNode("h3",null,"Results:",-1),_hoisted_9$2=createTextVNode("Status : "),_hoisted_10$2=createTextVNode(" JavaScript(average [ms]): ");function _sfc_render$2(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[_hoisted_3$2,createBaseVNode("p",null,[_hoisted_4$2,withDirectives(createBaseVNode("input",{style:{width:"50px","text-align":"center"},"onUpdate:modelValue":t[0]||(t[0]=u=>n.wasmTest.warmUpRunLoops=u)},null,512),[[vModelText,n.wasmTest.warmUpRunLoops]])]),createBaseVNode("p",null,[_hoisted_5$2,withDirectives(createBaseVNode("input",{style:{width:"50px","text-align":"center"},"onUpdate:modelValue":t[1]||(t[1]=u=>n.wasmTest.benchmarkRunLoops=u)},null,512),[[vModelText,n.wasmTest.benchmarkRunLoops]])]),createBaseVNode("p",null,[createBaseVNode("button",{disabled:a.btnDisabled,onClick:t[2]||(t[2]=u=>o.start()),style:{"font-size":"15px"}}," Run Benchmark ",8,_hoisted_6$2)])]),_hoisted_7$2,createBaseVNode("div",null,[_hoisted_8$2,createBaseVNode("p",null,[createBaseVNode("span",null,[_hoisted_9$2,createBaseVNode("code",null,toDisplayString(a.message),1)])]),createBaseVNode("p",null,[_hoisted_10$2,createBaseVNode("span",null,toDisplayString(a.jsPerformance),1)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.wsPerformances,(u,s)=>(openBlock(),createElementBlock("p",null,[createTextVNode(toDisplayString(s)+" WebAssembly(average [ms]): ",1),createBaseVNode("span",null,toDisplayString(u),1)]))),256)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.comparisons,(u,s)=>(openBlock(),createElementBlock("p",null,[createTextVNode(toDisplayString(s)+" JavaScript/WebAssembly: ",1),createBaseVNode("span",null,toDisplayString(u),1)]))),256))])])}var __unplugin_components_1=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]);const _sfc_main$1={name:"benchmarkTest",props:{benchmarkDataset:Object},data(){return{message:"Ready",btnMessage:"Run Benchmark",btnDisabled:!1,comparison:"",benchmarkName:"JavaScript ",jsPerformance:"",wsPerformance:"",benchmarkRunning:!1}},async setup(e){const t=1,r=10;let n=ref({}),a={};return n=await loadEmccCompiledWasm(e.benchmarkDataset.url,e.benchmarkDataset.Module),a=new e.benchmarkDataset.testbench(e.benchmarkDataset.dataSize,t,r,n,e.benchmarkDataset.dom,e.benchmarkDataset.jsCanvas,e.benchmarkDataset.wsCanvas),{module:n,wasmTest:a}},methods:{startRendering(){this.wasmTest.render(this),this.benchmarkRunning&&requestAnimationFrame(this.startRendering)},btnClicked(){if(this.benchmarkRunning=!this.benchmarkRunning,!this.benchmarkRunning){this.message="Stopped",this.btnMessage="Run Benchmark";return}this.btnMessage="Stop Benchmark";const e=this;setTimeout(function(){if(!e.wasmTest.checkFunctionality()){e.message="Two functions seem not equal",e.btnDisabled=!1;return}e.startRendering(),e.message="Running"}),e.message="Checking equality"}}},_hoisted_1$1={style:{width:"70%",border:"1px solid","border-radius":"15px"}},_hoisted_2$1={style:{"border-bottom":"1px solid"}},_hoisted_3$1=createBaseVNode("h3",null,"Configure:",-1),_hoisted_4$1=["disabled"],_hoisted_5$1=createBaseVNode("br",null,null,-1),_hoisted_6$1=createBaseVNode("h3",null,"Results:",-1),_hoisted_7$1=createTextVNode("Status : "),_hoisted_8$1=createTextVNode(" JavaScript(average [ms]): "),_hoisted_9$1=createTextVNode(" WebAssembly(average [ms]): "),_hoisted_10$1=createTextVNode(" JavaScript/WebAssembly: ");function _sfc_render$1(e,t,r,n,a,o){return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[_hoisted_3$1,createBaseVNode("p",null,[createBaseVNode("button",{disabled:a.btnDisabled,onClick:t[0]||(t[0]=u=>o.btnClicked()),style:{"font-size":"15px"}},toDisplayString(a.btnMessage),9,_hoisted_4$1)])]),_hoisted_5$1,createBaseVNode("div",null,[_hoisted_6$1,createBaseVNode("p",null,[createBaseVNode("span",null,[_hoisted_7$1,createBaseVNode("code",null,toDisplayString(a.message),1)])]),createBaseVNode("p",null,[_hoisted_8$1,createBaseVNode("span",null,toDisplayString(a.jsPerformance),1)]),createBaseVNode("p",null,[_hoisted_9$1,createBaseVNode("span",null,toDisplayString(a.wsPerformance),1)]),createBaseVNode("p",null,[_hoisted_10$1,createBaseVNode("span",null,toDisplayString(a.comparison),1)])])])}var __unplugin_components_0=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),Module$c=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"collisionDetection.wast",wasmBinaryFile=Module.wasmBinaryFile||"collisionDetection.wasm",asmjsCodeFile=Module.asmjsCodeFile||"collisionDetection.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"collisionDetection.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm,Module._collisionDetection=function(){return Module.asm._collisionDetection.apply(null,arguments)},Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!=null)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}}();function EventDispatcher(){}Object.assign(EventDispatcher.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners!==void 0){var r=this._listeners,n=r[e];if(n!==void 0){var a=n.indexOf(t);a!==-1&&n.splice(a,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners,r=t[e.type];if(r!==void 0){e.target=this;var n=[],a=0,o=r.length;for(a=0;a<o;a++)n[a]=r[a];for(a=0;a<o;a++)n[a].call(this,e)}}}});var REVISION="85",CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,FrontFaceDirectionCW=0,PCFShadowMap=1,PCFSoftShadowMap=2,FrontSide=0,BackSide=1,DoubleSide=2,FlatShading=1,SmoothShading=2,NoColors=0,FaceColors=1,VertexColors=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,Uncharted2ToneMapping=3,CineonToneMapping=4,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,SphericalReflectionMapping=305,CubeUVReflectionMapping=306,CubeUVRefractionMapping=307,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipMapNearestFilter=1004,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipMapNearestFilter=1007,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedShort565Type=1019,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RGB_S3TC_DXT1_Format=2001,RGBA_S3TC_DXT1_Format=2002,RGBA_S3TC_DXT3_Format=2003,RGBA_S3TC_DXT5_Format=2004,RGB_PVRTC_4BPPV1_Format=2100,RGB_PVRTC_2BPPV1_Format=2101,RGBA_PVRTC_4BPPV1_Format=2102,RGBA_PVRTC_2BPPV1_Format=2103,RGB_ETC1_Format=2151,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,GammaEncoding=3007,RGBEEncoding=3002,RGBM7Encoding=3004,RGBM16Encoding=3005,RGBDEncoding=3006,BasicDepthPacking=3200,RGBADepthPacking=3201,_Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=new Array(36),r=0,n;return function(){for(var o=0;o<36;o++)o===8||o===13||o===18||o===23?t[o]="-":o===14?t[o]="4":(r<=2&&(r=33554432+Math.random()*16777216|0),n=r&15,r=r>>4,t[o]=e[o===19?n&3|8:n]);return t.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,a){return n+(e-t)*(a-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*_Math.DEG2RAD},radToDeg:function(e){return e*_Math.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)==0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};function Vector2(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(Vector2.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new Vector2,t=new Vector2;return function(n,a){return e.set(n,n),t.set(a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*r-o*n+e.x,this.y=a*n+o*r+e.y,this}});var textureId=0;function Texture(e,t,r,n,a,o,u,s,l,f){Object.defineProperty(this,"id",{value:textureId++}),this.uuid=_Math.generateUUID(),this.name="",this.image=e!==void 0?e:Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:Texture.DEFAULT_MAPPING,this.wrapS=r!==void 0?r:ClampToEdgeWrapping,this.wrapT=n!==void 0?n:ClampToEdgeWrapping,this.magFilter=a!==void 0?a:LinearFilter,this.minFilter=o!==void 0?o:LinearMipMapLinearFilter,this.anisotropy=l!==void 0?l:1,this.format=u!==void 0?u:RGBAFormat,this.type=s!==void 0?s:UnsignedByteType,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f!==void 0?f:LinearEncoding,this.version=0,this.onUpdate=null}Texture.DEFAULT_IMAGE=void 0;Texture.DEFAULT_MAPPING=UVMapping;Object.defineProperty(Texture.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Texture.prototype,EventDispatcher.prototype,{constructor:Texture,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(e.textures[this.uuid]!==void 0)return e.textures[this.uuid];function t(a){var o;return a.toDataURL!==void 0?o=a:(o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),o.width=a.width,o.height=a.height,o.getContext("2d").drawImage(a,0,0,a.width,a.height)),o.width>2048||o.height>2048?o.toDataURL("image/jpeg",.6):o.toDataURL("image/png")}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==void 0){var n=this.image;n.uuid===void 0&&(n.uuid=_Math.generateUUID()),e.images[n.uuid]===void 0&&(e.images[n.uuid]={uuid:n.uuid,url:t(n)}),r.image=n.uuid}return e.textures[this.uuid]=r,r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===UVMapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}this.flipY&&(e.y=1-e.y)}}});function Vector4(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=n!==void 0?n:1}Object.assign(Vector4.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,a=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*a,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*a,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*a,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*a,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,a,o=.01,u=.1,s=e.elements,l=s[0],f=s[4],c=s[8],d=s[1],h=s[5],m=s[9],p=s[2],_=s[6],M=s[10];if(Math.abs(f-d)<o&&Math.abs(c-p)<o&&Math.abs(m-_)<o){if(Math.abs(f+d)<u&&Math.abs(c+p)<u&&Math.abs(m+_)<u&&Math.abs(l+h+M-3)<u)return this.set(1,0,0,0),this;t=Math.PI;var y=(l+1)/2,v=(h+1)/2,g=(M+1)/2,E=(f+d)/4,T=(c+p)/4,S=(m+_)/4;return y>v&&y>g?y<o?(r=0,n=.707106781,a=.707106781):(r=Math.sqrt(y),n=E/r,a=T/r):v>g?v<o?(r=.707106781,n=0,a=.707106781):(n=Math.sqrt(v),r=E/n,a=S/n):g<o?(r=.707106781,n=.707106781,a=0):(a=Math.sqrt(g),r=T/a,n=S/a),this.set(r,n,a,t),this}var b=Math.sqrt((_-m)*(_-m)+(c-p)*(c-p)+(d-f)*(d-f));return Math.abs(b)<.001&&(b=1),this.x=(_-m)/b,this.y=(c-p)/b,this.z=(d-f)/b,this.w=Math.acos((l+h+M-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e=new Vector4,t=new Vector4;return function(n,a){return e.set(n,n,n,n),t.set(a,a,a,a),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}});function WebGLRenderTarget(e,t,r){this.uuid=_Math.generateUUID(),this.width=e,this.height=t,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),r=r||{},r.minFilter===void 0&&(r.minFilter=LinearFilter),this.texture=new Texture(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!0,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}Object.assign(WebGLRenderTarget.prototype,EventDispatcher.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function WebGLRenderTargetCube(e,t,r){WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}WebGLRenderTargetCube.prototype=Object.create(WebGLRenderTarget.prototype);WebGLRenderTargetCube.prototype.constructor=WebGLRenderTargetCube;WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube=!0;function Quaternion(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=n!==void 0?n:1}Object.assign(Quaternion,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,a,o,u){var s=r[n+0],l=r[n+1],f=r[n+2],c=r[n+3],d=a[o+0],h=a[o+1],m=a[o+2],p=a[o+3];if(c!==p||s!==d||l!==h||f!==m){var _=1-u,M=s*d+l*h+f*m+c*p,y=M>=0?1:-1,v=1-M*M;if(v>Number.EPSILON){var g=Math.sqrt(v),E=Math.atan2(g,M*y);_=Math.sin(_*E)/g,u=Math.sin(u*E)/g}var T=u*y;if(s=s*_+d*T,l=l*_+h*T,f=f*_+m*T,c=c*_+p*T,_===1-u){var S=1/Math.sqrt(s*s+l*l+f*f+c*c);s*=S,l*=S,f*=S,c*=S}}e[t]=s,e[t+1]=l,e[t+2]=f,e[t+3]=c}});Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}});Object.assign(Quaternion.prototype,{set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if((e&&e.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,a=e._z,o=e.order,u=Math.cos,s=Math.sin,l=u(r/2),f=u(n/2),c=u(a/2),d=s(r/2),h=s(n/2),m=s(a/2);return o==="XYZ"?(this._x=d*f*c+l*h*m,this._y=l*h*c-d*f*m,this._z=l*f*m+d*h*c,this._w=l*f*c-d*h*m):o==="YXZ"?(this._x=d*f*c+l*h*m,this._y=l*h*c-d*f*m,this._z=l*f*m-d*h*c,this._w=l*f*c+d*h*m):o==="ZXY"?(this._x=d*f*c-l*h*m,this._y=l*h*c+d*f*m,this._z=l*f*m+d*h*c,this._w=l*f*c-d*h*m):o==="ZYX"?(this._x=d*f*c-l*h*m,this._y=l*h*c+d*f*m,this._z=l*f*m-d*h*c,this._w=l*f*c+d*h*m):o==="YZX"?(this._x=d*f*c+l*h*m,this._y=l*h*c+d*f*m,this._z=l*f*m-d*h*c,this._w=l*f*c-d*h*m):o==="XZY"&&(this._x=d*f*c-l*h*m,this._y=l*h*c-d*f*m,this._z=l*f*m+d*h*c,this._w=l*f*c+d*h*m),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,r=t[0],n=t[4],a=t[8],o=t[1],u=t[5],s=t[9],l=t[2],f=t[6],c=t[10],d=r+u+c,h;return d>0?(h=.5/Math.sqrt(d+1),this._w=.25/h,this._x=(f-s)*h,this._y=(a-l)*h,this._z=(o-n)*h):r>u&&r>c?(h=2*Math.sqrt(1+r-u-c),this._w=(f-s)/h,this._x=.25*h,this._y=(n+o)/h,this._z=(a+l)/h):u>c?(h=2*Math.sqrt(1+u-r-c),this._w=(a-l)/h,this._x=(n+o)/h,this._y=.25*h,this._z=(s+f)/h):(h=2*Math.sqrt(1+c-r-u),this._w=(o-n)/h,this._x=(a+l)/h,this._y=(s+f)/h,this._z=.25*h),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new Vector3,t,r=1e-6;return function(a,o){return e===void 0&&(e=new Vector3),t=a.dot(o)+1,t<r?(t=0,Math.abs(a.x)>Math.abs(a.z)?e.set(-a.y,a.x,0):e.set(0,-a.z,a.y)):e.crossVectors(a,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,a=e._z,o=e._w,u=t._x,s=t._y,l=t._z,f=t._w;return this._x=r*f+o*u+n*l-a*s,this._y=n*f+o*s+a*u-r*l,this._z=a*f+o*l+r*s-n*u,this._w=o*f-r*u-n*s-a*l,this.onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var r=this._x,n=this._y,a=this._z,o=this._w,u=o*e._w+r*e._x+n*e._y+a*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=o,this._x=r,this._y=n,this._z=a,this;var s=Math.sqrt(1-u*u);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(a+this._z),this;var l=Math.atan2(s,u),f=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=o*f+this._w*c,this._x=r*f+this._x*c,this._y=n*f+this._y*c,this._z=a*f+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function Vector3(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}Object.assign(Vector3.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Quaternion;return function(r){return(r&&r.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(r))}}(),applyAxisAngle:function(){var e=new Quaternion;return function(r,n){return this.applyQuaternion(e.setFromAxisAngle(r,n))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*n,this.y=a[1]*t+a[4]*r+a[7]*n,this.z=a[2]*t+a[5]*r+a[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,a=e.elements;this.x=a[0]*t+a[4]*r+a[8]*n+a[12],this.y=a[1]*t+a[5]*r+a[9]*n+a[13],this.z=a[2]*t+a[6]*r+a[10]*n+a[14];var o=a[3]*t+a[7]*r+a[11]*n+a[15];return this.divideScalar(o)},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,a=e.x,o=e.y,u=e.z,s=e.w,l=s*t+o*n-u*r,f=s*r+u*t-a*n,c=s*n+a*r-o*t,d=-a*t-o*r-u*n;return this.x=l*s+d*-a+f*-u-c*-o,this.y=f*s+d*-o+c*-a-l*-u,this.z=c*s+d*-u+l*-o-f*-a,this},project:function(){var e=new Matrix4;return function(r){return e.multiplyMatrices(r.projectionMatrix,e.getInverse(r.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Matrix4;return function(r){return e.multiplyMatrices(r.matrixWorld,e.getInverse(r.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n,this.y=a[1]*t+a[5]*r+a[9]*n,this.z=a[2]*t+a[6]*r+a[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Vector3,t=new Vector3;return function(n,a){return e.set(n,n,n),t.set(a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(t!==void 0)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,a=this.z;return this.x=n*e.z-a*e.y,this.y=a*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,a=e.z,o=t.x,u=t.y,s=t.z;return this.x=n*s-a*u,this.y=a*o-r*s,this.z=r*u-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Vector3;return function(r){return e.copy(this).projectOnVector(r),this.sub(e)}}(),reflect:function(){var e=new Vector3;return function(r){return this.sub(e.copy(r).multiplyScalar(2*this.dot(r)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(_Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(e,t,r,n,a,o,u,s,l,f,c,d,h,m,p,_){var M=this.elements;return M[0]=e,M[4]=t,M[8]=r,M[12]=n,M[1]=a,M[5]=o,M[9]=u,M[13]=s,M[2]=l,M[6]=f,M[10]=c,M[14]=d,M[3]=h,M[7]=m,M[11]=p,M[15]=_,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new Vector3;return function(r){var n=this.elements,a=r.elements,o=1/e.setFromMatrixColumn(r,0).length(),u=1/e.setFromMatrixColumn(r,1).length(),s=1/e.setFromMatrixColumn(r,2).length();return n[0]=a[0]*o,n[1]=a[1]*o,n[2]=a[2]*o,n[4]=a[4]*u,n[5]=a[5]*u,n[6]=a[6]*u,n[8]=a[8]*s,n[9]=a[9]*s,n[10]=a[10]*s,this}}(),makeRotationFromEuler:function(e){(e&&e.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,a=e.z,o=Math.cos(r),u=Math.sin(r),s=Math.cos(n),l=Math.sin(n),f=Math.cos(a),c=Math.sin(a);if(e.order==="XYZ"){var d=o*f,h=o*c,m=u*f,p=u*c;t[0]=s*f,t[4]=-s*c,t[8]=l,t[1]=h+m*l,t[5]=d-p*l,t[9]=-u*s,t[2]=p-d*l,t[6]=m+h*l,t[10]=o*s}else if(e.order==="YXZ"){var _=s*f,M=s*c,y=l*f,v=l*c;t[0]=_+v*u,t[4]=y*u-M,t[8]=o*l,t[1]=o*c,t[5]=o*f,t[9]=-u,t[2]=M*u-y,t[6]=v+_*u,t[10]=o*s}else if(e.order==="ZXY"){var _=s*f,M=s*c,y=l*f,v=l*c;t[0]=_-v*u,t[4]=-o*c,t[8]=y+M*u,t[1]=M+y*u,t[5]=o*f,t[9]=v-_*u,t[2]=-o*l,t[6]=u,t[10]=o*s}else if(e.order==="ZYX"){var d=o*f,h=o*c,m=u*f,p=u*c;t[0]=s*f,t[4]=m*l-h,t[8]=d*l+p,t[1]=s*c,t[5]=p*l+d,t[9]=h*l-m,t[2]=-l,t[6]=u*s,t[10]=o*s}else if(e.order==="YZX"){var g=o*s,E=o*l,T=u*s,S=u*l;t[0]=s*f,t[4]=S-g*c,t[8]=T*c+E,t[1]=c,t[5]=o*f,t[9]=-u*f,t[2]=-l*f,t[6]=E*c+T,t[10]=g-S*c}else if(e.order==="XZY"){var g=o*s,E=o*l,T=u*s,S=u*l;t[0]=s*f,t[4]=-c,t[8]=l*f,t[1]=g*c+S,t[5]=o*f,t[9]=E*c-T,t[2]=T*c-E,t[6]=u*f,t[10]=S*c+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e._x,n=e._y,a=e._z,o=e._w,u=r+r,s=n+n,l=a+a,f=r*u,c=r*s,d=r*l,h=n*s,m=n*l,p=a*l,_=o*u,M=o*s,y=o*l;return t[0]=1-(h+p),t[4]=c-y,t[8]=d+M,t[1]=c+y,t[5]=1-(f+p),t[9]=m-_,t[2]=d-M,t[6]=m+_,t[10]=1-(f+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(a,o,u){var s=this.elements;return r.subVectors(a,o),r.lengthSq()===0&&(r.z=1),r.normalize(),e.crossVectors(u,r),e.lengthSq()===0&&(r.z+=1e-4,e.crossVectors(u,r)),e.normalize(),t.crossVectors(r,e),s[0]=e.x,s[4]=t.x,s[8]=r.x,s[1]=e.y,s[5]=t.y,s[9]=r.y,s[2]=e.z,s[6]=t.z,s[10]=r.z,this}}(),multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,a=this.elements,o=r[0],u=r[4],s=r[8],l=r[12],f=r[1],c=r[5],d=r[9],h=r[13],m=r[2],p=r[6],_=r[10],M=r[14],y=r[3],v=r[7],g=r[11],E=r[15],T=n[0],S=n[4],b=n[8],O=n[12],P=n[1],B=n[5],V=n[9],R=n[13],w=n[2],H=n[6],D=n[10],K=n[14],W=n[3],k=n[7],J=n[11],X=n[15];return a[0]=o*T+u*P+s*w+l*W,a[4]=o*S+u*B+s*H+l*k,a[8]=o*b+u*V+s*D+l*J,a[12]=o*O+u*R+s*K+l*X,a[1]=f*T+c*P+d*w+h*W,a[5]=f*S+c*B+d*H+h*k,a[9]=f*b+c*V+d*D+h*J,a[13]=f*O+c*R+d*K+h*X,a[2]=m*T+p*P+_*w+M*W,a[6]=m*S+p*B+_*H+M*k,a[10]=m*b+p*V+_*D+M*J,a[14]=m*O+p*R+_*K+M*X,a[3]=y*T+v*P+g*w+E*W,a[7]=y*S+v*B+g*H+E*k,a[11]=y*b+v*V+g*D+E*J,a[15]=y*O+v*R+g*K+E*X,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Vector3;return function(r){for(var n=0,a=r.count;n<a;n++)e.x=r.getX(n),e.y=r.getY(n),e.z=r.getZ(n),e.applyMatrix4(this),r.setXYZ(n,e.x,e.y,e.z);return r}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],a=e[12],o=e[1],u=e[5],s=e[9],l=e[13],f=e[2],c=e[6],d=e[10],h=e[14],m=e[3],p=e[7],_=e[11],M=e[15];return m*(+a*s*c-n*l*c-a*u*d+r*l*d+n*u*h-r*s*h)+p*(+t*s*h-t*l*d+a*o*d-n*o*h+n*l*f-a*s*f)+_*(+t*l*c-t*u*h-a*o*c+r*o*h+a*u*f-r*l*f)+M*(-n*u*f-t*s*c+t*u*d+n*o*c-r*o*d+r*s*f)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,a=n[0],o=n[1],u=n[2],s=n[3],l=n[4],f=n[5],c=n[6],d=n[7],h=n[8],m=n[9],p=n[10],_=n[11],M=n[12],y=n[13],v=n[14],g=n[15],E=m*v*d-y*p*d+y*c*_-f*v*_-m*c*g+f*p*g,T=M*p*d-h*v*d-M*c*_+l*v*_+h*c*g-l*p*g,S=h*y*d-M*m*d+M*f*_-l*y*_-h*f*g+l*m*g,b=M*m*c-h*y*c-M*f*p+l*y*p+h*f*v-l*m*v,O=a*E+o*T+u*S+s*b;if(O===0){var P="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(P);return console.warn(P),this.identity()}var B=1/O;return r[0]=E*B,r[1]=(y*p*s-m*v*s-y*u*_+o*v*_+m*u*g-o*p*g)*B,r[2]=(f*v*s-y*c*s+y*u*d-o*v*d-f*u*g+o*c*g)*B,r[3]=(m*c*s-f*p*s-m*u*d+o*p*d+f*u*_-o*c*_)*B,r[4]=T*B,r[5]=(h*v*s-M*p*s+M*u*_-a*v*_-h*u*g+a*p*g)*B,r[6]=(M*c*s-l*v*s-M*u*d+a*v*d+l*u*g-a*c*g)*B,r[7]=(l*p*s-h*c*s+h*u*d-a*p*d-l*u*_+a*c*_)*B,r[8]=S*B,r[9]=(M*m*s-h*y*s-M*o*_+a*y*_+h*o*g-a*m*g)*B,r[10]=(l*y*s-M*f*s+M*o*d-a*y*d-l*o*g+a*f*g)*B,r[11]=(h*f*s-l*m*s-h*o*d+a*m*d+l*o*_-a*f*_)*B,r[12]=b*B,r[13]=(h*y*u-M*m*u+M*o*p-a*y*p-h*o*v+a*m*v)*B,r[14]=(M*f*u-l*y*u-M*o*c+a*y*c+l*o*v-a*f*v)*B,r[15]=(l*m*u-h*f*u+h*o*c-a*m*c-l*o*p+a*f*p)*B,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,a=e.z;return t[0]*=r,t[4]*=n,t[8]*=a,t[1]*=r,t[5]*=n,t[9]*=a,t[2]*=r,t[6]*=n,t[10]*=a,t[3]*=r,t[7]*=n,t[11]*=a,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),a=1-r,o=e.x,u=e.y,s=e.z,l=a*o,f=a*u;return this.set(l*o+r,l*u-n*s,l*s+n*u,0,l*u+n*s,f*u+r,f*s-n*o,0,l*s-n*u,f*s+n*o,a*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new Vector3,t=new Matrix4;return function(n,a,o){var u=this.elements,s=e.set(u[0],u[1],u[2]).length(),l=e.set(u[4],u[5],u[6]).length(),f=e.set(u[8],u[9],u[10]).length(),c=this.determinant();c<0&&(s=-s),n.x=u[12],n.y=u[13],n.z=u[14],t.copy(this);var d=1/s,h=1/l,m=1/f;return t.elements[0]*=d,t.elements[1]*=d,t.elements[2]*=d,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=m,t.elements[9]*=m,t.elements[10]*=m,a.setFromRotationMatrix(t),o.x=s,o.y=l,o.z=f,this}}(),makePerspective:function(e,t,r,n,a,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var u=this.elements,s=2*a/(t-e),l=2*a/(r-n),f=(t+e)/(t-e),c=(r+n)/(r-n),d=-(o+a)/(o-a),h=-2*o*a/(o-a);return u[0]=s,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=l,u[9]=c,u[13]=0,u[2]=0,u[6]=0,u[10]=d,u[14]=h,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this},makeOrthographic:function(e,t,r,n,a,o){var u=this.elements,s=1/(t-e),l=1/(r-n),f=1/(o-a),c=(t+e)*s,d=(r+n)*l,h=(o+a)*f;return u[0]=2*s,u[4]=0,u[8]=0,u[12]=-c,u[1]=0,u[5]=2*l,u[9]=0,u[13]=-d,u[2]=0,u[6]=0,u[10]=-2*f,u[14]=-h,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}});function DataTexture(e,t,r,n,a,o,u,s,l,f,c,d){Texture.call(this,null,o,u,s,l,f,n,a,c,d),this.image={data:e,width:t,height:r},this.magFilter=l!==void 0?l:NearestFilter,this.minFilter=f!==void 0?f:NearestFilter,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}DataTexture.prototype=Object.create(Texture.prototype);DataTexture.prototype.constructor=DataTexture;DataTexture.prototype.isDataTexture=!0;function CubeTexture(e,t,r,n,a,o,u,s,l,f){e=e!==void 0?e:[],t=t!==void 0?t:CubeReflectionMapping,Texture.call(this,e,t,r,n,a,o,u,s,l,f),this.flipY=!1}CubeTexture.prototype=Object.create(Texture.prototype);CubeTexture.prototype.constructor=CubeTexture;CubeTexture.prototype.isCubeTexture=!0;Object.defineProperty(CubeTexture.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var emptyTexture=new Texture,emptyCubeTexture=new CubeTexture;function UniformContainer(){this.seq=[],this.map={}}var arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9);function flatten(e,t,r){var n=e[0];if(n<=0||n>0)return e;var a=t*r,o=arrayCacheF32[a];if(o===void 0&&(o=new Float32Array(a),arrayCacheF32[a]=o),t!==0){n.toArray(o,0);for(var u=1,s=0;u!==t;++u)s+=r,e[u].toArray(o,s)}return o}function allocTexUnits(e,t){var r=arrayCacheI32[t];r===void 0&&(r=new Int32Array(t),arrayCacheI32[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function setValue1f(e,t){e.uniform1f(this.addr,t)}function setValue1i(e,t){e.uniform1i(this.addr,t)}function setValue2fv(e,t){t.x===void 0?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function setValue3fv(e,t){t.x!==void 0?e.uniform3f(this.addr,t.x,t.y,t.z):t.r!==void 0?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function setValue4fv(e,t){t.x===void 0?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function setValue2fm(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function setValue3fm(e,t){t.elements===void 0?e.uniformMatrix3fv(this.addr,!1,t):(mat3array.set(t.elements),e.uniformMatrix3fv(this.addr,!1,mat3array))}function setValue4fm(e,t){t.elements===void 0?e.uniformMatrix4fv(this.addr,!1,t):(mat4array.set(t.elements),e.uniformMatrix4fv(this.addr,!1,mat4array))}function setValueT1(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTexture2D(t||emptyTexture,n)}function setValueT6(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTextureCube(t||emptyCubeTexture,n)}function setValue2iv(e,t){e.uniform2iv(this.addr,t)}function setValue3iv(e,t){e.uniform3iv(this.addr,t)}function setValue4iv(e,t){e.uniform4iv(this.addr,t)}function getSingularSetter(e){switch(e){case 5126:return setValue1f;case 35664:return setValue2fv;case 35665:return setValue3fv;case 35666:return setValue4fv;case 35674:return setValue2fm;case 35675:return setValue3fm;case 35676:return setValue4fm;case 35678:return setValueT1;case 35680:return setValueT6;case 5124:case 35670:return setValue1i;case 35667:case 35671:return setValue2iv;case 35668:case 35672:return setValue3iv;case 35669:case 35673:return setValue4iv}}function setValue1fv(e,t){e.uniform1fv(this.addr,t)}function setValue1iv(e,t){e.uniform1iv(this.addr,t)}function setValueV2a(e,t){e.uniform2fv(this.addr,flatten(t,this.size,2))}function setValueV3a(e,t){e.uniform3fv(this.addr,flatten(t,this.size,3))}function setValueV4a(e,t){e.uniform4fv(this.addr,flatten(t,this.size,4))}function setValueM2a(e,t){e.uniformMatrix2fv(this.addr,!1,flatten(t,this.size,4))}function setValueM3a(e,t){e.uniformMatrix3fv(this.addr,!1,flatten(t,this.size,9))}function setValueM4a(e,t){e.uniformMatrix4fv(this.addr,!1,flatten(t,this.size,16))}function setValueT1a(e,t,r){var n=t.length,a=allocTexUnits(r,n);e.uniform1iv(this.addr,a);for(var o=0;o!==n;++o)r.setTexture2D(t[o]||emptyTexture,a[o])}function setValueT6a(e,t,r){var n=t.length,a=allocTexUnits(r,n);e.uniform1iv(this.addr,a);for(var o=0;o!==n;++o)r.setTextureCube(t[o]||emptyCubeTexture,a[o])}function getPureArraySetter(e){switch(e){case 5126:return setValue1fv;case 35664:return setValueV2a;case 35665:return setValueV3a;case 35666:return setValueV4a;case 35674:return setValueM2a;case 35675:return setValueM3a;case 35676:return setValueM4a;case 35678:return setValueT1a;case 35680:return setValueT6a;case 5124:case 35670:return setValue1iv;case 35667:case 35671:return setValue2iv;case 35668:case 35672:return setValue3iv;case 35669:case 35673:return setValue4iv}}function SingleUniform(e,t,r){this.id=e,this.addr=r,this.setValue=getSingularSetter(t.type)}function PureArrayUniform(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=getPureArraySetter(t.type)}function StructuredUniform(e){this.id=e,UniformContainer.call(this)}StructuredUniform.prototype.setValue=function(e,t){for(var r=this.seq,n=0,a=r.length;n!==a;++n){var o=r[n];o.setValue(e,t[o.id])}};var RePathPart=/([\w\d_]+)(\])?(\[|\.)?/g;function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,r){var n=e.name,a=n.length;for(RePathPart.lastIndex=0;;){var o=RePathPart.exec(n),u=RePathPart.lastIndex,s=o[1],l=o[2]==="]",f=o[3];if(l&&(s=s|0),f===void 0||f==="["&&u+2===a){addUniform(r,f===void 0?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}else{var c=r.map,d=c[s];d===void 0&&(d=new StructuredUniform(s),addUniform(r,d)),r=d}}}function WebGLUniforms(e,t,r){UniformContainer.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<n;++a){var o=e.getActiveUniform(t,a),u=o.name,s=e.getUniformLocation(t,u);parseUniform(o,s,this)}}WebGLUniforms.prototype.setValue=function(e,t,r){var n=this.map[t];n!==void 0&&n.setValue(e,r,this.renderer)};WebGLUniforms.prototype.setOptional=function(e,t,r){var n=t[r];n!==void 0&&this.setValue(e,r,n)};WebGLUniforms.upload=function(e,t,r,n){for(var a=0,o=t.length;a!==o;++a){var u=t[a],s=r[u.id];s.needsUpdate!==!1&&u.setValue(e,s.value,n)}};WebGLUniforms.seqWithValue=function(e,t){for(var r=[],n=0,a=e.length;n!==a;++n){var o=e[n];o.id in t&&r.push(o)}return r};var ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Color(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(t,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(r-t)*6*n:n<1/2?r:n<2/3?t+(r-t)*6*(2/3-n):t}return function(r,n,a){if(r=_Math.euclideanModulo(r,1),n=_Math.clamp(n,0,1),a=_Math.clamp(a,0,1),n===0)this.r=this.g=this.b=a;else{var o=a<=.5?a*(1+n):a+n-a*n,u=2*a-o;this.r=e(u,o,r+1/3),this.g=e(u,o,r),this.b=e(u,o,r-1/3)}return this}}(),setStyle:function(e){function t(d){d!==void 0&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var u=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(u,s,l)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var f=r[1],c=f.length;if(c===3)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,this;if(c===6)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,this}if(e&&e.length>0){var f=ColorKeywords[e];f!==void 0?this.setHex(f):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},r=this.r,n=this.g,a=this.b,o=Math.max(r,n,a),u=Math.min(r,n,a),s,l,f=(u+o)/2;if(u===o)s=0,l=0;else{var c=o-u;switch(l=f<=.5?c/(o+u):c/(2-o-u),o){case r:s=(n-a)/c+(n<a?6:0);break;case n:s=(a-r)/c+2;break;case a:s=(r-n)/c+4;break}s/=6}return t.h=s,t.s=l,t.l=f,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var UniformsLib={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)}}},UniformsUtils={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var a in n)t[a]=n[a]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var n in e[r]){var a=e[r][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture)?t[r][n]=a.clone():Array.isArray(a)?t[r][n]=a.slice():t[r][n]=a}}return t}},alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,alphatest_fragment=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex=`
vec3 transformed = vec3( position );
`,beginnormal_vertex=`
vec3 objectNormal = vec3( normal );
`,bsdfs=`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		return distanceFalloff * maxDistanceCutoffFactor;
#else
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
	}
	return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;
	float b = 3.45068 + (4.18814 + y) * y;
	float v = a / b;
	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );
	return result;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = dFdx( surf_pos );
		vec3 vSigmaY = dFdy( surf_pos );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,color_fragment=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,color_pars_vertex=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transpose( const in mat3 v ) {
	mat3 tmp;
	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);
	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);
	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);
	return tmp;
}
`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,defaultnormal_vertex=`#ifdef FLIP_SIDED
	objectNormal = -objectNormal;
#endif
vec3 transformedNormal = normalMatrix * objectNormal;
`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,encodings_fragment=`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,encodings_pars_fragment=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,envmap_fragment=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );
		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		vec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,envmap_pars_fragment=`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,envmap_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,fog_vertex=`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,gradientmap_pars_fragment=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,lights_pars=`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = BlinnExponentToGGXRoughness( material.specularShininess );
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_Direct_RectArea		RE_Direct_RectArea_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,lights_template=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,logdepthbuf_fragment=`#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)
	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;
	#endif
#endif
`,map_fragment=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,map_particle_fragment=`#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,map_particle_pars_fragment=`#ifdef USE_MAP
	uniform vec4 offsetRepeat;
	uniform sampler2D map;
#endif
`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif
`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,normal_flip=`#ifdef DOUBLE_SIDED
	float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );
#else
	float flipNormal = 1.0;
#endif
`,normal_fragment=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal ) * flipNormal;
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 1.0 - 2.0 * rgb.xyz;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,project_vertex=`#ifdef USE_SKINNING
	vec4 mvPosition = modelViewMatrix * skinned;
#else
	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
#endif
gl_Position = projectionMatrix * mvPosition;
`,dithering_fragment=`#if defined( DITHERING )
  gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif
`,dithering_pars_fragment=`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif
`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif
`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			return (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			return (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return 1.0;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,shadowmap_pars_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,shadowmap_vertex=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	skinned  = bindMatrixInverse * skinned;
#endif
`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,tonemapping_pars_fragment=`#define saturate(a) clamp( a, 0.0, 1.0 )
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,uv_pars_fragment=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform vec4 offsetRepeat;
#endif
`,uv_vertex=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )
	#ifdef USE_SKINNING
		vec4 worldPosition = modelMatrix * skinned;
	#else
		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
	#endif
#endif
`,cube_frag=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
#include <common>
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,cube_vert=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,depth_frag=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,depth_vert=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,distanceRGBA_frag=`uniform vec3 lightPos;
varying vec4 vWorldPosition;
#include <common>
#include <packing>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	gl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );
}
`,distanceRGBA_vert=`varying vec4 vWorldPosition;
#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <skinbase_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition;
}
`,equirect_frag=`uniform sampler2D tEquirect;
uniform float tFlip;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,equirect_vert=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,linedashed_frag=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,linedashed_vert=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,meshbasic_frag=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <normal_flip>
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,meshbasic_vert=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,meshlambert_frag=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <normal_flip>
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshlambert_vert=`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphong_frag=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshphong_vert=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,meshphysical_frag=`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,meshphysical_vert=`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,normal_frag=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_flip>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,normal_vert=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <displacementmap_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,points_frag=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,points_vert=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,shadow_frag=`uniform float opacity;
#include <common>
#include <packing>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );
}
`,shadow_vert=`#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
}
`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_vertex,lights_pars,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_template,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_flip,normal_fragment,normalmap_pars_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,cube_frag,cube_vert,depth_frag,depth_vert,distanceRGBA_frag,distanceRGBA_vert,equirect_frag,equirect_vert,linedashed_frag,linedashed_vert,meshbasic_frag,meshbasic_vert,meshlambert_frag,meshlambert_vert,meshphong_frag,meshphong_vert,meshphysical_frag,meshphysical_vert,normal_frag,normal_vert,points_frag,points_vert,shadow_frag,shadow_vert},ShaderLib={basic:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},points:{uniforms:UniformsUtils.merge([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:UniformsUtils.merge([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.normal_vert,fragmentShader:ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Vector3}},vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag}};ShaderLib.physical={uniforms:UniformsUtils.merge([ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};function Box2(e,t){this.min=e!==void 0?e:new Vector2(1/0,1/0),this.max=t!==void 0?t:new Vector2(-1/0,-1/0)}Object.assign(Box2.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector2;return function(r,n){var a=e.copy(n).multiplyScalar(.5);return this.min.copy(r).sub(a),this.max.copy(r).add(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new Vector2;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var r=t||new Vector2;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector2;return function(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function LensFlarePlugin(e,t){var r=e.context,n=e.state,a,o,u,s,l,f,c,d;function h(){var p=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),_=new Uint16Array([0,1,2,0,2,3]);a=r.createBuffer(),o=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,p,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,_,r.STATIC_DRAW),c=r.createTexture(),d=r.createTexture(),n.bindTexture(r.TEXTURE_2D,c),r.texImage2D(r.TEXTURE_2D,0,r.RGB,16,16,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),n.bindTexture(r.TEXTURE_2D,d),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,16,16,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),u={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join(`
`)},s=m(u),l={vertex:r.getAttribLocation(s,"position"),uv:r.getAttribLocation(s,"uv")},f={renderType:r.getUniformLocation(s,"renderType"),map:r.getUniformLocation(s,"map"),occlusionMap:r.getUniformLocation(s,"occlusionMap"),opacity:r.getUniformLocation(s,"opacity"),color:r.getUniformLocation(s,"color"),scale:r.getUniformLocation(s,"scale"),rotation:r.getUniformLocation(s,"rotation"),screenPosition:r.getUniformLocation(s,"screenPosition")}}this.render=function(p,_,M){if(t.length!==0){var y=new Vector3,v=M.w/M.z,g=M.z*.5,E=M.w*.5,T=16/M.w,S=new Vector2(T*v,T),b=new Vector3(1,1,0),O=new Vector2(1,1),P=new Box2;P.min.set(M.x,M.y),P.max.set(M.x+(M.z-16),M.y+(M.w-16)),s===void 0&&h(),r.useProgram(s),n.initAttributes(),n.enableAttribute(l.vertex),n.enableAttribute(l.uv),n.disableUnusedAttributes(),r.uniform1i(f.occlusionMap,0),r.uniform1i(f.map,1),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(l.vertex,2,r.FLOAT,!1,2*8,0),r.vertexAttribPointer(l.uv,2,r.FLOAT,!1,2*8,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),n.disable(r.CULL_FACE),n.buffers.depth.setMask(!1);for(var B=0,V=t.length;B<V;B++){T=16/M.w,S.set(T*v,T);var R=t[B];if(y.set(R.matrixWorld.elements[12],R.matrixWorld.elements[13],R.matrixWorld.elements[14]),y.applyMatrix4(_.matrixWorldInverse),y.applyMatrix4(_.projectionMatrix),b.copy(y),O.x=M.x+b.x*g+g-8,O.y=M.y+b.y*E+E-8,P.containsPoint(O)===!0){n.activeTexture(r.TEXTURE0),n.bindTexture(r.TEXTURE_2D,null),n.activeTexture(r.TEXTURE1),n.bindTexture(r.TEXTURE_2D,c),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGB,O.x,O.y,16,16,0),r.uniform1i(f.renderType,0),r.uniform2f(f.scale,S.x,S.y),r.uniform3f(f.screenPosition,b.x,b.y,b.z),n.disable(r.BLEND),n.enable(r.DEPTH_TEST),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),n.activeTexture(r.TEXTURE0),n.bindTexture(r.TEXTURE_2D,d),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,O.x,O.y,16,16,0),r.uniform1i(f.renderType,1),n.disable(r.DEPTH_TEST),n.activeTexture(r.TEXTURE1),n.bindTexture(r.TEXTURE_2D,c),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),R.positionScreen.copy(b),R.customUpdateCallback?R.customUpdateCallback(R):R.updateLensFlares(),r.uniform1i(f.renderType,2),n.enable(r.BLEND);for(var w=0,H=R.lensFlares.length;w<H;w++){var D=R.lensFlares[w];D.opacity>.001&&D.scale>.001&&(b.x=D.x,b.y=D.y,b.z=D.z,T=D.size*D.scale/M.w,S.x=T*v,S.y=T,r.uniform3f(f.screenPosition,b.x,b.y,b.z),r.uniform2f(f.scale,S.x,S.y),r.uniform1f(f.rotation,D.rotation),r.uniform1f(f.opacity,D.opacity),r.uniform3f(f.color,D.color.r,D.color.g,D.color.b),n.setBlending(D.blending,D.blendEquation,D.blendSrc,D.blendDst),e.setTexture2D(D.texture,1),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0))}}}n.enable(r.CULL_FACE),n.enable(r.DEPTH_TEST),n.buffers.depth.setMask(!0),e.resetGLState()}};function m(p){var _=r.createProgram(),M=r.createShader(r.FRAGMENT_SHADER),y=r.createShader(r.VERTEX_SHADER),v="precision "+e.getPrecision()+` float;
`;return r.shaderSource(M,v+p.fragmentShader),r.shaderSource(y,v+p.vertexShader),r.compileShader(M),r.compileShader(y),r.attachShader(_,M),r.attachShader(_,y),r.linkProgram(_),_}}function SpritePlugin(e,t){var r=e.context,n=e.state,a,o,u,s,l,f,c=new Vector3,d=new Quaternion,h=new Vector3;function m(){var M=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),y=new Uint16Array([0,1,2,0,2,3]);a=r.createBuffer(),o=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,M,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,y,r.STATIC_DRAW),u=p(),s={position:r.getAttribLocation(u,"position"),uv:r.getAttribLocation(u,"uv")},l={uvOffset:r.getUniformLocation(u,"uvOffset"),uvScale:r.getUniformLocation(u,"uvScale"),rotation:r.getUniformLocation(u,"rotation"),scale:r.getUniformLocation(u,"scale"),color:r.getUniformLocation(u,"color"),map:r.getUniformLocation(u,"map"),opacity:r.getUniformLocation(u,"opacity"),modelViewMatrix:r.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:r.getUniformLocation(u,"projectionMatrix"),fogType:r.getUniformLocation(u,"fogType"),fogDensity:r.getUniformLocation(u,"fogDensity"),fogNear:r.getUniformLocation(u,"fogNear"),fogFar:r.getUniformLocation(u,"fogFar"),fogColor:r.getUniformLocation(u,"fogColor"),alphaTest:r.getUniformLocation(u,"alphaTest")};var v=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");v.width=8,v.height=8;var g=v.getContext("2d");g.fillStyle="white",g.fillRect(0,0,8,8),f=new Texture(v),f.needsUpdate=!0}this.render=function(M,y){if(t.length!==0){u===void 0&&m(),r.useProgram(u),n.initAttributes(),n.enableAttribute(s.position),n.enableAttribute(s.uv),n.disableUnusedAttributes(),n.disable(r.CULL_FACE),n.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,a),r.vertexAttribPointer(s.position,2,r.FLOAT,!1,2*8,0),r.vertexAttribPointer(s.uv,2,r.FLOAT,!1,2*8,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.uniformMatrix4fv(l.projectionMatrix,!1,y.projectionMatrix.elements),n.activeTexture(r.TEXTURE0),r.uniform1i(l.map,0);var v=0,g=0,E=M.fog;E?(r.uniform3f(l.fogColor,E.color.r,E.color.g,E.color.b),E.isFog?(r.uniform1f(l.fogNear,E.near),r.uniform1f(l.fogFar,E.far),r.uniform1i(l.fogType,1),v=1,g=1):E.isFogExp2&&(r.uniform1f(l.fogDensity,E.density),r.uniform1i(l.fogType,2),v=2,g=2)):(r.uniform1i(l.fogType,0),v=0,g=0);for(var T=0,S=t.length;T<S;T++){var b=t[T];b.modelViewMatrix.multiplyMatrices(y.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14]}t.sort(_);for(var O=[],T=0,S=t.length;T<S;T++){var b=t[T],P=b.material;if(P.visible!==!1){r.uniform1f(l.alphaTest,P.alphaTest),r.uniformMatrix4fv(l.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(c,d,h),O[0]=h.x,O[1]=h.y;var B=0;M.fog&&P.fog&&(B=g),v!==B&&(r.uniform1i(l.fogType,B),v=B),P.map!==null?(r.uniform2f(l.uvOffset,P.map.offset.x,P.map.offset.y),r.uniform2f(l.uvScale,P.map.repeat.x,P.map.repeat.y)):(r.uniform2f(l.uvOffset,0,0),r.uniform2f(l.uvScale,1,1)),r.uniform1f(l.opacity,P.opacity),r.uniform3f(l.color,P.color.r,P.color.g,P.color.b),r.uniform1f(l.rotation,P.rotation),r.uniform2fv(l.scale,O),n.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),n.buffers.depth.setTest(P.depthTest),n.buffers.depth.setMask(P.depthWrite),P.map?e.setTexture2D(P.map,0):e.setTexture2D(f,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}}n.enable(r.CULL_FACE),e.resetGLState()}};function p(){var M=r.createProgram(),y=r.createShader(r.VERTEX_SHADER),v=r.createShader(r.FRAGMENT_SHADER);return r.shaderSource(y,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join(`
`)),r.shaderSource(v,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join(`
`)),r.compileShader(y),r.compileShader(v),r.attachShader(M,y),r.attachShader(M,v),r.linkProgram(M),M}function _(M,y){return M.renderOrder!==y.renderOrder?M.renderOrder-y.renderOrder:M.z!==y.z?y.z-M.z:y.id-M.id}}var materialId=0;function Material(){Object.defineProperty(this,"id",{value:materialId++}),this.uuid=_Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=NormalBlending,this.side=FrontSide,this.shading=SmoothShading,this.vertexColors=NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0}Object.assign(Material.prototype,EventDispatcher.prototype,{isMaterial:!0,setValues:function(e){if(e!==void 0)for(var t in e){var r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}var n=this[t];if(n===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):t==="overdraw"?this[t]=Number(r):this[t]=r}},toJSON:function(e){var t=e===void 0;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearCoat!==void 0&&(r.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(r.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(r.size=this.size),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(r.blending=this.blending),this.shading!==SmoothShading&&(r.shading=this.shading),this.side!==FrontSide&&(r.side=this.side),this.vertexColors!==NoColors&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,r.dithering=this.dithering;function n(u){var s=[];for(var l in u){var f=u[l];delete f.metadata,s.push(f)}return s}if(t){var a=n(e.textures),o=n(e.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(t!==null){var n=t.length;r=new Array(n);for(var a=0;a!==n;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function ShaderMaterial(e){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}ShaderMaterial.prototype=Object.create(Material.prototype);ShaderMaterial.prototype.constructor=ShaderMaterial;ShaderMaterial.prototype.isShaderMaterial=!0;ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this};ShaderMaterial.prototype.toJSON=function(e){var t=Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t};function MeshDepthMaterial(e){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}MeshDepthMaterial.prototype=Object.create(Material.prototype);MeshDepthMaterial.prototype.constructor=MeshDepthMaterial;MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;MeshDepthMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function Box3(e,t){this.min=e!==void 0?e:new Vector3(1/0,1/0,1/0),this.max=t!==void 0?t:new Vector3(-1/0,-1/0,-1/0)}Object.assign(Box3.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,a=-1/0,o=-1/0,u=-1/0,s=0,l=e.length;s<l;s+=3){var f=e[s],c=e[s+1],d=e[s+2];f<t&&(t=f),c<r&&(r=c),d<n&&(n=d),f>a&&(a=f),c>o&&(o=c),d>u&&(u=d)}return this.min.set(t,r,n),this.max.set(a,o,u),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,a=-1/0,o=-1/0,u=-1/0,s=0,l=e.count;s<l;s++){var f=e.getX(s),c=e.getY(s),d=e.getZ(s);f<t&&(t=f),c<r&&(r=c),d<n&&(n=d),f>a&&(a=f),c>o&&(o=c),d>u&&(u=d)}return this.min.set(t,r,n),this.max.set(a,o,u),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector3;return function(r,n){var a=e.copy(n).multiplyScalar(.5);return this.min.copy(r).sub(a),this.max.copy(r).add(a),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new Vector3;return function(r){var n=this;return r.updateMatrixWorld(!0),r.traverse(function(a){var o,u,s=a.geometry;if(s!==void 0){if(s.isGeometry){var l=s.vertices;for(o=0,u=l.length;o<u;o++)e.copy(l[o]),e.applyMatrix4(a.matrixWorld),n.expandByPoint(e)}else if(s.isBufferGeometry){var f=s.attributes.position;if(f!==void 0)for(o=0,u=f.count;o<u;o++)e.fromBufferAttribute(f,o).applyMatrix4(a.matrixWorld),n.expandByPoint(e)}}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var r=t||new Vector3;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Vector3;return function(r){return this.clampPoint(r.center,e),e.distanceToSquared(r.center)<=r.radius*r.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},clampPoint:function(e,t){var r=t||new Vector3;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector3;return function(r){var n=e.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),getBoundingSphere:function(){var e=new Vector3;return function(r){var n=r||new Sphere;return this.getCenter(n.center),n.radius=this.getSize(e).length()*.5,n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3];return function(r){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function Sphere(e,t){this.center=e!==void 0?e:new Vector3,this.radius=t!==void 0?t:0}Object.assign(Sphere.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Box3;return function(r,n){var a=this.center;n!==void 0?a.copy(n):e.setFromPoints(r).getCenter(a);for(var o=0,u=0,s=r.length;u<s;u++)o=Math.max(o,a.distanceToSquared(r[u]));return this.radius=Math.sqrt(o),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new Vector3;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(e,t,r,n,a,o,u,s,l){var f=this.elements;return f[0]=e,f[1]=n,f[2]=u,f[3]=t,f[4]=a,f[5]=s,f[6]=r,f[7]=o,f[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Vector3;return function(r){for(var n=0,a=r.count;n<a;n++)e.x=r.getX(n),e.y=r.getY(n),e.z=r.getZ(n),e.applyMatrix3(this),r.setXYZ(n,e.x,e.y,e.z);return r}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,a=this.elements,o=r[0],u=r[3],s=r[6],l=r[1],f=r[4],c=r[7],d=r[2],h=r[5],m=r[8],p=n[0],_=n[3],M=n[6],y=n[1],v=n[4],g=n[7],E=n[2],T=n[5],S=n[8];return a[0]=o*p+u*y+s*E,a[3]=o*_+u*v+s*T,a[6]=o*M+u*g+s*S,a[1]=l*p+f*y+c*E,a[4]=l*_+f*v+c*T,a[7]=l*M+f*g+c*S,a[2]=d*p+h*y+m*E,a[5]=d*_+h*v+m*T,a[8]=d*M+h*g+m*S,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],u=e[5],s=e[6],l=e[7],f=e[8];return t*o*f-t*u*l-r*a*f+r*u*s+n*a*l-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,a=r[0],o=r[1],u=r[2],s=r[3],l=r[4],f=r[5],c=r[6],d=r[7],h=r[8],m=h*l-f*d,p=f*c-h*s,_=d*s-l*c,M=a*m+o*p+u*_;if(M===0){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(y);return console.warn(y),this.identity()}var v=1/M;return n[0]=m*v,n[1]=(u*d-h*o)*v,n[2]=(f*o-u*l)*v,n[3]=p*v,n[4]=(h*a-u*c)*v,n[5]=(u*s-f*a)*v,n[6]=_*v,n[7]=(o*c-d*a)*v,n[8]=(l*a-o*s)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});function Plane(e,t){this.normal=e!==void 0?e:new Vector3(1,0,0),this.constant=t!==void 0?t:0}Object.assign(Plane.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Vector3,t=new Vector3;return function(n,a,o){var u=e.subVectors(o,a).cross(t.subVectors(n,a)).normalize();return this.setFromNormalAndCoplanarPoint(u,n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),n=t||new Vector3;return n.copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new Vector3;return function(r,n){var a=n||new Vector3,o=r.delta(e),u=this.normal.dot(o);if(u===0)return this.distanceToPoint(r.start)===0?a.copy(r.start):void 0;var s=-(r.start.dot(this.normal)+this.constant)/u;if(!(s<0||s>1))return a.copy(o).multiplyScalar(s).add(r.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Vector3,t=new Matrix3;return function(n,a){var o=this.coplanarPoint(e).applyMatrix4(n),u=a||t.getNormalMatrix(n),s=this.normal.applyMatrix3(u).normalize();return this.constant=-o.dot(s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function Frustum(e,t,r,n,a,o){this.planes=[e!==void 0?e:new Plane,t!==void 0?t:new Plane,r!==void 0?r:new Plane,n!==void 0?n:new Plane,a!==void 0?a:new Plane,o!==void 0?o:new Plane]}Object.assign(Frustum.prototype,{set:function(e,t,r,n,a,o){var u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(r),u[3].copy(n),u[4].copy(a),u[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],l=r[5],f=r[6],c=r[7],d=r[8],h=r[9],m=r[10],p=r[11],_=r[12],M=r[13],y=r[14],v=r[15];return t[0].setComponents(u-n,c-s,p-d,v-_).normalize(),t[1].setComponents(u+n,c+s,p+d,v+_).normalize(),t[2].setComponents(u+a,c+l,p+h,v+M).normalize(),t[3].setComponents(u-a,c-l,p-h,v-M).normalize(),t[4].setComponents(u-o,c-f,p-m,v-y).normalize(),t[5].setComponents(u+o,c+f,p+m,v+y).normalize(),this},intersectsObject:function(){var e=new Sphere;return function(r){var n=r.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Sphere;return function(r){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(r.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,a=0;a<6;a++){var o=t[a].distanceToPoint(r);if(o<n)return!1}return!0},intersectsBox:function(){var e=new Vector3,t=new Vector3;return function(n){for(var a=this.planes,o=0;o<6;o++){var u=a[o];e.x=u.normal.x>0?n.min.x:n.max.x,t.x=u.normal.x>0?n.max.x:n.min.x,e.y=u.normal.y>0?n.min.y:n.max.y,t.y=u.normal.y>0?n.max.y:n.min.y,e.z=u.normal.z>0?n.min.z:n.max.z,t.z=u.normal.z>0?n.max.z:n.min.z;var s=u.distanceToPoint(e),l=u.distanceToPoint(t);if(s<0&&l<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});function WebGLShadowMap(e,t,r,n){var a=e.context,o=e.state,u=new Frustum,s=new Matrix4,l=t.shadows,f=new Vector2,c=new Vector2(n.maxTextureSize,n.maxTextureSize),d=new Vector3,h=new Vector3,m=1,p=2,_=(m|p)+1,M=new Array(_),y=new Array(_),v={},g=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],E=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],T=[new Vector4,new Vector4,new Vector4,new Vector4,new Vector4,new Vector4],S=new MeshDepthMaterial;S.depthPacking=RGBADepthPacking,S.clipping=!0;for(var b=ShaderLib.distanceRGBA,O=UniformsUtils.clone(b.uniforms),P=0;P!==_;++P){var B=(P&m)!=0,V=(P&p)!=0,R=S.clone();R.morphTargets=B,R.skinning=V,M[P]=R;var w=new ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:O,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:B,skinning:V,clipping:!0});y[P]=w}var H=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(W,k){if(H.enabled!==!1&&!(H.autoUpdate===!1&&H.needsUpdate===!1)&&l.length!==0){o.disable(a.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var J,X,I=0,L=l.length;I<L;I++){var U=l[I],G=U.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}var j=G.camera,oe=G.matrix;if(h.setFromMatrixPosition(U.matrixWorld),j.position.copy(h),f.copy(G.mapSize),f.min(c),U&&U.isPointLight){J=6,X=!0;var z=f.x,x=f.y;T[0].set(z*2,x,z,x),T[1].set(0,x,z,x),T[2].set(z*3,x,z,x),T[3].set(z,x,z,x),T[4].set(z*3,0,z,x),T[5].set(z,0,z,x),f.x*=4,f.y*=2,oe.makeTranslation(-h.x,-h.y,-h.z)}else J=1,X=!1,d.setFromMatrixPosition(U.target.matrixWorld),j.lookAt(d),j.updateMatrixWorld(),j.matrixWorldInverse.getInverse(j.matrixWorld),oe.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),oe.multiply(j.projectionMatrix),oe.multiply(j.matrixWorldInverse);if(G.map===null){var fe={minFilter:NearestFilter,magFilter:NearestFilter,format:RGBAFormat};G.map=new WebGLRenderTarget(f.x,f.y,fe),G.map.texture.name=U.name+".shadowMap",j.updateProjectionMatrix()}G.isSpotLightShadow&&G.update(U);var $=G.map;e.setRenderTarget($),e.clear();for(var ue=0;ue<J;ue++){if(X){d.copy(j.position),d.add(g[ue]),j.up.copy(E[ue]),j.lookAt(d),j.updateMatrixWorld(),j.matrixWorldInverse.getInverse(j.matrixWorld);var Z=T[ue];o.viewport(Z)}s.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),u.setFromMatrix(s),K(W,k,j,X)}}var ce=e.getClearColor(),pe=e.getClearAlpha();e.setClearColor(ce,pe),H.needsUpdate=!1}};function D(W,k,J,X){var I=W.geometry,L=null,U=M,G=W.customDepthMaterial;if(J&&(U=y,G=W.customDistanceMaterial),G)L=G;else{var j=!1;k.morphTargets&&(I&&I.isBufferGeometry?j=I.morphAttributes&&I.morphAttributes.position&&I.morphAttributes.position.length>0:I&&I.isGeometry&&(j=I.morphTargets&&I.morphTargets.length>0)),W.isSkinnedMesh&&k.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",W);var oe=W.isSkinnedMesh&&k.skinning,z=0;j&&(z|=m),oe&&(z|=p),L=U[z]}if(e.localClippingEnabled&&k.clipShadows===!0&&k.clippingPlanes.length!==0){var x=L.uuid,fe=k.uuid,$=v[x];$===void 0&&($={},v[x]=$);var ue=$[fe];ue===void 0&&(ue=L.clone(),$[fe]=ue),L=ue}L.visible=k.visible,L.wireframe=k.wireframe;var Z=k.side;return H.renderSingleSided&&Z==DoubleSide&&(Z=FrontSide),H.renderReverseSided&&(Z===FrontSide?Z=BackSide:Z===BackSide&&(Z=FrontSide)),L.side=Z,L.clipShadows=k.clipShadows,L.clippingPlanes=k.clippingPlanes,L.wireframeLinewidth=k.wireframeLinewidth,L.linewidth=k.linewidth,J&&L.uniforms.lightPos!==void 0&&L.uniforms.lightPos.value.copy(X),L}function K(W,k,J,X){if(W.visible!==!1){var I=W.layers.test(k.layers);if(I&&(W.isMesh||W.isLine||W.isPoints)&&W.castShadow&&(!W.frustumCulled||u.intersectsObject(W))){W.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,W.matrixWorld);var L=r.update(W),U=W.material;if(Array.isArray(U))for(var G=L.groups,j=0,oe=G.length;j<oe;j++){var z=G[j],x=U[z.materialIndex];if(x&&x.visible){var fe=D(W,x,X,h);e.renderBufferDirect(J,null,L,fe,W,z)}}else if(U.visible){var fe=D(W,U,X,h);e.renderBufferDirect(J,null,L,fe,W,null)}}for(var $=W.children,ue=0,Z=$.length;ue<Z;ue++)K($[ue],k,J,X)}}}function Ray(e,t){this.origin=e!==void 0?e:new Vector3,this.direction=t!==void 0?t:new Vector3}Object.assign(Ray.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new Vector3;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Vector3;return function(r){return this.origin.copy(this.at(r,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new Vector3;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Vector3;return function(r){var n=e.subVectors(r,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(r):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(r))}}(),distanceSqToSegment:function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(a,o,u,s){e.copy(a).add(o).multiplyScalar(.5),t.copy(o).sub(a).normalize(),r.copy(this.origin).sub(e);var l=a.distanceTo(o)*.5,f=-this.direction.dot(t),c=r.dot(this.direction),d=-r.dot(t),h=r.lengthSq(),m=Math.abs(1-f*f),p,_,M,y;if(m>0)if(p=f*d-c,_=f*c-d,y=l*m,p>=0)if(_>=-y)if(_<=y){var v=1/m;p*=v,_*=v,M=p*(p+f*_+2*c)+_*(f*p+_+2*d)+h}else _=l,p=Math.max(0,-(f*_+c)),M=-p*p+_*(_+2*d)+h;else _=-l,p=Math.max(0,-(f*_+c)),M=-p*p+_*(_+2*d)+h;else _<=-y?(p=Math.max(0,-(-f*l+c)),_=p>0?-l:Math.min(Math.max(-l,-d),l),M=-p*p+_*(_+2*d)+h):_<=y?(p=0,_=Math.min(Math.max(-l,-d),l),M=_*(_+2*d)+h):(p=Math.max(0,-(f*l+c)),_=p>0?l:Math.min(Math.max(-l,-d),l),M=-p*p+_*(_+2*d)+h);else _=f>0?-l:l,p=Math.max(0,-(f*_+c)),M=-p*p+_*(_+2*d)+h;return u&&u.copy(this.direction).multiplyScalar(p).add(this.origin),s&&s.copy(t).multiplyScalar(_).add(e),M}}(),intersectSphere:function(){var e=new Vector3;return function(r,n){e.subVectors(r.center,this.origin);var a=e.dot(this.direction),o=e.dot(e)-a*a,u=r.radius*r.radius;if(o>u)return null;var s=Math.sqrt(u-o),l=a-s,f=a+s;return l<0&&f<0?null:l<0?this.at(f,n):this.at(l,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return r===null?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var r=e.normal.dot(this.direction);return r*t<0},intersectBox:function(e,t){var r,n,a,o,u,s,l=1/this.direction.x,f=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(r=(e.min.x-d.x)*l,n=(e.max.x-d.x)*l):(r=(e.max.x-d.x)*l,n=(e.min.x-d.x)*l),f>=0?(a=(e.min.y-d.y)*f,o=(e.max.y-d.y)*f):(a=(e.max.y-d.y)*f,o=(e.min.y-d.y)*f),r>o||a>n||((a>r||r!==r)&&(r=a),(o<n||n!==n)&&(n=o),c>=0?(u=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(u=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),r>s||u>n)||((u>r||r!==r)&&(r=u),(s<n||n!==n)&&(n=s),n<0)?null:this.at(r>=0?r:n,t)},intersectsBox:function(){var e=new Vector3;return function(r){return this.intersectBox(r,e)!==null}}(),intersectTriangle:function(){var e=new Vector3,t=new Vector3,r=new Vector3,n=new Vector3;return function(o,u,s,l,f){t.subVectors(u,o),r.subVectors(s,o),n.crossVectors(t,r);var c=this.direction.dot(n),d;if(c>0){if(l)return null;d=1}else if(c<0)d=-1,c=-c;else return null;e.subVectors(this.origin,o);var h=d*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var m=d*this.direction.dot(t.cross(e));if(m<0||h+m>c)return null;var p=-d*e.dot(n);return p<0?null:this.at(p/c,f)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function Euler(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||Euler.DefaultOrder}Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Euler.DefaultOrder="XYZ";Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}});Object.assign(Euler.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=_Math.clamp,a=e.elements,o=a[0],u=a[4],s=a[8],l=a[1],f=a[5],c=a[9],d=a[2],h=a[6],m=a[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(h,f),this._z=0)):t==="YXZ"?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,m),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-d,o),this._z=0)):t==="ZXY"?(this._x=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-u,f)):(this._y=0,this._z=Math.atan2(l,o))):t==="ZYX"?(this._y=Math.asin(-n(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-u,f))):t==="YZX"?(this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,f),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(s,m))):t==="XZY"?(this._z=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(h,f),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,m),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,r!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Matrix4;return function(r,n,a){return e.makeRotationFromQuaternion(r),this.setFromRotationMatrix(e,n,a)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Quaternion;return function(r){return e.setFromEuler(this),this.setFromQuaternion(e,r)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function Layers(){this.mask=1|0}Object.assign(Layers.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!=0}});var object3DId=0;function Object3D(){Object.defineProperty(this,"id",{value:object3DId++}),this.uuid=_Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var e=new Vector3,t=new Euler,r=new Quaternion,n=new Vector3(1,1,1);function a(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t.onChange(a),r.onChange(o),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:n},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object.assign(Object3D.prototype,EventDispatcher.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Quaternion;return function(r,n){return e.setFromAxisAngle(r,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new Vector3(1,0,0);return function(r){return this.rotateOnAxis(e,r)}}(),rotateY:function(){var e=new Vector3(0,1,0);return function(r){return this.rotateOnAxis(e,r)}}(),rotateZ:function(){var e=new Vector3(0,0,1);return function(r){return this.rotateOnAxis(e,r)}}(),translateOnAxis:function(){var e=new Vector3;return function(r,n){return e.copy(r).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Vector3(1,0,0);return function(r){return this.translateOnAxis(e,r)}}(),translateY:function(){var e=new Vector3(0,1,0);return function(r){return this.translateOnAxis(e,r)}}(),translateZ:function(){var e=new Vector3(0,0,1);return function(r){return this.translateOnAxis(e,r)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Matrix4;return function(r){return r.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Matrix4;return function(r){this.isCamera?e.lookAt(this.position,r,this.up):e.lookAt(r,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);r!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var a=this.children[r],o=a.getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){var t=e||new Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Vector3,t=new Vector3;return function(n){var a=n||new Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,a,t),a}}(),getWorldRotation:function(){var e=new Quaternion;return function(r){var n=r||new Euler;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Vector3,t=new Quaternion;return function(n){var a=n||new Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,a),a}}(),getWorldDirection:function(){var e=new Quaternion;return function(r){var n=r||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){var t=e===void 0||e==="",r={};t&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),n.matrix=this.matrix.toArray();function a(m,p){return m[p.uuid]===void 0&&(m[p.uuid]=p.toJSON(e)),p.uuid}if(this.geometry!==void 0&&(n.geometry=a(e.geometries,this.geometry)),this.material!==void 0)if(Array.isArray(this.material)){for(var o=[],u=0,s=this.material.length;u<s;u++)o.push(a(e.materials,this.material[u]));n.material=o}else n.material=a(e.materials,this.material);if(this.children.length>0){n.children=[];for(var u=0;u<this.children.length;u++)n.children.push(this.children[u].toJSON(e).object)}if(t){var l=h(e.geometries),f=h(e.materials),c=h(e.textures),d=h(e.images);l.length>0&&(r.geometries=l),f.length>0&&(r.materials=f),c.length>0&&(r.textures=c),d.length>0&&(r.images=d)}return r.object=n,r;function h(m){var p=[];for(var _ in m){var M=m[_];delete M.metadata,p.push(M)}return p}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}});function Line3(e,t){this.start=e!==void 0?e:new Vector3,this.end=t!==void 0?t:new Vector3}Object.assign(Line3.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Vector3,t=new Vector3;return function(n,a){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var o=t.dot(t),u=t.dot(e),s=u/o;return a&&(s=_Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),a=r||new Vector3;return this.delta(a).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function Triangle(e,t,r){this.a=e!==void 0?e:new Vector3,this.b=t!==void 0?t:new Vector3,this.c=r!==void 0?r:new Vector3}Object.assign(Triangle,{normal:function(){var e=new Vector3;return function(r,n,a,o){var u=o||new Vector3;u.subVectors(a,n),e.subVectors(r,n),u.cross(e);var s=u.lengthSq();return s>0?u.multiplyScalar(1/Math.sqrt(s)):u.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(a,o,u,s,l){e.subVectors(s,o),t.subVectors(u,o),r.subVectors(a,o);var f=e.dot(e),c=e.dot(t),d=e.dot(r),h=t.dot(t),m=t.dot(r),p=f*h-c*c,_=l||new Vector3;if(p===0)return _.set(-2,-1,-1);var M=1/p,y=(h*d-c*m)*M,v=(f*m-c*d)*M;return _.set(1-y-v,v,y)}}(),containsPoint:function(){var e=new Vector3;return function(r,n,a,o){var u=Triangle.barycoordFromPoint(r,n,a,o,e);return u.x>=0&&u.y>=0&&u.x+u.y<=1}}()});Object.assign(Triangle.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Vector3,t=new Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Plane,t=[new Line3,new Line3,new Line3],r=new Vector3,n=new Vector3;return function(o,u){var s=u||new Vector3,l=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(o,r),this.containsPoint(r)===!0)s.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var f=0;f<t.length;f++){t[f].closestPointToPoint(r,!0,n);var c=r.distanceToSquared(n);c<l&&(l=c,s.copy(n))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function Face3(e,t,r,n,a,o){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Vector3,this.vertexNormals=Array.isArray(n)?n:[],this.color=a&&a.isColor?a:new Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=o!==void 0?o:0}Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});function MeshBasicMaterial(e){Material.call(this),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}MeshBasicMaterial.prototype=Object.create(Material.prototype);MeshBasicMaterial.prototype.constructor=MeshBasicMaterial;MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;MeshBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};function BufferAttribute(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=_Math.generateUUID(),this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,a=this.itemSize;n<a;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new Color),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];t[r++]=o.a,t[r++]=o.b,t[r++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Vector2),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Vector3),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Vector4),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=a,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function Int8BufferAttribute(e,t){BufferAttribute.call(this,new Int8Array(e),t)}Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int8BufferAttribute.prototype.constructor=Int8BufferAttribute;function Uint8BufferAttribute(e,t){BufferAttribute.call(this,new Uint8Array(e),t)}Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute;function Uint8ClampedBufferAttribute(e,t){BufferAttribute.call(this,new Uint8ClampedArray(e),t)}Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute;function Int16BufferAttribute(e,t){BufferAttribute.call(this,new Int16Array(e),t)}Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int16BufferAttribute.prototype.constructor=Int16BufferAttribute;function Uint16BufferAttribute(e,t){BufferAttribute.call(this,new Uint16Array(e),t)}Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute;function Int32BufferAttribute(e,t){BufferAttribute.call(this,new Int32Array(e),t)}Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Int32BufferAttribute.prototype.constructor=Int32BufferAttribute;function Uint32BufferAttribute(e,t){BufferAttribute.call(this,new Uint32Array(e),t)}Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute;function Float32BufferAttribute(e,t){BufferAttribute.call(this,new Float32Array(e),t)}Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float32BufferAttribute.prototype.constructor=Float32BufferAttribute;function Float64BufferAttribute(e,t){BufferAttribute.call(this,new Float64Array(e),t)}Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype);Float64BufferAttribute.prototype.constructor=Float64BufferAttribute;function DirectGeometry(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(DirectGeometry.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,a=e.faces,o=0;o<a.length;o++){var u=a[o];u.materialIndex!==n&&(n=u.materialIndex,t!==void 0&&(t.count=o*3-t.start,r.push(t)),t={start:o*3,materialIndex:n})}t!==void 0&&(t.count=o*3-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t=e.faces,r=e.vertices,n=e.faceVertexUvs,a=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,u=e.morphTargets,s=u.length,l;if(s>0){l=[];for(var f=0;f<s;f++)l[f]=[];this.morphTargets.position=l}var c=e.morphNormals,d=c.length,h;if(d>0){h=[];for(var f=0;f<d;f++)h[f]=[];this.morphTargets.normal=h}for(var m=e.skinIndices,p=e.skinWeights,_=m.length===r.length,M=p.length===r.length,f=0;f<t.length;f++){var y=t[f];this.vertices.push(r[y.a],r[y.b],r[y.c]);var v=y.vertexNormals;if(v.length===3)this.normals.push(v[0],v[1],v[2]);else{var g=y.normal;this.normals.push(g,g,g)}var E=y.vertexColors;if(E.length===3)this.colors.push(E[0],E[1],E[2]);else{var T=y.color;this.colors.push(T,T,T)}if(a===!0){var S=n[0][f];S!==void 0?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",f),this.uvs.push(new Vector2,new Vector2,new Vector2))}if(o===!0){var S=n[1][f];S!==void 0?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",f),this.uvs2.push(new Vector2,new Vector2,new Vector2))}for(var b=0;b<s;b++){var O=u[b].vertices;l[b].push(O[y.a],O[y.b],O[y.c])}for(var b=0;b<d;b++){var P=c[b].vertexNormals[f];h[b].push(P.a,P.b,P.c)}_&&this.skinIndices.push(m[y.a],m[y.b],m[y.c]),M&&this.skinWeights.push(p[y.a],p[y.b],p[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function arrayMax(e){if(e.length===0)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}var count=0;function GeometryIdCount(){return count++}function Geometry(){Object.defineProperty(this,"id",{value:GeometryIdCount()}),this.uuid=_Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(Geometry.prototype,EventDispatcher.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=new Matrix3().getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){var a=this.vertices[r];a.applyMatrix4(e)}for(var r=0,n=this.faces.length;r<n;r++){var o=this.faces[r];o.normal.applyMatrix3(t).normalize();for(var u=0,s=o.vertexNormals.length;u<s;u++)o.vertexNormals[u].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Matrix4;return function(r){return e.makeRotationX(r),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function(r){return e.makeRotationY(r),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function(r){return e.makeRotationZ(r),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function(r,n,a){return e.makeTranslation(r,n,a),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function(r,n,a){return e.makeScale(r,n,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function(r){e.lookAt(r),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,r=e.index!==null?e.index.array:void 0,n=e.attributes,a=n.position.array,o=n.normal!==void 0?n.normal.array:void 0,u=n.color!==void 0?n.color.array:void 0,s=n.uv!==void 0?n.uv.array:void 0,l=n.uv2!==void 0?n.uv2.array:void 0;l!==void 0&&(this.faceVertexUvs[1]=[]);for(var f=[],c=[],d=[],h=0,m=0;h<a.length;h+=3,m+=2)t.vertices.push(new Vector3(a[h],a[h+1],a[h+2])),o!==void 0&&f.push(new Vector3(o[h],o[h+1],o[h+2])),u!==void 0&&t.colors.push(new Color(u[h],u[h+1],u[h+2])),s!==void 0&&c.push(new Vector2(s[m],s[m+1])),l!==void 0&&d.push(new Vector2(l[m],l[m+1]));function p(E,T,S,b){var O=o!==void 0?[f[E].clone(),f[T].clone(),f[S].clone()]:[],P=u!==void 0?[t.colors[E].clone(),t.colors[T].clone(),t.colors[S].clone()]:[],B=new Face3(E,T,S,O,P,b);t.faces.push(B),s!==void 0&&t.faceVertexUvs[0].push([c[E].clone(),c[T].clone(),c[S].clone()]),l!==void 0&&t.faceVertexUvs[1].push([d[E].clone(),d[T].clone(),d[S].clone()])}var _=e.groups;if(_.length>0)for(var h=0;h<_.length;h++)for(var M=_[h],y=M.start,v=M.count,m=y,g=y+v;m<g;m+=3)r!==void 0?p(r[m],r[m+1],r[m+2],M.materialIndex):p(m,m+1,m+2,M.materialIndex);else if(r!==void 0)for(var h=0;h<r.length;h+=3)p(r[h],r[h+1],r[h+2]);else for(var h=0;h<a.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,n=new Matrix4;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new Vector3,t=new Vector3,r=0,n=this.faces.length;r<n;r++){var a=this.faces[r],o=this.vertices[a.a],u=this.vertices[a.b],s=this.vertices[a.c];e.subVectors(s,u),t.subVectors(o,u),e.cross(t),e.normalize(),a.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,r,n,a,o,u;for(u=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)u[t]=new Vector3;if(e){var s,l,f,c=new Vector3,d=new Vector3;for(n=0,a=this.faces.length;n<a;n++)o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],f=this.vertices[o.c],c.subVectors(f,l),d.subVectors(s,l),c.cross(d),u[o.a].add(c),u[o.b].add(c),u[o.c].add(c)}else for(this.computeFaceNormals(),n=0,a=this.faces.length;n<a;n++)o=this.faces[n],u[o.a].add(o.normal),u[o.b].add(o.normal),u[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)u[t].normalize();for(n=0,a=this.faces.length;n<a;n++){o=this.faces[n];var h=o.vertexNormals;h.length===3?(h[0].copy(u[o.a]),h[1].copy(u[o.b]),h[2].copy(u[o.c])):(h[0]=u[o.a].clone(),h[1]=u[o.b].clone(),h[2]=u[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var n=r.vertexNormals;n.length===3?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,a;for(r=0,n=this.faces.length;r<n;r++)for(a=this.faces[r],a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]),e=0,t=a.vertexNormals.length;e<t;e++)a.__originalVertexNormals[e]?a.__originalVertexNormals[e].copy(a.vertexNormals[e]):a.__originalVertexNormals[e]=a.vertexNormals[e].clone();var o=new Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var u=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,f,c;for(r=0,n=this.faces.length;r<n;r++)f=new Vector3,c={a:new Vector3,b:new Vector3,c:new Vector3},u.push(f),s.push(c)}var l=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var f,c;for(r=0,n=this.faces.length;r<n;r++)a=this.faces[r],f=l.faceNormals[r],c=l.vertexNormals[r],f.copy(a.normal),c.a.copy(a.vertexNormals[0]),c.b.copy(a.vertexNormals[1]),c.c.copy(a.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)a=this.faces[r],a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;r<n;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if((e&&e.isGeometry)===!1){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var n,a=this.vertices.length,o=this.vertices,u=e.vertices,s=this.faces,l=e.faces,f=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,h=e.colors;r===void 0&&(r=0),t!==void 0&&(n=new Matrix3().getNormalMatrix(t));for(var m=0,p=u.length;m<p;m++){var _=u[m],M=_.clone();t!==void 0&&M.applyMatrix4(t),o.push(M)}for(var m=0,p=h.length;m<p;m++)d.push(h[m].clone());for(m=0,p=l.length;m<p;m++){var y=l[m],v,g,E,T=y.vertexNormals,S=y.vertexColors;v=new Face3(y.a+a,y.b+a,y.c+a),v.normal.copy(y.normal),n!==void 0&&v.normal.applyMatrix3(n).normalize();for(var b=0,O=T.length;b<O;b++)g=T[b].clone(),n!==void 0&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(y.color);for(var b=0,O=S.length;b<O;b++)E=S[b],v.vertexColors.push(E.clone());v.materialIndex=y.materialIndex+r,s.push(v)}for(m=0,p=c.length;m<p;m++){var P=c[m],B=[];if(P!==void 0){for(var b=0,O=P.length;b<O;b++)B.push(P[b].clone());f.push(B)}}},mergeMesh:function(e){if((e&&e.isMesh)===!1){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],r=[],n,a,o=4,u=Math.pow(10,o),s,l,f,c,d,h;for(s=0,l=this.vertices.length;s<l;s++)n=this.vertices[s],a=Math.round(n.x*u)+"_"+Math.round(n.y*u)+"_"+Math.round(n.z*u),e[a]===void 0?(e[a]=s,t.push(this.vertices[s]),r[s]=t.length-1):r[s]=r[e[a]];var m=[];for(s=0,l=this.faces.length;s<l;s++){f=this.faces[s],f.a=r[f.a],f.b=r[f.b],f.c=r[f.c],c=[f.a,f.b,f.c];for(var p=0;p<3;p++)if(c[p]===c[(p+1)%3]){m.push(s);break}}for(s=m.length-1;s>=0;s--){var _=m[s];for(this.faces.splice(_,1),d=0,h=this.faceVertexUvs.length;d<h;d++)this.faceVertexUvs[d].splice(_,1)}var M=this.vertices.length-t.length;return this.vertices=t,M},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;function n(f,c){return f.materialIndex-c.materialIndex}e.sort(n);var a=this.faceVertexUvs[0],o=this.faceVertexUvs[1],u,s;a&&a.length===t&&(u=[]),o&&o.length===t&&(s=[]);for(var r=0;r<t;r++){var l=e[r]._id;u&&u.push(a[l]),s&&s.push(o[l])}u&&(this.faceVertexUvs[0]=u),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var r in t)t[r]!==void 0&&(e[r]=t[r]);return e}for(var n=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];n.push(o.x,o.y,o.z)}for(var u=[],s=[],l={},f=[],c={},d=[],h={},a=0;a<this.faces.length;a++){var m=this.faces[a],p=!0,_=!1,M=this.faceVertexUvs[0][a]!==void 0,y=m.normal.length()>0,v=m.vertexNormals.length>0,g=m.color.r!==1||m.color.g!==1||m.color.b!==1,E=m.vertexColors.length>0,T=0;if(T=P(T,0,0),T=P(T,1,p),T=P(T,2,_),T=P(T,3,M),T=P(T,4,y),T=P(T,5,v),T=P(T,6,g),T=P(T,7,E),u.push(T),u.push(m.a,m.b,m.c),u.push(m.materialIndex),M){var S=this.faceVertexUvs[0][a];u.push(R(S[0]),R(S[1]),R(S[2]))}if(y&&u.push(B(m.normal)),v){var b=m.vertexNormals;u.push(B(b[0]),B(b[1]),B(b[2]))}if(g&&u.push(V(m.color)),E){var O=m.vertexColors;u.push(V(O[0]),V(O[1]),V(O[2]))}}function P(w,H,D){return D?w|1<<H:w&~(1<<H)}function B(w){var H=w.x.toString()+w.y.toString()+w.z.toString();return l[H]!==void 0||(l[H]=s.length/3,s.push(w.x,w.y,w.z)),l[H]}function V(w){var H=w.r.toString()+w.g.toString()+w.b.toString();return c[H]!==void 0||(c[H]=f.length,f.push(w.getHex())),c[H]}function R(w){var H=w.x.toString()+w.y.toString();return h[H]!==void 0||(h[H]=d.length/2,d.push(w.x,w.y)),h[H]}return e.data={},e.data.vertices=n,e.data.normals=s,f.length>0&&(e.data.colors=f),d.length>0&&(e.data.uvs=[d]),e.data.faces=u,e},clone:function(){return new Geometry().copy(this)},copy:function(e){var t,r,n,a,o,u;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,r=l.length;t<r;t++)this.colors.push(l[t].clone());var f=e.faces;for(t=0,r=f.length;t<r;t++)this.faces.push(f[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var c=e.faceVertexUvs[t];for(this.faceVertexUvs[t]===void 0&&(this.faceVertexUvs[t]=[]),n=0,a=c.length;n<a;n++){var d=c[n],h=[];for(o=0,u=d.length;o<u;o++){var m=d[o];h.push(m.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,r=p.length;t<r;t++){var _={};if(_.name=p[t].name,p[t].vertices!==void 0)for(_.vertices=[],n=0,a=p[t].vertices.length;n<a;n++)_.vertices.push(p[t].vertices[n].clone());if(p[t].normals!==void 0)for(_.normals=[],n=0,a=p[t].normals.length;n<a;n++)_.normals.push(p[t].normals[n].clone());this.morphTargets.push(_)}var M=e.morphNormals;for(t=0,r=M.length;t<r;t++){var y={};if(M[t].vertexNormals!==void 0)for(y.vertexNormals=[],n=0,a=M[t].vertexNormals.length;n<a;n++){var v=M[t].vertexNormals[n],g={};g.a=v.a.clone(),g.b=v.b.clone(),g.c=v.c.clone(),y.vertexNormals.push(g)}if(M[t].faceNormals!==void 0)for(y.faceNormals=[],n=0,a=M[t].faceNormals.length;n<a;n++)y.faceNormals.push(M[t].faceNormals[n].clone());this.morphNormals.push(y)}var E=e.skinWeights;for(t=0,r=E.length;t<r;t++)this.skinWeights.push(E[t].clone());var T=e.skinIndices;for(t=0,r=T.length;t<r;t++)this.skinIndices.push(T[t].clone());var S=e.lineDistances;for(t=0,r=S.length;t<r;t++)this.lineDistances.push(S[t]);var b=e.boundingBox;b!==null&&(this.boundingBox=b.clone());var O=e.boundingSphere;return O!==null&&(this.boundingSphere=O.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function BufferGeometry(){Object.defineProperty(this,"id",{value:GeometryIdCount()}),this.uuid=_Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}BufferGeometry.MaxIndex=65535;Object.assign(BufferGeometry.prototype,EventDispatcher.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(arrayMax(e)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e},addAttribute:function(e,t){if((t&&t.isBufferAttribute)===!1&&(t&&t.isInterleavedBufferAttribute)===!1){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new BufferAttribute(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);return}return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r!==void 0?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;if(r!==void 0){var n=new Matrix3().getNormalMatrix(e);n.applyToBufferAttribute(r),r.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Matrix4;return function(r){return e.makeRotationX(r),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function(r){return e.makeRotationY(r),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function(r){return e.makeRotationZ(r),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function(r,n,a){return e.makeTranslation(r,n,a),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function(r,n,a){return e.makeScale(r,n,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function(r){e.lookAt(r),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Float32BufferAttribute(t.vertices.length*3,3),n=new Float32BufferAttribute(t.colors.length*3,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var a=new Float32BufferAttribute(t.lineDistances.length,1);this.addAttribute("lineDistance",a.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(r=void 0,t.elementsNeedUpdate=!1),r===void 0)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}var n;return t.verticesNeedUpdate===!0&&(n=this.attributes.position,n!==void 0&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(n=this.attributes.normal,n!==void 0&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(n=this.attributes.color,n!==void 0&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,n!==void 0&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,n!==void 0&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new DirectGeometry().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);if(this.addAttribute("position",new BufferAttribute(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(e.normals.length*3);this.addAttribute("normal",new BufferAttribute(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(e.colors.length*3);this.addAttribute("color",new BufferAttribute(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var a=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new BufferAttribute(a,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new BufferAttribute(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var u=arrayMax(e.indices)>65535?Uint32Array:Uint16Array,s=new u(e.indices.length*3);this.setIndex(new BufferAttribute(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var f=[],c=e.morphTargets[l],d=0,h=c.length;d<h;d++){var m=c[d],p=new Float32BufferAttribute(m.length*3,3);f.push(p.copyVector3sArray(m))}this.morphAttributes[l]=f}if(e.skinIndices.length>0){var _=new Float32BufferAttribute(e.skinIndices.length*4,4);this.addAttribute("skinIndex",_.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var M=new Float32BufferAttribute(e.skinWeights.length*4,4);this.addAttribute("skinWeight",M.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Box3);var e=this.attributes.position;e!==void 0?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Box3,t=new Vector3;return function(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);var n=this.attributes.position;if(n){var a=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(a);for(var o=0,u=0,s=n.count;u<s;u++)t.x=n.getX(u),t.y=n.getY(u),t.z=n.getZ(u),o=Math.max(o,a.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new BufferAttribute(new Float32Array(n.length),3));else for(var a=t.normal.array,o=0,u=a.length;o<u;o++)a[o]=0;var s=t.normal.array,l,f,c,d=new Vector3,h=new Vector3,m=new Vector3,p=new Vector3,_=new Vector3;if(e){var M=e.array;r.length===0&&this.addGroup(0,M.length);for(var y=0,v=r.length;y<v;++y)for(var g=r[y],E=g.start,T=g.count,o=E,u=E+T;o<u;o+=3)l=M[o+0]*3,f=M[o+1]*3,c=M[o+2]*3,d.fromArray(n,l),h.fromArray(n,f),m.fromArray(n,c),p.subVectors(m,h),_.subVectors(d,h),p.cross(_),s[l]+=p.x,s[l+1]+=p.y,s[l+2]+=p.z,s[f]+=p.x,s[f+1]+=p.y,s[f+2]+=p.z,s[c]+=p.x,s[c+1]+=p.y,s[c+2]+=p.z}else for(var o=0,u=n.length;o<u;o+=9)d.fromArray(n,o),h.fromArray(n,o+3),m.fromArray(n,o+6),p.subVectors(m,h),_.subVectors(d,h),p.cross(_),s[o]=p.x,s[o+1]=p.y,s[o+2]=p.z,s[o+3]=p.x,s[o+4]=p.y,s[o+5]=p.z,s[o+6]=p.x,s[o+7]=p.y,s[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if((e&&e.isBufferGeometry)===!1){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0);var r=this.attributes;for(var n in r)if(e.attributes[n]!==void 0)for(var a=r[n],o=a.array,u=e.attributes[n],s=u.array,l=u.itemSize,f=0,c=l*t;f<s.length;f++,c++)o[c]=s[f];return this},normalizeNormals:function(){for(var e=this.attributes.normal,t,r,n,a,o=0,u=e.count;o<u;o++)t=e.getX(o),r=e.getY(o),n=e.getZ(o),a=1/Math.sqrt(t*t+r*r+n*n),e.setXYZ(o,t*a,r*a,n*a)},toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new BufferGeometry,t=this.index.array,r=this.attributes;for(var n in r){for(var a=r[n],o=a.array,u=a.itemSize,s=new o.constructor(t.length*u),l=0,f=0,c=0,d=t.length;c<d;c++){l=t[c]*u;for(var h=0;h<u;h++)s[f++]=o[l++]}e.addAttribute(n,new BufferAttribute(s,u))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var r in t)t[r]!==void 0&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(n!==null){var a=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:a}}var o=this.attributes;for(var r in o){var u=o[r],a=Array.prototype.slice.call(u.array);e.data.attributes[r]={itemSize:u.itemSize,type:u.array.constructor.name,array:a,normalized:u.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return new BufferGeometry().copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.index;a!==null&&this.setIndex(a.clone());var o=e.attributes;for(t in o){var u=o[t];this.addAttribute(t,u.clone())}var s=e.morphAttributes;for(t in s){var l=[],f=s[t];for(r=0,n=f.length;r<n;r++)l.push(f[r].clone());this.morphAttributes[t]=l}var c=e.groups;for(r=0,n=c.length;r<n;r++){var d=c[r];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());var m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Mesh(e,t){Object3D.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new BufferGeometry,this.material=t!==void 0?t:new MeshBasicMaterial({color:Math.random()*16777215}),this.drawMode=TrianglesDrawMode,this.updateMorphTargets()}Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(e!==void 0&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;t<r;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new Matrix4,t=new Ray,r=new Sphere,n=new Vector3,a=new Vector3,o=new Vector3,u=new Vector3,s=new Vector3,l=new Vector3,f=new Vector2,c=new Vector2,d=new Vector2,h=new Vector3,m=new Vector3,p=new Vector3;function _(v,g,E,T,S,b,O){return Triangle.barycoordFromPoint(v,g,E,T,h),S.multiplyScalar(h.x),b.multiplyScalar(h.y),O.multiplyScalar(h.z),S.add(b).add(O),S.clone()}function M(v,g,E,T,S,b,O){var P,B=v.material;if(B.side===BackSide?P=E.intersectTriangle(b,S,T,!0,O):P=E.intersectTriangle(T,S,b,B.side!==DoubleSide,O),P===null)return null;p.copy(O),p.applyMatrix4(v.matrixWorld);var V=g.ray.origin.distanceTo(p);return V<g.near||V>g.far?null:{distance:V,point:p.clone(),object:v}}function y(v,g,E,T,S,b,O,P){n.fromBufferAttribute(T,b),a.fromBufferAttribute(T,O),o.fromBufferAttribute(T,P);var B=M(v,g,E,n,a,o,m);return B&&(S&&(f.fromBufferAttribute(S,b),c.fromBufferAttribute(S,O),d.fromBufferAttribute(S,P),B.uv=_(m,n,a,o,f,c,d)),B.face=new Face3(b,O,P,Triangle.normal(n,a,o)),B.faceIndex=b),B}return function(g,E){var T=this.geometry,S=this.material,b=this.matrixWorld;if(S!==void 0&&(T.boundingSphere===null&&T.computeBoundingSphere(),r.copy(T.boundingSphere),r.applyMatrix4(b),g.ray.intersectsSphere(r)!==!1&&(e.getInverse(b),t.copy(g.ray).applyMatrix4(e),!(T.boundingBox!==null&&t.intersectsBox(T.boundingBox)===!1)))){var O;if(T.isBufferGeometry){var P,B,V,R=T.index,w=T.attributes.position,H=T.attributes.uv,D,K;if(R!==null)for(D=0,K=R.count;D<K;D+=3)P=R.getX(D),B=R.getX(D+1),V=R.getX(D+2),O=y(this,g,t,w,H,P,B,V),O&&(O.faceIndex=Math.floor(D/3),E.push(O));else for(D=0,K=w.count;D<K;D+=3)P=D,B=D+1,V=D+2,O=y(this,g,t,w,H,P,B,V),O&&(O.index=P,E.push(O))}else if(T.isGeometry){var W,k,J,X=Array.isArray(S),I=T.vertices,L=T.faces,U,G=T.faceVertexUvs[0];G.length>0&&(U=G);for(var j=0,oe=L.length;j<oe;j++){var z=L[j],x=X?S[z.materialIndex]:S;if(x!==void 0){if(W=I[z.a],k=I[z.b],J=I[z.c],x.morphTargets===!0){var fe=T.morphTargets,$=this.morphTargetInfluences;n.set(0,0,0),a.set(0,0,0),o.set(0,0,0);for(var ue=0,Z=fe.length;ue<Z;ue++){var ce=$[ue];if(ce!==0){var pe=fe[ue].vertices;n.addScaledVector(u.subVectors(pe[z.a],W),ce),a.addScaledVector(s.subVectors(pe[z.b],k),ce),o.addScaledVector(l.subVectors(pe[z.c],J),ce)}}n.add(W),a.add(k),o.add(J),W=n,k=a,J=o}if(O=M(this,g,t,W,k,J,m),O){if(U&&U[j]){var Oe=U[j];f.copy(Oe[0]),c.copy(Oe[1]),d.copy(Oe[2]),O.uv=_(m,W,k,J,f,c,d)}O.face=z,O.faceIndex=j,E.push(O)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function BoxGeometry(e,t,r,n,a,o){Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new BoxBufferGeometry(e,t,r,n,a,o)),this.mergeVertices()}BoxGeometry.prototype=Object.create(Geometry.prototype);BoxGeometry.prototype.constructor=BoxGeometry;function BoxBufferGeometry(e,t,r,n,a,o){BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:a,depthSegments:o};var u=this;n=Math.floor(n)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var s=[],l=[],f=[],c=[],d=0,h=0;m("z","y","x",-1,-1,r,t,e,o,a,0),m("z","y","x",1,-1,r,t,-e,o,a,1),m("x","z","y",1,1,e,r,t,n,o,2),m("x","z","y",1,-1,e,r,-t,n,o,3),m("x","y","z",1,-1,e,t,r,n,a,4),m("x","y","z",-1,-1,e,t,-r,n,a,5),this.setIndex(s),this.addAttribute("position",new Float32BufferAttribute(l,3)),this.addAttribute("normal",new Float32BufferAttribute(f,3)),this.addAttribute("uv",new Float32BufferAttribute(c,2));function m(p,_,M,y,v,g,E,T,S,b,O){var P=g/S,B=E/b,V=g/2,R=E/2,w=T/2,H=S+1,D=b+1,K=0,W=0,k,J,X=new Vector3;for(J=0;J<D;J++){var I=J*B-R;for(k=0;k<H;k++){var L=k*P-V;X[p]=L*y,X[_]=I*v,X[M]=w,l.push(X.x,X.y,X.z),X[p]=0,X[_]=0,X[M]=T>0?1:-1,f.push(X.x,X.y,X.z),c.push(k/S),c.push(1-J/b),K+=1}}for(J=0;J<b;J++)for(k=0;k<S;k++){var U=d+k+H*J,G=d+k+H*(J+1),j=d+(k+1)+H*(J+1),oe=d+(k+1)+H*J;s.push(U,G,oe),s.push(G,j,oe),W+=6}u.addGroup(h,W,O),h+=W,d+=K}}BoxBufferGeometry.prototype=Object.create(BufferGeometry.prototype);BoxBufferGeometry.prototype.constructor=BoxBufferGeometry;function PlaneGeometry(e,t,r,n){Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new PlaneBufferGeometry(e,t,r,n)),this.mergeVertices()}PlaneGeometry.prototype=Object.create(Geometry.prototype);PlaneGeometry.prototype.constructor=PlaneGeometry;function PlaneBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var a=e/2,o=t/2,u=Math.floor(r)||1,s=Math.floor(n)||1,l=u+1,f=s+1,c=e/u,d=t/s,h,m,p=[],_=[],M=[],y=[];for(m=0;m<f;m++){var v=m*d-o;for(h=0;h<l;h++){var g=h*c-a;_.push(g,-v,0),M.push(0,0,1),y.push(h/u),y.push(1-m/s)}}for(m=0;m<s;m++)for(h=0;h<u;h++){var E=h+l*m,T=h+l*(m+1),S=h+1+l*(m+1),b=h+1+l*m;p.push(E,T,b),p.push(T,S,b)}this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(_,3)),this.addAttribute("normal",new Float32BufferAttribute(M,3)),this.addAttribute("uv",new Float32BufferAttribute(y,2))}PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry;function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4}Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Quaternion;return function(r){var n=r||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),clone:function(){return new this.constructor().copy(this)}});function PerspectiveCamera(e,t,r,n){Camera.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=r!==void 0?r:.1,this.far=n!==void 0?n:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e){return Camera.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=_Math.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(_Math.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return _Math.RAD2DEG*2*Math.atan(Math.tan(_Math.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,a,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:a,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(_Math.DEG2RAD*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,a=-.5*n,o=this.view;if(o!==null){var u=o.fullWidth,s=o.fullHeight;a+=o.offsetX*n/u,t-=o.offsetY*r/s,n*=o.width/u,r*=o.height/s}var l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+n,t,t-r,e,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function OrthographicCamera(e,t,r,n,a,o){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=a!==void 0?a:.1,this.far=o!==void 0?o:2e3,this.updateProjectionMatrix()}OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(e){return Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,a,o){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:a,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,a=r-e,o=r+e,u=n+t,s=n-t;if(this.view!==null){var l=this.zoom/(this.view.width/this.view.fullWidth),f=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a+=c*(this.view.offsetX/l),o=a+c*(this.view.width/l),u-=d*(this.view.offsetY/f),s=u-d*(this.view.height/f)}this.projectionMatrix.makeOrthographic(a,o,u,s,this.near,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function WebGLAttributes(e){var t={};function r(s,l){var f=s.array,c=s.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,d=e.createBuffer();e.bindBuffer(l,d),e.bufferData(l,f,c),s.onUploadCallback();var h=e.FLOAT;return f instanceof Float32Array?h=e.FLOAT:f instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):f instanceof Uint16Array?h=e.UNSIGNED_SHORT:f instanceof Int16Array?h=e.SHORT:f instanceof Uint32Array?h=e.UNSIGNED_INT:f instanceof Int32Array?h=e.INT:f instanceof Int8Array?h=e.BYTE:f instanceof Uint8Array&&(h=e.UNSIGNED_BYTE),{buffer:d,type:h,bytesPerElement:f.BYTES_PER_ELEMENT,version:s.version}}function n(s,l,f){var c=l.array,d=l.updateRange;e.bindBuffer(f,s),l.dynamic===!1?e.bufferData(f,c,e.STATIC_DRAW):d.count===-1?e.bufferSubData(f,0,c):d.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(f,d.offset*c.BYTES_PER_ELEMENT,c.subarray(d.offset,d.offset+d.count)),d.count=0)}function a(s){return s.isInterleavedBufferAttribute&&(s=s.data),t[s.uuid]}function o(s){var l=t[s.uuid];l&&(e.deleteBuffer(l.buffer),delete t[s.uuid])}function u(s,l){s.isInterleavedBufferAttribute&&(s=s.data);var f=t[s.uuid];f===void 0?t[s.uuid]=r(s,l):f.version<s.version&&(n(f.buffer,s,l),f.version=s.version)}return{get:a,remove:o,update:u}}function painterSortStable(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function reversePainterSortStable(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WebGLRenderList(){var e=[],t=-1,r=[],n=-1;function a(){t=-1,n=-1}function o(l,f,c,d,h){var m,p;c.transparent?(m=r,p=++n):(m=e,p=++t);var _=m[p];_?(_.id=l.id,_.object=l,_.geometry=f,_.material=c,_.program=c.program,_.renderOrder=l.renderOrder,_.z=d,_.group=h):(_={id:l.id,object:l,geometry:f,material:c,program:c.program,renderOrder:l.renderOrder,z:d,group:h},m.push(_))}function u(){e.length=t+1,r.length=n+1}function s(){e.sort(painterSortStable),r.sort(reversePainterSortStable)}return{opaque:e,transparent:r,init:a,push:o,finish:u,sort:s}}function WebGLRenderLists(){var e={};function t(n,a){var o=n.id+","+a.id,u=e[o];return u===void 0&&(u=new WebGLRenderList,e[o]=u),u}function r(){e={}}return{get:t,dispose:r}}function WebGLIndexedBufferRenderer(e,t,r){var n;function a(c){n=c}var o,u;function s(c){c.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(o=e.UNSIGNED_INT,u=4):c.array instanceof Uint16Array?(o=e.UNSIGNED_SHORT,u=2):(o=e.UNSIGNED_BYTE,u=1)}function l(c,d){e.drawElements(n,d,o,c*u),r.calls++,r.vertices+=d,n===e.TRIANGLES&&(r.faces+=d/3)}function f(c,d,h){var m=t.get("ANGLE_instanced_arrays");if(m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m.drawElementsInstancedANGLE(n,h,o,d*u,c.maxInstancedCount),r.calls++,r.vertices+=h*c.maxInstancedCount,n===e.TRIANGLES&&(r.faces+=c.maxInstancedCount*h/3)}this.setMode=a,this.setIndex=s,this.render=l,this.renderInstances=f}function WebGLBufferRenderer(e,t,r){var n;function a(s){n=s}function o(s,l){e.drawArrays(n,s,l),r.calls++,r.vertices+=l,n===e.TRIANGLES&&(r.faces+=l/3)}function u(s,l,f){var c=t.get("ANGLE_instanced_arrays");if(c===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var d=s.attributes.position;d.isInterleavedBufferAttribute?(f=d.data.count,c.drawArraysInstancedANGLE(n,0,f,s.maxInstancedCount)):c.drawArraysInstancedANGLE(n,l,f,s.maxInstancedCount),r.calls++,r.vertices+=f*s.maxInstancedCount,n===e.TRIANGLES&&(r.faces+=s.maxInstancedCount*f/3)}this.setMode=a,this.render=o,this.renderInstances=u}function WebGLGeometries(e,t,r){var n={},a={};function o(f){var c=f.target,d=n[c.id];d.index!==null&&t.remove(d.index);for(var h in d.attributes)t.remove(d.attributes[h]);c.removeEventListener("dispose",o),delete n[c.id];var m=a[c.id];m&&(t.remove(m),delete a[c.id]),m=a[d.id],m&&(t.remove(m),delete a[d.id]),r.geometries--}function u(f,c){var d=n[c.id];return d||(c.addEventListener("dispose",o),c.isBufferGeometry?d=c:c.isGeometry&&(c._bufferGeometry===void 0&&(c._bufferGeometry=new BufferGeometry().setFromObject(f)),d=c._bufferGeometry),n[c.id]=d,r.geometries++,d)}function s(f){var c=f.index,d=f.attributes;c!==null&&t.update(c,e.ELEMENT_ARRAY_BUFFER);for(var h in d)t.update(d[h],e.ARRAY_BUFFER);var m=f.morphAttributes;for(var h in m)for(var p=m[h],_=0,M=p.length;_<M;_++)t.update(p[_],e.ARRAY_BUFFER)}function l(f){var c=a[f.id];if(c)return c;var d=[],h=f.index,m=f.attributes;if(h!==null)for(var p=h.array,_=0,M=p.length;_<M;_+=3){var y=p[_+0],v=p[_+1],g=p[_+2];d.push(y,v,v,g,g,y)}else for(var p=m.position.array,_=0,M=p.length/3-1;_<M;_+=3){var y=_+0,v=_+1,g=_+2;d.push(y,v,v,g,g,y)}return c=new(arrayMax(d)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(d,1),t.update(c,e.ELEMENT_ARRAY_BUFFER),a[f.id]=c,c}return{get:u,update:s,getWireframeAttribute:l}}function WebGLLights(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Vector3,color:new Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":r={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":r={position:new Vector3,color:new Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"HemisphereLight":r={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":r={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return e[t.id]=r,r}}}function WebGLObjects(e,t,r){var n={};function a(u){var s=r.frame,l=u.geometry,f=t.get(u,l);return n[f.id]!==s&&(l.isGeometry&&f.updateFromObject(u),t.update(f),n[f.id]=s),f}function o(){n={}}return{update:a,clear:o}}function addLineNumbers(e){for(var t=e.split(`
`),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join(`
`)}function WebGLShader(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),e.getShaderInfoLog(n)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),addLineNumbers(r)),n}var programIdCount=0;function getEncodingComponents(e){switch(e){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];case RGBEEncoding:return["RGBE","( value )"];case RGBM7Encoding:return["RGBM","( value, 7.0 )"];case RGBM16Encoding:return["RGBM","( value, 16.0 )"];case RGBDEncoding:return["RGBD","( value, 256.0 )"];case GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function getTexelDecodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function getTexelEncodingFunction(e,t){var r=getEncodingComponents(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function getToneMappingFunction(e,t){var r;switch(t){case LinearToneMapping:r="Linear";break;case ReinhardToneMapping:r="Reinhard";break;case Uncharted2ToneMapping:r="Uncharted2";break;case CineonToneMapping:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function generateExtensions(e,t,r){e=e||{};var n=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(filterEmptyLine).join(`
`)}function generateDefines(e){var t=[];for(var r in e){var n=e[r];n!==!1&&t.push("#define "+r+" "+n)}return t.join(`
`)}function fetchAttributeLocations(e,t,r){for(var n={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<a;o++){var u=e.getActiveAttrib(t,o),s=u.name;n[s]=e.getAttribLocation(t,s)}return n}function filterEmptyLine(e){return e!==""}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function parseIncludes(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function r(n,a){var o=ShaderChunk[a];if(o===void 0)throw new Error("Can not resolve #include <"+a+">");return parseIncludes(o)}return e.replace(t,r)}function unrollLoops(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function r(n,a,o,u){for(var s="",l=parseInt(a);l<parseInt(o);l++)s+=u.replace(/\[ i \]/g,"[ "+l+" ]");return s}return e.replace(t,r)}function WebGLProgram(e,t,r,n){var a=e.context,o=r.extensions,u=r.defines,s=r.__webglShader.vertexShader,l=r.__webglShader.fragmentShader,f="SHADOWMAP_TYPE_BASIC";n.shadowMapType===PCFShadowMap?f="SHADOWMAP_TYPE_PCF":n.shadowMapType===PCFSoftShadowMap&&(f="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",h="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case CubeReflectionMapping:case CubeRefractionMapping:c="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:case CubeUVRefractionMapping:c="ENVMAP_TYPE_CUBE_UV";break;case EquirectangularReflectionMapping:case EquirectangularRefractionMapping:c="ENVMAP_TYPE_EQUIREC";break;case SphericalReflectionMapping:c="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case CubeRefractionMapping:case EquirectangularRefractionMapping:d="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case MultiplyOperation:h="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:h="ENVMAP_BLENDING_MIX";break;case AddOperation:h="ENVMAP_BLENDING_ADD";break}}var m=e.gammaFactor>0?e.gammaFactor:1,p=generateExtensions(o,n,e.extensions),_=generateDefines(u),M=a.createProgram(),y,v;r.isRawShaderMaterial?(y=[_,`
`].filter(filterEmptyLine).join(`
`),v=[p,_,`
`].filter(filterEmptyLine).join(`
`)):(y=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,_,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),v=[p,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,_,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",n.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",n.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?ShaderChunk.encodings_pars_fragment:"",n.mapEncoding?getTexelDecodingFunction("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?getTexelDecodingFunction("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?getTexelDecodingFunction("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?getTexelEncodingFunction("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),s=parseIncludes(s),s=replaceLightNums(s,n),l=parseIncludes(l),l=replaceLightNums(l,n),r.isShaderMaterial||(s=unrollLoops(s),l=unrollLoops(l));var g=y+s,E=v+l,T=WebGLShader(a,a.VERTEX_SHADER,g),S=WebGLShader(a,a.FRAGMENT_SHADER,E);a.attachShader(M,T),a.attachShader(M,S),r.index0AttributeName!==void 0?a.bindAttribLocation(M,0,r.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(M,0,"position"),a.linkProgram(M);var b=a.getProgramInfoLog(M),O=a.getShaderInfoLog(T),P=a.getShaderInfoLog(S),B=!0,V=!0;a.getProgramParameter(M,a.LINK_STATUS)===!1?(B=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(M,a.VALIDATE_STATUS),"gl.getProgramInfoLog",b,O,P)):b!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",b):(O===""||P==="")&&(V=!1),V&&(this.diagnostics={runnable:B,material:r,programLog:b,vertexShader:{log:O,prefix:y},fragmentShader:{log:P,prefix:v}}),a.deleteShader(T),a.deleteShader(S);var R;this.getUniforms=function(){return R===void 0&&(R=new WebGLUniforms(a,M,e)),R};var w;return this.getAttributes=function(){return w===void 0&&(w=fetchAttributeLocations(a,M)),w},this.destroy=function(){a.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=programIdCount++,this.code=t,this.usedTimes=1,this.program=M,this.vertexShader=T,this.fragmentShader=S,this}function WebGLPrograms(e,t){var r=[],n={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(s){var l=s.skeleton,f=l.bones;if(t.floatVertexTextures)return 1024;var c=t.maxVertexUniforms,d=Math.floor((c-20)/4),h=Math.min(d,f.length);return h<f.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+f.length+" bones. This GPU supports "+h+"."),0):h}function u(s,l){var f;return s?s.isTexture?f=s.encoding:s.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),f=s.texture.encoding):f=LinearEncoding,f===LinearEncoding&&l&&(f=GammaEncoding),f}this.getParameters=function(s,l,f,c,d,h){var m=n[s.type],p=h.isSkinnedMesh?o(h):0,_=e.getPrecision();s.precision!==null&&(_=t.getMaxPrecision(s.precision),_!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",_,"instead."));var M=e.getRenderTarget(),y={shaderID:m,precision:_,supportsVertexTextures:t.vertexTextures,outputEncoding:u(M?M.texture:null,e.gammaOutput),map:!!s.map,mapEncoding:u(s.map,e.gammaInput),envMap:!!s.envMap,envMapMode:s.envMap&&s.envMap.mapping,envMapEncoding:u(s.envMap,e.gammaInput),envMapCubeUV:!!s.envMap&&(s.envMap.mapping===CubeUVReflectionMapping||s.envMap.mapping===CubeUVRefractionMapping),lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,emissiveMapEncoding:u(s.emissiveMap,e.gammaInput),bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,alphaMap:!!s.alphaMap,gradientMap:!!s.gradientMap,combine:s.combine,vertexColors:s.vertexColors,fog:!!f,useFog:s.fog,fogExp:f&&f.isFogExp2,flatShading:s.shading===FlatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:s.skinning&&p>0,maxBones:p,useVertexTexture:t.floatVertexTextures,morphTargets:s.morphTargets,morphNormals:s.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numClippingPlanes:c,numClipIntersection:d,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&l.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,alphaTest:s.alphaTest,doubleSided:s.side===DoubleSide,flipSided:s.side===BackSide,depthPacking:s.depthPacking!==void 0?s.depthPacking:!1};return y},this.getProgramCode=function(s,l){var f=[];if(l.shaderID?f.push(l.shaderID):(f.push(s.fragmentShader),f.push(s.vertexShader)),s.defines!==void 0)for(var c in s.defines)f.push(c),f.push(s.defines[c]);for(var d=0;d<a.length;d++)f.push(l[a[d]]);return f.join()},this.acquireProgram=function(s,l,f){for(var c,d=0,h=r.length;d<h;d++){var m=r[d];if(m.code===f){c=m,++c.usedTimes;break}}return c===void 0&&(c=new WebGLProgram(e,f,s,l),r.push(c)),c},this.releaseProgram=function(s){if(--s.usedTimes==0){var l=r.indexOf(s);r[l]=r[r.length-1],r.pop(),s.destroy()}},this.programs=r}function WebGLTextures(e,t,r,n,a,o,u){var s=typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext;function l(R,w){if(R.width>w||R.height>w){var H=w/Math.max(R.width,R.height),D=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");D.width=Math.floor(R.width*H),D.height=Math.floor(R.height*H);var K=D.getContext("2d");return K.drawImage(R,0,0,R.width,R.height,0,0,D.width,D.height),console.warn("THREE.WebGLRenderer: image is too big ("+R.width+"x"+R.height+"). Resized to "+D.width+"x"+D.height,R),D}return R}function f(R){return _Math.isPowerOfTwo(R.width)&&_Math.isPowerOfTwo(R.height)}function c(R){if(R instanceof HTMLImageElement||R instanceof HTMLCanvasElement){var w=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");w.width=_Math.nearestPowerOfTwo(R.width),w.height=_Math.nearestPowerOfTwo(R.height);var H=w.getContext("2d");return H.drawImage(R,0,0,w.width,w.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+R.width+"x"+R.height+"). Resized to "+w.width+"x"+w.height,R),w}return R}function d(R){return R.wrapS!==ClampToEdgeWrapping||R.wrapT!==ClampToEdgeWrapping||R.minFilter!==NearestFilter&&R.minFilter!==LinearFilter}function h(R){return R===NearestFilter||R===NearestMipMapNearestFilter||R===NearestMipMapLinearFilter?e.NEAREST:e.LINEAR}function m(R){var w=R.target;w.removeEventListener("dispose",m),_(w),u.textures--}function p(R){var w=R.target;w.removeEventListener("dispose",p),M(w),u.textures--}function _(R){var w=n.get(R);if(R.image&&w.__image__webglTextureCube)e.deleteTexture(w.__image__webglTextureCube);else{if(w.__webglInit===void 0)return;e.deleteTexture(w.__webglTexture)}n.remove(R)}function M(R){var w=n.get(R),H=n.get(R.texture);if(!!R){if(H.__webglTexture!==void 0&&e.deleteTexture(H.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLRenderTargetCube)for(var D=0;D<6;D++)e.deleteFramebuffer(w.__webglFramebuffer[D]),w.__webglDepthbuffer&&e.deleteRenderbuffer(w.__webglDepthbuffer[D]);else e.deleteFramebuffer(w.__webglFramebuffer),w.__webglDepthbuffer&&e.deleteRenderbuffer(w.__webglDepthbuffer);n.remove(R.texture),n.remove(R)}}function y(R,w){var H=n.get(R);if(R.version>0&&H.__version!==R.version){var D=R.image;if(D===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",R);else if(D.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",R);else{T(H,R,w);return}}r.activeTexture(e.TEXTURE0+w),r.bindTexture(e.TEXTURE_2D,H.__webglTexture)}function v(R,w){var H=n.get(R);if(R.image.length===6)if(R.version>0&&H.__version!==R.version){H.__image__webglTextureCube||(R.addEventListener("dispose",m),H.__image__webglTextureCube=e.createTexture(),u.textures++),r.activeTexture(e.TEXTURE0+w),r.bindTexture(e.TEXTURE_CUBE_MAP,H.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,R.flipY);for(var D=R&&R.isCompressedTexture,K=R.image[0]&&R.image[0].isDataTexture,W=[],k=0;k<6;k++)!D&&!K?W[k]=l(R.image[k],a.maxCubemapSize):W[k]=K?R.image[k].image:R.image[k];var J=W[0],X=f(J),I=o(R.format),L=o(R.type);E(e.TEXTURE_CUBE_MAP,R,X);for(var k=0;k<6;k++)if(!D)K?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,I,W[k].width,W[k].height,0,I,L,W[k].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,I,I,L,W[k]);else for(var U,G=W[k].mipmaps,j=0,oe=G.length;j<oe;j++)U=G[j],R.format!==RGBAFormat&&R.format!==RGBFormat?r.getCompressedTextureFormats().indexOf(I)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+k,j,I,U.width,U.height,0,U.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+k,j,I,U.width,U.height,0,I,L,U.data);R.generateMipmaps&&X&&e.generateMipmap(e.TEXTURE_CUBE_MAP),H.__version=R.version,R.onUpdate&&R.onUpdate(R)}else r.activeTexture(e.TEXTURE0+w),r.bindTexture(e.TEXTURE_CUBE_MAP,H.__image__webglTextureCube)}function g(R,w){r.activeTexture(e.TEXTURE0+w),r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(R).__webglTexture)}function E(R,w,H){var D;if(H?(e.texParameteri(R,e.TEXTURE_WRAP_S,o(w.wrapS)),e.texParameteri(R,e.TEXTURE_WRAP_T,o(w.wrapT)),e.texParameteri(R,e.TEXTURE_MAG_FILTER,o(w.magFilter)),e.texParameteri(R,e.TEXTURE_MIN_FILTER,o(w.minFilter))):(e.texParameteri(R,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(R,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(w.wrapS!==ClampToEdgeWrapping||w.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",w),e.texParameteri(R,e.TEXTURE_MAG_FILTER,h(w.magFilter)),e.texParameteri(R,e.TEXTURE_MIN_FILTER,h(w.minFilter)),w.minFilter!==NearestFilter&&w.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",w)),D=t.get("EXT_texture_filter_anisotropic"),D){if(w.type===FloatType&&t.get("OES_texture_float_linear")===null||w.type===HalfFloatType&&t.get("OES_texture_half_float_linear")===null)return;(w.anisotropy>1||n.get(w).__currentAnisotropy)&&(e.texParameterf(R,D.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(w.anisotropy,a.getMaxAnisotropy())),n.get(w).__currentAnisotropy=w.anisotropy)}}function T(R,w,H){R.__webglInit===void 0&&(R.__webglInit=!0,w.addEventListener("dispose",m),R.__webglTexture=e.createTexture(),u.textures++),r.activeTexture(e.TEXTURE0+H),r.bindTexture(e.TEXTURE_2D,R.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,w.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,w.unpackAlignment);var D=l(w.image,a.maxTextureSize);d(w)&&f(D)===!1&&(D=c(D));var K=f(D),W=o(w.format),k=o(w.type);E(e.TEXTURE_2D,w,K);var J,X=w.mipmaps;if(w.isDepthTexture){var I=e.DEPTH_COMPONENT;if(w.type===FloatType){if(!s)throw new Error("Float Depth Texture only supported in WebGL2.0");I=e.DEPTH_COMPONENT32F}else s&&(I=e.DEPTH_COMPONENT16);w.format===DepthFormat&&I===e.DEPTH_COMPONENT&&w.type!==UnsignedShortType&&w.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),w.type=UnsignedShortType,k=o(w.type)),w.format===DepthStencilFormat&&(I=e.DEPTH_STENCIL,w.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),w.type=UnsignedInt248Type,k=o(w.type))),r.texImage2D(e.TEXTURE_2D,0,I,D.width,D.height,0,W,k,null)}else if(w.isDataTexture)if(X.length>0&&K){for(var L=0,U=X.length;L<U;L++)J=X[L],r.texImage2D(e.TEXTURE_2D,L,W,J.width,J.height,0,W,k,J.data);w.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,W,D.width,D.height,0,W,k,D.data);else if(w.isCompressedTexture)for(var L=0,U=X.length;L<U;L++)J=X[L],w.format!==RGBAFormat&&w.format!==RGBFormat?r.getCompressedTextureFormats().indexOf(W)>-1?r.compressedTexImage2D(e.TEXTURE_2D,L,W,J.width,J.height,0,J.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,L,W,J.width,J.height,0,W,k,J.data);else if(X.length>0&&K){for(var L=0,U=X.length;L<U;L++)J=X[L],r.texImage2D(e.TEXTURE_2D,L,W,W,k,J);w.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,W,W,k,D);w.generateMipmaps&&K&&e.generateMipmap(e.TEXTURE_2D),R.__version=w.version,w.onUpdate&&w.onUpdate(w)}function S(R,w,H,D){var K=o(w.texture.format),W=o(w.texture.type);r.texImage2D(D,0,K,w.width,w.height,0,K,W,null),e.bindFramebuffer(e.FRAMEBUFFER,R),e.framebufferTexture2D(e.FRAMEBUFFER,H,D,n.get(w.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function b(R,w){e.bindRenderbuffer(e.RENDERBUFFER,R),w.depthBuffer&&!w.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,w.width,w.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,R)):w.depthBuffer&&w.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,w.width,w.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,R)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,w.width,w.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(R,w){var H=w&&w.isWebGLRenderTargetCube;if(H)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,R),!(w.depthTexture&&w.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(w.depthTexture).__webglTexture||w.depthTexture.image.width!==w.width||w.depthTexture.image.height!==w.height)&&(w.depthTexture.image.width=w.width,w.depthTexture.image.height=w.height,w.depthTexture.needsUpdate=!0),y(w.depthTexture,0);var D=n.get(w.depthTexture).__webglTexture;if(w.depthTexture.format===DepthFormat)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,D,0);else if(w.depthTexture.format===DepthStencilFormat)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,D,0);else throw new Error("Unknown depthTexture format")}function P(R){var w=n.get(R),H=R.isWebGLRenderTargetCube===!0;if(R.depthTexture){if(H)throw new Error("target.depthTexture not supported in Cube render targets");O(w.__webglFramebuffer,R)}else if(H){w.__webglDepthbuffer=[];for(var D=0;D<6;D++)e.bindFramebuffer(e.FRAMEBUFFER,w.__webglFramebuffer[D]),w.__webglDepthbuffer[D]=e.createRenderbuffer(),b(w.__webglDepthbuffer[D],R)}else e.bindFramebuffer(e.FRAMEBUFFER,w.__webglFramebuffer),w.__webglDepthbuffer=e.createRenderbuffer(),b(w.__webglDepthbuffer,R);e.bindFramebuffer(e.FRAMEBUFFER,null)}function B(R){var w=n.get(R),H=n.get(R.texture);R.addEventListener("dispose",p),H.__webglTexture=e.createTexture(),u.textures++;var D=R.isWebGLRenderTargetCube===!0,K=f(R);if(D){w.__webglFramebuffer=[];for(var W=0;W<6;W++)w.__webglFramebuffer[W]=e.createFramebuffer()}else w.__webglFramebuffer=e.createFramebuffer();if(D){r.bindTexture(e.TEXTURE_CUBE_MAP,H.__webglTexture),E(e.TEXTURE_CUBE_MAP,R.texture,K);for(var W=0;W<6;W++)S(w.__webglFramebuffer[W],R,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+W);R.texture.generateMipmaps&&K&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,H.__webglTexture),E(e.TEXTURE_2D,R.texture,K),S(w.__webglFramebuffer,R,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),R.texture.generateMipmaps&&K&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);R.depthBuffer&&P(R)}function V(R){var w=R.texture;if(w.generateMipmaps&&f(R)&&w.minFilter!==NearestFilter&&w.minFilter!==LinearFilter){var H=R&&R.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,D=n.get(w).__webglTexture;r.bindTexture(H,D),e.generateMipmap(H),r.bindTexture(H,null)}}this.setTexture2D=y,this.setTextureCube=v,this.setTextureCubeDynamic=g,this.setupRenderTarget=B,this.updateRenderTargetMipmap=V}function WebGLProperties(){var e={};function t(a){var o=a.uuid,u=e[o];return u===void 0&&(u={},e[o]=u),u}function r(a){delete e[a.uuid]}function n(){e={}}return{get:t,remove:r,clear:n}}function WebGLState(e,t,r){function n(){var F=!1,Q=new Vector4,ae=null,ge=new Vector4;return{setMask:function(re){ae!==re&&!F&&(e.colorMask(re,re,re,re),ae=re)},setLocked:function(re){F=re},setClear:function(re,ve,ye,Me,Ce){Ce===!0&&(re*=Me,ve*=Me,ye*=Me),Q.set(re,ve,ye,Me),ge.equals(Q)===!1&&(e.clearColor(re,ve,ye,Me),ge.copy(Q))},reset:function(){F=!1,ae=null,ge.set(0,0,0,1)}}}function a(){var F=!1,Q=null,ae=null,ge=null;return{setTest:function(re){re?z(e.DEPTH_TEST):x(e.DEPTH_TEST)},setMask:function(re){Q!==re&&!F&&(e.depthMask(re),Q=re)},setFunc:function(re){if(ae!==re){if(re)switch(re){case NeverDepth:e.depthFunc(e.NEVER);break;case AlwaysDepth:e.depthFunc(e.ALWAYS);break;case LessDepth:e.depthFunc(e.LESS);break;case LessEqualDepth:e.depthFunc(e.LEQUAL);break;case EqualDepth:e.depthFunc(e.EQUAL);break;case GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case GreaterDepth:e.depthFunc(e.GREATER);break;case NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);ae=re}},setLocked:function(re){F=re},setClear:function(re){ge!==re&&(e.clearDepth(re),ge=re)},reset:function(){F=!1,Q=null,ae=null,ge=null}}}function o(){var F=!1,Q=null,ae=null,ge=null,re=null,ve=null,ye=null,Me=null,Ce=null;return{setTest:function(Ae){Ae?z(e.STENCIL_TEST):x(e.STENCIL_TEST)},setMask:function(Ae){Q!==Ae&&!F&&(e.stencilMask(Ae),Q=Ae)},setFunc:function(Ae,Le,De){(ae!==Ae||ge!==Le||re!==De)&&(e.stencilFunc(Ae,Le,De),ae=Ae,ge=Le,re=De)},setOp:function(Ae,Le,De){(ve!==Ae||ye!==Le||Me!==De)&&(e.stencilOp(Ae,Le,De),ve=Ae,ye=Le,Me=De)},setLocked:function(Ae){F=Ae},setClear:function(Ae){Ce!==Ae&&(e.clearStencil(Ae),Ce=Ae)},reset:function(){F=!1,Q=null,ae=null,ge=null,re=null,ve=null,ye=null,Me=null,Ce=null}}}var u=new n,s=new a,l=new o,f=e.getParameter(e.MAX_VERTEX_ATTRIBS),c=new Uint8Array(f),d=new Uint8Array(f),h=new Uint8Array(f),m={},p=null,_=null,M=null,y=null,v=null,g=null,E=null,T=null,S=!1,b=null,O=null,P=null,B=null,V=null,R=null,w=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),H=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),D=parseFloat(H)>=1,K=null,W={},k=new Vector4,J=new Vector4;function X(F,Q,ae){var ge=new Uint8Array(4),re=e.createTexture();e.bindTexture(F,re),e.texParameteri(F,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(F,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var ve=0;ve<ae;ve++)e.texImage2D(Q+ve,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,ge);return re}var I={};I[e.TEXTURE_2D]=X(e.TEXTURE_2D,e.TEXTURE_2D,1),I[e.TEXTURE_CUBE_MAP]=X(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6);function L(){u.setClear(0,0,0,1),s.setClear(1),l.setClear(0),z(e.DEPTH_TEST),s.setFunc(LessEqualDepth),Z(!1),ce(CullFaceBack),z(e.CULL_FACE),z(e.BLEND),$(NormalBlending)}function U(){for(var F=0,Q=c.length;F<Q;F++)c[F]=0}function G(F){if(c[F]=1,d[F]===0&&(e.enableVertexAttribArray(F),d[F]=1),h[F]!==0){var Q=t.get("ANGLE_instanced_arrays");Q.vertexAttribDivisorANGLE(F,0),h[F]=0}}function j(F,Q){if(c[F]=1,d[F]===0&&(e.enableVertexAttribArray(F),d[F]=1),h[F]!==Q){var ae=t.get("ANGLE_instanced_arrays");ae.vertexAttribDivisorANGLE(F,Q),h[F]=Q}}function oe(){for(var F=0,Q=d.length;F!==Q;++F)d[F]!==c[F]&&(e.disableVertexAttribArray(F),d[F]=0)}function z(F){m[F]!==!0&&(e.enable(F),m[F]=!0)}function x(F){m[F]!==!1&&(e.disable(F),m[F]=!1)}function fe(){if(p===null&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var F=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),Q=0;Q<F.length;Q++)p.push(F[Q]);return p}function $(F,Q,ae,ge,re,ve,ye,Me){F!==NoBlending?z(e.BLEND):x(e.BLEND),(F!==_||Me!==S)&&(F===AdditiveBlending?Me?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):F===SubtractiveBlending?Me?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):F===MultiplyBlending?Me?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):Me?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),_=F,S=Me),F===CustomBlending?(re=re||Q,ve=ve||ae,ye=ye||ge,(Q!==M||re!==g)&&(e.blendEquationSeparate(r(Q),r(re)),M=Q,g=re),(ae!==y||ge!==v||ve!==E||ye!==T)&&(e.blendFuncSeparate(r(ae),r(ge),r(ve),r(ye)),y=ae,v=ge,E=ve,T=ye)):(M=null,y=null,v=null,g=null,E=null,T=null)}function ue(F){F.side===DoubleSide?x(e.CULL_FACE):z(e.CULL_FACE),Z(F.side===BackSide),F.transparent===!0?$(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.premultipliedAlpha):$(NoBlending),s.setFunc(F.depthFunc),s.setTest(F.depthTest),s.setMask(F.depthWrite),u.setMask(F.colorWrite),Oe(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits)}function Z(F){b!==F&&(F?e.frontFace(e.CW):e.frontFace(e.CCW),b=F)}function ce(F){F!==CullFaceNone?(z(e.CULL_FACE),F!==O&&(F===CullFaceBack?e.cullFace(e.BACK):F===CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):x(e.CULL_FACE),O=F}function pe(F){F!==P&&(D&&e.lineWidth(F),P=F)}function Oe(F,Q,ae){F?(z(e.POLYGON_OFFSET_FILL),(B!==Q||V!==ae)&&(e.polygonOffset(Q,ae),B=Q,V=ae)):x(e.POLYGON_OFFSET_FILL)}function Fe(){return R}function Ie(F){R=F,F?z(e.SCISSOR_TEST):x(e.SCISSOR_TEST)}function we(F){F===void 0&&(F=e.TEXTURE0+w-1),K!==F&&(e.activeTexture(F),K=F)}function Ne(F,Q){K===null&&we();var ae=W[K];ae===void 0&&(ae={type:void 0,texture:void 0},W[K]=ae),(ae.type!==F||ae.texture!==Q)&&(e.bindTexture(F,Q||I[F]),ae.type=F,ae.texture=Q)}function Ue(){try{e.compressedTexImage2D.apply(e,arguments)}catch(F){console.error(F)}}function Re(){try{e.texImage2D.apply(e,arguments)}catch(F){console.error(F)}}function be(F){k.equals(F)===!1&&(e.scissor(F.x,F.y,F.z,F.w),k.copy(F))}function de(F){J.equals(F)===!1&&(e.viewport(F.x,F.y,F.z,F.w),J.copy(F))}function he(){for(var F=0;F<d.length;F++)d[F]===1&&(e.disableVertexAttribArray(F),d[F]=0);m={},p=null,K=null,W={},_=null,b=null,O=null,u.reset(),s.reset(),l.reset()}return{buffers:{color:u,depth:s,stencil:l},init:L,initAttributes:U,enableAttribute:G,enableAttributeAndDivisor:j,disableUnusedAttributes:oe,enable:z,disable:x,getCompressedTextureFormats:fe,setBlending:$,setMaterial:ue,setFlipSided:Z,setCullFace:ce,setLineWidth:pe,setPolygonOffset:Oe,getScissorTest:Fe,setScissorTest:Ie,activeTexture:we,bindTexture:Ne,compressedTexImage2D:Ue,texImage2D:Re,scissor:be,viewport:de,reset:he}}function WebGLCapabilities(e,t,r){var n;function a(){if(n!==void 0)return n;var E=t.get("EXT_texture_filter_anisotropic");return E!==null?n=e.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT):n=0,n}function o(E){if(E==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var u=r.precision!==void 0?r.precision:"highp",s=o(u);s!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",s,"instead."),u=s);var l=r.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),f=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),_=e.getParameter(e.MAX_VARYING_VECTORS),M=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=c>0,v=!!t.get("OES_texture_float"),g=y&&v;return{getMaxAnisotropy:a,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:l,maxTextures:f,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:h,maxAttributes:m,maxVertexUniforms:p,maxVaryings:_,maxFragmentUniforms:M,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:g}}function WebGLExtensions(e){var t={};return{get:function(r){if(t[r]!==void 0)return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(r)}return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function WebGLClipping(){var e=this,t=null,r=0,n=!1,a=!1,o=new Plane,u=new Matrix3,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(c,d,h){var m=c.length!==0||d||r!==0||n;return n=d,t=f(c,h,0),r=c.length,m},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1,l()},this.setState=function(c,d,h,m,p,_){if(!n||c===null||c.length===0||a&&!h)a?f(null):l();else{var M=a?0:r,y=M*4,v=p.clippingState||null;s.value=v,v=f(c,m,y,_);for(var g=0;g!==y;++g)v[g]=t[g];p.clippingState=v,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=M}};function l(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(c,d,h,m){var p=c!==null?c.length:0,_=null;if(p!==0){if(_=s.value,m!==!0||_===null){var M=h+p*4,y=d.matrixWorldInverse;u.getNormalMatrix(y),(_===null||_.length<M)&&(_=new Float32Array(M));for(var v=0,g=h;v!==p;++v,g+=4)o.copy(c[v]).applyMatrix4(y,u),o.normal.toArray(_,g),_[g+3]=o.constant}s.value=_,s.needsUpdate=!0}return e.numPlanes=p,_}}function WebGLRenderer(e){console.log("THREE.WebGLRenderer",REVISION),e=e||{};var t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=e.context!==void 0?e.context:null,n=e.alpha!==void 0?e.alpha:!1,a=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,u=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,f=[],c=null,d=new Float32Array(8),h=[],m=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p=this,_=null,M=null,y=null,v=-1,g="",E=null,T=new Vector4,S=null,b=new Vector4,O=0,P=new Color(0),B=0,V=t.width,R=t.height,w=1,H=new Vector4(0,0,V,R),D=!1,K=new Vector4(0,0,V,R),W=new Frustum,k=new WebGLClipping,J=!1,X=!1,I=new Matrix4,L=new Vector3,U=new Matrix4,G=new Matrix4,j={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},oe={geometries:0,textures:0},z={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:z,memory:oe,programs:null};var x;try{var fe={alpha:n,depth:a,stencil:o,antialias:u,premultipliedAlpha:s,preserveDrawingBuffer:l};if(x=r||t.getContext("webgl",fe)||t.getContext("experimental-webgl",fe),x===null)throw t.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";x.getShaderPrecisionFormat===void 0&&(x.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener("webglcontextlost",Ce,!1)}catch(A){console.error("THREE.WebGLRenderer: "+A)}var $=new WebGLExtensions(x);$.get("WEBGL_depth_texture"),$.get("OES_texture_float"),$.get("OES_texture_float_linear"),$.get("OES_texture_half_float"),$.get("OES_texture_half_float_linear"),$.get("OES_standard_derivatives"),$.get("ANGLE_instanced_arrays"),$.get("OES_element_index_uint")&&(BufferGeometry.MaxIndex=4294967296);var ue=new WebGLCapabilities(x,$,e),Z=new WebGLState(x,$,Ke),ce=new WebGLProperties,pe=new WebGLTextures(x,$,Z,ce,ue,Ke,oe),Oe=new WebGLAttributes(x),Fe=new WebGLGeometries(x,Oe,oe),Ie=new WebGLObjects(x,Fe,z),we=new WebGLPrograms(this,ue),Ne=new WebGLLights,Ue=new WebGLRenderLists;this.info.programs=we.programs;var Re=new WebGLBufferRenderer(x,$,z),be=new WebGLIndexedBufferRenderer(x,$,z),de,he,F,Q;function ae(){return M===null?w:1}function ge(){Z.init(),Z.scissor(T.copy(H).multiplyScalar(w)),Z.viewport(b.copy(K).multiplyScalar(w)),Z.buffers.color.setClear(P.r,P.g,P.b,B,s)}function re(){_=null,E=null,g="",v=-1,Z.reset()}ge(),this.context=x,this.capabilities=ue,this.extensions=$,this.properties=ce,this.state=Z;var ve=new WebGLShadowMap(this,j,Ie,ue);this.shadowMap=ve;var ye=new SpritePlugin(this,h),Me=new LensFlarePlugin(this,m);this.getContext=function(){return x},this.getContextAttributes=function(){return x.getContextAttributes()},this.forceContextLoss=function(){var A=$.get("WEBGL_lose_context");A&&A.loseContext()},this.getMaxAnisotropy=function(){return ue.getMaxAnisotropy()},this.getPrecision=function(){return ue.precision},this.getPixelRatio=function(){return w},this.setPixelRatio=function(A){A!==void 0&&(w=A,this.setSize(K.z,K.w,!1))},this.getSize=function(){return{width:V,height:R}},this.setSize=function(A,C,N){V=A,R=C,t.width=A*w,t.height=C*w,N!==!1&&(t.style.width=A+"px",t.style.height=C+"px"),this.setViewport(0,0,A,C)},this.setViewport=function(A,C,N,q){Z.viewport(K.set(A,C,N,q))},this.setScissor=function(A,C,N,q){Z.scissor(H.set(A,C,N,q))},this.setScissorTest=function(A){Z.setScissorTest(D=A)},this.getClearColor=function(){return P},this.setClearColor=function(A,C){P.set(A),B=C!==void 0?C:1,Z.buffers.color.setClear(P.r,P.g,P.b,B,s)},this.getClearAlpha=function(){return B},this.setClearAlpha=function(A){B=A,Z.buffers.color.setClear(P.r,P.g,P.b,B,s)},this.clear=function(A,C,N){var q=0;(A===void 0||A)&&(q|=x.COLOR_BUFFER_BIT),(C===void 0||C)&&(q|=x.DEPTH_BUFFER_BIT),(N===void 0||N)&&(q|=x.STENCIL_BUFFER_BIT),x.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(A,C,N,q){this.setRenderTarget(A),this.clear(C,N,q)},this.resetGLState=re,this.dispose=function(){t.removeEventListener("webglcontextlost",Ce,!1),Ue.dispose()};function Ce(A){A.preventDefault(),re(),ge(),ce.clear(),Ie.clear()}function Ae(A){var C=A.target;C.removeEventListener("dispose",Ae),Le(C)}function Le(A){De(A),ce.remove(A)}function De(A){var C=ce.get(A).program;A.program=void 0,C!==void 0&&we.releaseProgram(C)}function Xe(A,C,N){A.render(function(q){p.renderBufferImmediate(q,C,N)})}this.renderBufferImmediate=function(A,C,N){Z.initAttributes();var q=ce.get(A);A.hasPositions&&!q.position&&(q.position=x.createBuffer()),A.hasNormals&&!q.normal&&(q.normal=x.createBuffer()),A.hasUvs&&!q.uv&&(q.uv=x.createBuffer()),A.hasColors&&!q.color&&(q.color=x.createBuffer());var Y=C.getAttributes();if(A.hasPositions&&(x.bindBuffer(x.ARRAY_BUFFER,q.position),x.bufferData(x.ARRAY_BUFFER,A.positionArray,x.DYNAMIC_DRAW),Z.enableAttribute(Y.position),x.vertexAttribPointer(Y.position,3,x.FLOAT,!1,0,0)),A.hasNormals){if(x.bindBuffer(x.ARRAY_BUFFER,q.normal),!N.isMeshPhongMaterial&&!N.isMeshStandardMaterial&&!N.isMeshNormalMaterial&&N.shading===FlatShading)for(var ne=0,_e=A.count*3;ne<_e;ne+=9){var se=A.normalArray,me=(se[ne+0]+se[ne+3]+se[ne+6])/3,le=(se[ne+1]+se[ne+4]+se[ne+7])/3,ie=(se[ne+2]+se[ne+5]+se[ne+8])/3;se[ne+0]=me,se[ne+1]=le,se[ne+2]=ie,se[ne+3]=me,se[ne+4]=le,se[ne+5]=ie,se[ne+6]=me,se[ne+7]=le,se[ne+8]=ie}x.bufferData(x.ARRAY_BUFFER,A.normalArray,x.DYNAMIC_DRAW),Z.enableAttribute(Y.normal),x.vertexAttribPointer(Y.normal,3,x.FLOAT,!1,0,0)}A.hasUvs&&N.map&&(x.bindBuffer(x.ARRAY_BUFFER,q.uv),x.bufferData(x.ARRAY_BUFFER,A.uvArray,x.DYNAMIC_DRAW),Z.enableAttribute(Y.uv),x.vertexAttribPointer(Oe.uv,2,x.FLOAT,!1,0,0)),A.hasColors&&N.vertexColors!==NoColors&&(x.bindBuffer(x.ARRAY_BUFFER,q.color),x.bufferData(x.ARRAY_BUFFER,A.colorArray,x.DYNAMIC_DRAW),Z.enableAttribute(Y.color),x.vertexAttribPointer(Y.color,3,x.FLOAT,!1,0,0)),Z.disableUnusedAttributes(),x.drawArrays(x.TRIANGLES,0,A.count),A.count=0};function Ye(A,C){return Math.abs(C[0])-Math.abs(A[0])}this.renderBufferDirect=function(A,C,N,q,Y,ne){Z.setMaterial(q);var _e=Qe(A,C,q,Y),se=N.id+"_"+_e.id+"_"+(q.wireframe===!0),me=!1;se!==g&&(g=se,me=!0);var le=Y.morphTargetInfluences;if(le!==void 0){for(var ie=[],te=0,Pe=le.length;te<Pe;te++){var Ee=le[te];ie.push([Ee,te])}ie.sort(Ye),ie.length>8&&(ie.length=8);for(var xe=N.morphAttributes,te=0,Pe=ie.length;te<Pe;te++){var Ee=ie[te];if(d[te]=Ee[0],Ee[0]!==0){var Se=Ee[1];q.morphTargets===!0&&xe.position&&N.addAttribute("morphTarget"+te,xe.position[Se]),q.morphNormals===!0&&xe.normal&&N.addAttribute("morphNormal"+te,xe.normal[Se])}else q.morphTargets===!0&&N.removeAttribute("morphTarget"+te),q.morphNormals===!0&&N.removeAttribute("morphNormal"+te)}for(var te=ie.length,Te=d.length;te<Te;te++)d[te]=0;_e.getUniforms().setValue(x,"morphTargetInfluences",d),me=!0}var Se=N.index,ke=N.attributes.position,He=1;q.wireframe===!0&&(Se=Fe.getWireframeAttribute(N),He=2);var ee=Re;Se!==null&&(ee=be,ee.setIndex(Se)),me&&(Je(q,_e,N),Se!==null&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,Oe.get(Se).buffer));var ot=0;Se!==null?ot=Se.count:ke!==void 0&&(ot=ke.count);var ct=N.drawRange.start*He,_t=N.drawRange.count*He,dt=ne!==null?ne.start*He:0,Mt=ne!==null?ne.count*He:1/0,st=Math.max(ct,dt),vt=Math.min(ot,ct+_t,dt+Mt)-1,ut=Math.max(0,vt-st+1);if(ut!==0){if(Y.isMesh)if(q.wireframe===!0)Z.setLineWidth(q.wireframeLinewidth*ae()),ee.setMode(x.LINES);else switch(Y.drawMode){case TrianglesDrawMode:ee.setMode(x.TRIANGLES);break;case TriangleStripDrawMode:ee.setMode(x.TRIANGLE_STRIP);break;case TriangleFanDrawMode:ee.setMode(x.TRIANGLE_FAN);break}else if(Y.isLine){var lt=q.linewidth;lt===void 0&&(lt=1),Z.setLineWidth(lt*ae()),Y.isLineSegments?ee.setMode(x.LINES):Y.isLineLoop?ee.setMode(x.LINE_LOOP):ee.setMode(x.LINE_STRIP)}else Y.isPoints&&ee.setMode(x.POINTS);N&&N.isInstancedBufferGeometry?N.maxInstancedCount>0&&ee.renderInstances(N,st,ut):ee.render(st,ut)}};function Je(A,C,N,q){if(N&&N.isInstancedBufferGeometry&&$.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}q===void 0&&(q=0),Z.initAttributes();var Y=N.attributes,ne=C.getAttributes(),_e=A.defaultAttributeValues;for(var se in ne){var me=ne[se];if(me>=0){var le=Y[se];if(le!==void 0){var ie=le.normalized,te=le.itemSize,Pe=Oe.get(le),Ee=Pe.buffer,xe=Pe.type,Te=Pe.bytesPerElement;if(le.isInterleavedBufferAttribute){var Se=le.data,ke=Se.stride,He=le.offset;Se&&Se.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(me,Se.meshPerAttribute),N.maxInstancedCount===void 0&&(N.maxInstancedCount=Se.meshPerAttribute*Se.count)):Z.enableAttribute(me),x.bindBuffer(x.ARRAY_BUFFER,Ee),x.vertexAttribPointer(me,te,xe,ie,ke*Te,(q*ke+He)*Te)}else le.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(me,le.meshPerAttribute),N.maxInstancedCount===void 0&&(N.maxInstancedCount=le.meshPerAttribute*le.count)):Z.enableAttribute(me),x.bindBuffer(x.ARRAY_BUFFER,Ee),x.vertexAttribPointer(me,te,xe,ie,0,q*te*Te)}else if(_e!==void 0){var ee=_e[se];if(ee!==void 0)switch(ee.length){case 2:x.vertexAttrib2fv(me,ee);break;case 3:x.vertexAttrib3fv(me,ee);break;case 4:x.vertexAttrib4fv(me,ee);break;default:x.vertexAttrib1fv(me,ee)}}}}Z.disableUnusedAttributes()}this.compile=function(A,C){f=[],A.traverse(function(N){N.isLight&&f.push(N)}),ft(f,C),A.traverse(function(N){if(N.material)if(Array.isArray(N.material))for(var q=0;q<N.material.length;q++)Ge(N.material[q],A.fog,N);else Ge(N.material,A.fog,N)})},this.render=function(A,C,N,q){if(C!==void 0&&C.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}g="",v=-1,E=null,A.autoUpdate===!0&&A.updateMatrixWorld(),C.onBeforeRender(p),C.parent===null&&C.updateMatrixWorld(),C.matrixWorldInverse.getInverse(C.matrixWorld),I.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),W.setFromMatrix(I),f.length=0,h.length=0,m.length=0,X=this.localClippingEnabled,J=k.init(this.clippingPlanes,X,C),c=Ue.get(A,C),c.init(),je(A,C,p.sortObjects),c.finish(),p.sortObjects===!0&&c.sort(),J&&k.beginShadows(),mt(f),ve.render(A,C),ft(f,C),J&&k.endShadows(),z.frame++,z.calls=0,z.vertices=0,z.faces=0,z.points=0,N===void 0&&(N=null),this.setRenderTarget(N);var Y=A.background;Y===null?Z.buffers.color.setClear(P.r,P.g,P.b,B,s):Y&&Y.isColor&&(Z.buffers.color.setClear(Y.r,Y.g,Y.b,1,s),q=!0),(this.autoClear||q)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),Y&&Y.isCubeTexture?(F===void 0&&(F=new PerspectiveCamera,Q=new Mesh(new BoxBufferGeometry(5,5,5),new ShaderMaterial({uniforms:ShaderLib.cube.uniforms,vertexShader:ShaderLib.cube.vertexShader,fragmentShader:ShaderLib.cube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1}))),F.projectionMatrix.copy(C.projectionMatrix),F.matrixWorld.extractRotation(C.matrixWorld),F.matrixWorldInverse.getInverse(F.matrixWorld),Q.material.uniforms.tCube.value=Y,Q.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,Q.matrixWorld),Ie.update(Q),p.renderBufferDirect(F,null,Q.geometry,Q.material,Q,null)):Y&&Y.isTexture&&(de===void 0&&(de=new OrthographicCamera(-1,1,1,-1,0,1),he=new Mesh(new PlaneBufferGeometry(2,2),new MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1}))),he.material.map=Y,Ie.update(he),p.renderBufferDirect(de,null,he.geometry,he.material,he,null));var ne=c.opaque,_e=c.transparent;if(A.overrideMaterial){var se=A.overrideMaterial;ne.length&&ze(ne,A,C,se),_e.length&&ze(_e,A,C,se)}else ne.length&&ze(ne,A,C),_e.length&&ze(_e,A,C);ye.render(A,C),Me.render(A,C,b),N&&pe.updateRenderTargetMipmap(N),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),C.isArrayCamera&&C.enabled&&p.setScissorTest(!1),C.onAfterRender(p)};function je(A,C,N){if(!!A.visible){var q=A.layers.test(C.layers);if(q){if(A.isLight)f.push(A);else if(A.isSprite)(!A.frustumCulled||W.intersectsSprite(A))&&h.push(A);else if(A.isLensFlare)m.push(A);else if(A.isImmediateRenderObject)N&&L.setFromMatrixPosition(A.matrixWorld).applyMatrix4(I),c.push(A,null,A.material,L.z,null);else if((A.isMesh||A.isLine||A.isPoints)&&(A.isSkinnedMesh&&A.skeleton.update(),!A.frustumCulled||W.intersectsObject(A))){N&&L.setFromMatrixPosition(A.matrixWorld).applyMatrix4(I);var Y=Ie.update(A),ne=A.material;if(Array.isArray(ne))for(var _e=Y.groups,se=0,me=_e.length;se<me;se++){var le=_e[se],ie=ne[le.materialIndex];ie&&ie.visible&&c.push(A,Y,ie,L.z,le)}else ne.visible&&c.push(A,Y,ne,L.z,null)}}for(var te=A.children,se=0,me=te.length;se<me;se++)je(te[se],C,N)}}function ze(A,C,N,q){for(var Y=0,ne=A.length;Y<ne;Y++){var _e=A[Y],se=_e.object,me=_e.geometry,le=q===void 0?_e.material:q,ie=_e.group;if(se.onBeforeRender(p,C,N,me,le,ie),N.isArrayCamera&&N.enabled)for(var te=N.cameras,Pe=0,Ee=te.length;Pe<Ee;Pe++){var xe=te[Pe],Te=xe.bounds;p.setViewport(Te.x*V*w,Te.y*R*w,Te.z*V*w,Te.w*R*w),p.setScissor(Te.x*V*w,Te.y*R*w,Te.z*V*w,Te.w*R*w),p.setScissorTest(!0),We(se,C,xe,me,le,ie)}else We(se,C,N,me,le,ie);se.onAfterRender(p,C,N,me,le,ie)}}function We(A,C,N,q,Y,ne){if(A.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),A.isImmediateRenderObject){Z.setMaterial(Y);var _e=Qe(N,C.fog,Y,A);g="",Xe(A,_e,Y)}else p.renderBufferDirect(N,C.fog,q,Y,A,ne)}function Ge(A,C,N){var q=ce.get(A),Y=we.getParameters(A,j,C,k.numPlanes,k.numIntersection,N),ne=we.getProgramCode(A,Y),_e=q.program,se=!0;if(_e===void 0)A.addEventListener("dispose",Ae);else if(_e.code!==ne)De(A);else{if(Y.shaderID!==void 0)return;se=!1}if(se){if(Y.shaderID){var me=ShaderLib[Y.shaderID];q.__webglShader={name:A.type,uniforms:UniformsUtils.clone(me.uniforms),vertexShader:me.vertexShader,fragmentShader:me.fragmentShader}}else q.__webglShader={name:A.type,uniforms:A.uniforms,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader};A.__webglShader=q.__webglShader,_e=we.acquireProgram(A,Y,ne),q.program=_e,A.program=_e}var le=_e.getAttributes();if(A.morphTargets){A.numSupportedMorphTargets=0;for(var ie=0;ie<p.maxMorphTargets;ie++)le["morphTarget"+ie]>=0&&A.numSupportedMorphTargets++}if(A.morphNormals){A.numSupportedMorphNormals=0;for(var ie=0;ie<p.maxMorphNormals;ie++)le["morphNormal"+ie]>=0&&A.numSupportedMorphNormals++}var te=q.__webglShader.uniforms;(!A.isShaderMaterial&&!A.isRawShaderMaterial||A.clipping===!0)&&(q.numClippingPlanes=k.numPlanes,q.numIntersection=k.numIntersection,te.clippingPlanes=k.uniform),q.fog=C,q.lightsHash=j.hash,A.lights&&(te.ambientLightColor.value=j.ambient,te.directionalLights.value=j.directional,te.spotLights.value=j.spot,te.rectAreaLights.value=j.rectArea,te.pointLights.value=j.point,te.hemisphereLights.value=j.hemi,te.directionalShadowMap.value=j.directionalShadowMap,te.directionalShadowMatrix.value=j.directionalShadowMatrix,te.spotShadowMap.value=j.spotShadowMap,te.spotShadowMatrix.value=j.spotShadowMatrix,te.pointShadowMap.value=j.pointShadowMap,te.pointShadowMatrix.value=j.pointShadowMatrix);var Pe=q.program.getUniforms(),Ee=WebGLUniforms.seqWithValue(Pe.seq,te);q.uniformsList=Ee}function Qe(A,C,N,q){O=0;var Y=ce.get(N);if(J&&(X||A!==E)){var ne=A===E&&N.id===v;k.setState(N.clippingPlanes,N.clipIntersection,N.clipShadows,A,Y,ne)}N.needsUpdate===!1&&(Y.program===void 0||N.fog&&Y.fog!==C||N.lights&&Y.lightsHash!==j.hash||Y.numClippingPlanes!==void 0&&(Y.numClippingPlanes!==k.numPlanes||Y.numIntersection!==k.numIntersection))&&(N.needsUpdate=!0),N.needsUpdate&&(Ge(N,C,q),N.needsUpdate=!1);var _e=!1,se=!1,me=!1,le=Y.program,ie=le.getUniforms(),te=Y.__webglShader.uniforms;if(le.id!==_&&(x.useProgram(le.program),_=le.id,_e=!0,se=!0,me=!0),N.id!==v&&(v=N.id,se=!0),_e||A!==E){if(ie.setValue(x,"projectionMatrix",A.projectionMatrix),ue.logarithmicDepthBuffer&&ie.setValue(x,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),A!==E&&(E=A,se=!0,me=!0),N.isShaderMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.envMap){var Pe=ie.map.cameraPosition;Pe!==void 0&&Pe.setValue(x,L.setFromMatrixPosition(A.matrixWorld))}(N.isMeshPhongMaterial||N.isMeshLambertMaterial||N.isMeshBasicMaterial||N.isMeshStandardMaterial||N.isShaderMaterial||N.skinning)&&ie.setValue(x,"viewMatrix",A.matrixWorldInverse),ie.setValue(x,"toneMappingExposure",p.toneMappingExposure),ie.setValue(x,"toneMappingWhitePoint",p.toneMappingWhitePoint)}if(N.skinning){ie.setOptional(x,q,"bindMatrix"),ie.setOptional(x,q,"bindMatrixInverse");var Ee=q.skeleton;if(Ee){var xe=Ee.bones;if(ue.floatVertexTextures){if(Ee.boneTexture===void 0){var Te=Math.sqrt(xe.length*4);Te=_Math.nextPowerOfTwo(Math.ceil(Te)),Te=Math.max(Te,4);var Se=new Float32Array(Te*Te*4);Se.set(Ee.boneMatrices);var ke=new DataTexture(Se,Te,Te,RGBAFormat,FloatType);Ee.boneMatrices=Se,Ee.boneTexture=ke,Ee.boneTextureSize=Te}ie.setValue(x,"boneTexture",Ee.boneTexture),ie.setValue(x,"boneTextureSize",Ee.boneTextureSize)}else ie.setOptional(x,Ee,"boneMatrices")}}return se&&(N.lights&&ht(te,me),C&&N.fog&&$e(te,C),(N.isMeshBasicMaterial||N.isMeshLambertMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isMeshNormalMaterial||N.isMeshDepthMaterial)&&tt(te,N),N.isLineBasicMaterial?qe(te,N):N.isLineDashedMaterial?(qe(te,N),rt(te,N)):N.isPointsMaterial?nt(te,N):N.isMeshLambertMaterial?it(te,N):N.isMeshToonMaterial?Be(te,N):N.isMeshPhongMaterial?Ze(te,N):N.isMeshPhysicalMaterial?et(te,N):N.isMeshStandardMaterial?Ve(te,N):N.isMeshDepthMaterial?N.displacementMap&&(te.displacementMap.value=N.displacementMap,te.displacementScale.value=N.displacementScale,te.displacementBias.value=N.displacementBias):N.isMeshNormalMaterial&&at(te,N),te.ltcMat!==void 0&&(te.ltcMat.value=UniformsLib.LTC_MAT_TEXTURE),te.ltcMag!==void 0&&(te.ltcMag.value=UniformsLib.LTC_MAG_TEXTURE),WebGLUniforms.upload(x,Y.uniformsList,te,p)),ie.setValue(x,"modelViewMatrix",q.modelViewMatrix),ie.setValue(x,"normalMatrix",q.normalMatrix),ie.setValue(x,"modelMatrix",q.matrixWorld),le}function tt(A,C){A.opacity.value=C.opacity,A.diffuse.value=C.color,C.emissive&&A.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),A.map.value=C.map,A.specularMap.value=C.specularMap,A.alphaMap.value=C.alphaMap,C.lightMap&&(A.lightMap.value=C.lightMap,A.lightMapIntensity.value=C.lightMapIntensity),C.aoMap&&(A.aoMap.value=C.aoMap,A.aoMapIntensity.value=C.aoMapIntensity);var N;if(C.map?N=C.map:C.specularMap?N=C.specularMap:C.displacementMap?N=C.displacementMap:C.normalMap?N=C.normalMap:C.bumpMap?N=C.bumpMap:C.roughnessMap?N=C.roughnessMap:C.metalnessMap?N=C.metalnessMap:C.alphaMap?N=C.alphaMap:C.emissiveMap&&(N=C.emissiveMap),N!==void 0){N.isWebGLRenderTarget&&(N=N.texture);var q=N.offset,Y=N.repeat;A.offsetRepeat.value.set(q.x,q.y,Y.x,Y.y)}A.envMap.value=C.envMap,A.flipEnvMap.value=C.envMap&&C.envMap.isCubeTexture?-1:1,A.reflectivity.value=C.reflectivity,A.refractionRatio.value=C.refractionRatio}function qe(A,C){A.diffuse.value=C.color,A.opacity.value=C.opacity}function rt(A,C){A.dashSize.value=C.dashSize,A.totalSize.value=C.dashSize+C.gapSize,A.scale.value=C.scale}function nt(A,C){if(A.diffuse.value=C.color,A.opacity.value=C.opacity,A.size.value=C.size*w,A.scale.value=R*.5,A.map.value=C.map,C.map!==null){var N=C.map.offset,q=C.map.repeat;A.offsetRepeat.value.set(N.x,N.y,q.x,q.y)}}function $e(A,C){A.fogColor.value=C.color,C.isFog?(A.fogNear.value=C.near,A.fogFar.value=C.far):C.isFogExp2&&(A.fogDensity.value=C.density)}function it(A,C){C.emissiveMap&&(A.emissiveMap.value=C.emissiveMap)}function Ze(A,C){A.specular.value=C.specular,A.shininess.value=Math.max(C.shininess,1e-4),C.emissiveMap&&(A.emissiveMap.value=C.emissiveMap),C.bumpMap&&(A.bumpMap.value=C.bumpMap,A.bumpScale.value=C.bumpScale),C.normalMap&&(A.normalMap.value=C.normalMap,A.normalScale.value.copy(C.normalScale)),C.displacementMap&&(A.displacementMap.value=C.displacementMap,A.displacementScale.value=C.displacementScale,A.displacementBias.value=C.displacementBias)}function Be(A,C){Ze(A,C),C.gradientMap&&(A.gradientMap.value=C.gradientMap)}function Ve(A,C){A.roughness.value=C.roughness,A.metalness.value=C.metalness,C.roughnessMap&&(A.roughnessMap.value=C.roughnessMap),C.metalnessMap&&(A.metalnessMap.value=C.metalnessMap),C.emissiveMap&&(A.emissiveMap.value=C.emissiveMap),C.bumpMap&&(A.bumpMap.value=C.bumpMap,A.bumpScale.value=C.bumpScale),C.normalMap&&(A.normalMap.value=C.normalMap,A.normalScale.value.copy(C.normalScale)),C.displacementMap&&(A.displacementMap.value=C.displacementMap,A.displacementScale.value=C.displacementScale,A.displacementBias.value=C.displacementBias),C.envMap&&(A.envMapIntensity.value=C.envMapIntensity)}function et(A,C){A.clearCoat.value=C.clearCoat,A.clearCoatRoughness.value=C.clearCoatRoughness,Ve(A,C)}function at(A,C){C.bumpMap&&(A.bumpMap.value=C.bumpMap,A.bumpScale.value=C.bumpScale),C.normalMap&&(A.normalMap.value=C.normalMap,A.normalScale.value.copy(C.normalScale)),C.displacementMap&&(A.displacementMap.value=C.displacementMap,A.displacementScale.value=C.displacementScale,A.displacementBias.value=C.displacementBias)}function ht(A,C){A.ambientLightColor.needsUpdate=C,A.directionalLights.needsUpdate=C,A.pointLights.needsUpdate=C,A.spotLights.needsUpdate=C,A.rectAreaLights.needsUpdate=C,A.hemisphereLights.needsUpdate=C}function mt(A){for(var C=0,N=0,q=A.length;N<q;N++){var Y=A[N];Y.castShadow&&(j.shadows[C]=Y,C++)}j.shadows.length=C}function ft(A,C){var N,q,Y,ne,_e=0,se=0,me=0,le,ie,te,Pe,Ee=C.matrixWorldInverse,xe=0,Te=0,Se=0,ke=0,He=0;for(N=0,q=A.length;N<q;N++)if(Y=A[N],le=Y.color,ie=Y.intensity,te=Y.distance,Pe=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null,Y.isAmbientLight)_e+=le.r*ie,se+=le.g*ie,me+=le.b*ie;else if(Y.isDirectionalLight){var ee=Ne.get(Y);ee.color.copy(Y.color).multiplyScalar(Y.intensity),ee.direction.setFromMatrixPosition(Y.matrixWorld),L.setFromMatrixPosition(Y.target.matrixWorld),ee.direction.sub(L),ee.direction.transformDirection(Ee),ee.shadow=Y.castShadow,Y.castShadow&&(ne=Y.shadow,ee.shadowBias=ne.bias,ee.shadowRadius=ne.radius,ee.shadowMapSize=ne.mapSize),j.directionalShadowMap[xe]=Pe,j.directionalShadowMatrix[xe]=Y.shadow.matrix,j.directional[xe]=ee,xe++}else if(Y.isSpotLight){var ee=Ne.get(Y);ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(Ee),ee.color.copy(le).multiplyScalar(ie),ee.distance=te,ee.direction.setFromMatrixPosition(Y.matrixWorld),L.setFromMatrixPosition(Y.target.matrixWorld),ee.direction.sub(L),ee.direction.transformDirection(Ee),ee.coneCos=Math.cos(Y.angle),ee.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),ee.decay=Y.distance===0?0:Y.decay,ee.shadow=Y.castShadow,Y.castShadow&&(ne=Y.shadow,ee.shadowBias=ne.bias,ee.shadowRadius=ne.radius,ee.shadowMapSize=ne.mapSize),j.spotShadowMap[Se]=Pe,j.spotShadowMatrix[Se]=Y.shadow.matrix,j.spot[Se]=ee,Se++}else if(Y.isRectAreaLight){var ee=Ne.get(Y);ee.color.copy(le).multiplyScalar(ie/(Y.width*Y.height)),ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(Ee),G.identity(),U.copy(Y.matrixWorld),U.premultiply(Ee),G.extractRotation(U),ee.halfWidth.set(Y.width*.5,0,0),ee.halfHeight.set(0,Y.height*.5,0),ee.halfWidth.applyMatrix4(G),ee.halfHeight.applyMatrix4(G),j.rectArea[ke]=ee,ke++}else if(Y.isPointLight){var ee=Ne.get(Y);ee.position.setFromMatrixPosition(Y.matrixWorld),ee.position.applyMatrix4(Ee),ee.color.copy(Y.color).multiplyScalar(Y.intensity),ee.distance=Y.distance,ee.decay=Y.distance===0?0:Y.decay,ee.shadow=Y.castShadow,Y.castShadow&&(ne=Y.shadow,ee.shadowBias=ne.bias,ee.shadowRadius=ne.radius,ee.shadowMapSize=ne.mapSize),j.pointShadowMap[Te]=Pe,j.pointShadowMatrix[Te]=Y.shadow.matrix,j.point[Te]=ee,Te++}else if(Y.isHemisphereLight){var ee=Ne.get(Y);ee.direction.setFromMatrixPosition(Y.matrixWorld),ee.direction.transformDirection(Ee),ee.direction.normalize(),ee.skyColor.copy(Y.color).multiplyScalar(ie),ee.groundColor.copy(Y.groundColor).multiplyScalar(ie),j.hemi[He]=ee,He++}j.ambient[0]=_e,j.ambient[1]=se,j.ambient[2]=me,j.directional.length=xe,j.spot.length=Se,j.rectArea.length=ke,j.point.length=Te,j.hemi.length=He,j.hash=xe+","+Te+","+Se+","+ke+","+He+","+j.shadows.length}this.setFaceCulling=function(A,C){Z.setCullFace(A),Z.setFlipSided(C===FrontFaceDirectionCW)};function pt(){var A=O;return A>=ue.maxTextures&&console.warn("WebGLRenderer: trying to use "+A+" texture units while this GPU supports only "+ue.maxTextures),O+=1,A}this.allocTextureUnit=pt,this.setTexture2D=function(){var A=!1;return function(N,q){N&&N.isWebGLRenderTarget&&(A||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),A=!0),N=N.texture),pe.setTexture2D(N,q)}}(),this.setTexture=function(){var A=!1;return function(N,q){A||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),A=!0),pe.setTexture2D(N,q)}}(),this.setTextureCube=function(){var A=!1;return function(N,q){N&&N.isWebGLRenderTargetCube&&(A||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),A=!0),N=N.texture),N&&N.isCubeTexture||Array.isArray(N.image)&&N.image.length===6?pe.setTextureCube(N,q):pe.setTextureCubeDynamic(N,q)}}(),this.getRenderTarget=function(){return M},this.setRenderTarget=function(A){M=A,A&&ce.get(A).__webglFramebuffer===void 0&&pe.setupRenderTarget(A);var C=A&&A.isWebGLRenderTargetCube,N;if(A){var q=ce.get(A);C?N=q.__webglFramebuffer[A.activeCubeFace]:N=q.__webglFramebuffer,T.copy(A.scissor),S=A.scissorTest,b.copy(A.viewport)}else N=null,T.copy(H).multiplyScalar(w),S=D,b.copy(K).multiplyScalar(w);if(y!==N&&(x.bindFramebuffer(x.FRAMEBUFFER,N),y=N),Z.scissor(T),Z.setScissorTest(S),Z.viewport(b),C){var Y=ce.get(A.texture);x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+A.activeCubeFace,Y.__webglTexture,A.activeMipMapLevel)}},this.readRenderTargetPixels=function(A,C,N,q,Y,ne){if((A&&A.isWebGLRenderTarget)===!1){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var _e=ce.get(A).__webglFramebuffer;if(_e){var se=!1;_e!==y&&(x.bindFramebuffer(x.FRAMEBUFFER,_e),se=!0);try{var me=A.texture,le=me.format,ie=me.type;if(le!==RGBAFormat&&Ke(le)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(ie!==UnsignedByteType&&Ke(ie)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ie===FloatType&&($.get("OES_texture_float")||$.get("WEBGL_color_buffer_float")))&&!(ie===HalfFloatType&&$.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}x.checkFramebufferStatus(x.FRAMEBUFFER)===x.FRAMEBUFFER_COMPLETE?C>=0&&C<=A.width-q&&N>=0&&N<=A.height-Y&&x.readPixels(C,N,q,Y,Ke(le),Ke(ie),ne):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{se&&x.bindFramebuffer(x.FRAMEBUFFER,y)}}};function Ke(A){var C;if(A===RepeatWrapping)return x.REPEAT;if(A===ClampToEdgeWrapping)return x.CLAMP_TO_EDGE;if(A===MirroredRepeatWrapping)return x.MIRRORED_REPEAT;if(A===NearestFilter)return x.NEAREST;if(A===NearestMipMapNearestFilter)return x.NEAREST_MIPMAP_NEAREST;if(A===NearestMipMapLinearFilter)return x.NEAREST_MIPMAP_LINEAR;if(A===LinearFilter)return x.LINEAR;if(A===LinearMipMapNearestFilter)return x.LINEAR_MIPMAP_NEAREST;if(A===LinearMipMapLinearFilter)return x.LINEAR_MIPMAP_LINEAR;if(A===UnsignedByteType)return x.UNSIGNED_BYTE;if(A===UnsignedShort4444Type)return x.UNSIGNED_SHORT_4_4_4_4;if(A===UnsignedShort5551Type)return x.UNSIGNED_SHORT_5_5_5_1;if(A===UnsignedShort565Type)return x.UNSIGNED_SHORT_5_6_5;if(A===ByteType)return x.BYTE;if(A===ShortType)return x.SHORT;if(A===UnsignedShortType)return x.UNSIGNED_SHORT;if(A===IntType)return x.INT;if(A===UnsignedIntType)return x.UNSIGNED_INT;if(A===FloatType)return x.FLOAT;if(A===HalfFloatType&&(C=$.get("OES_texture_half_float"),C!==null))return C.HALF_FLOAT_OES;if(A===AlphaFormat)return x.ALPHA;if(A===RGBFormat)return x.RGB;if(A===RGBAFormat)return x.RGBA;if(A===LuminanceFormat)return x.LUMINANCE;if(A===LuminanceAlphaFormat)return x.LUMINANCE_ALPHA;if(A===DepthFormat)return x.DEPTH_COMPONENT;if(A===DepthStencilFormat)return x.DEPTH_STENCIL;if(A===AddEquation)return x.FUNC_ADD;if(A===SubtractEquation)return x.FUNC_SUBTRACT;if(A===ReverseSubtractEquation)return x.FUNC_REVERSE_SUBTRACT;if(A===ZeroFactor)return x.ZERO;if(A===OneFactor)return x.ONE;if(A===SrcColorFactor)return x.SRC_COLOR;if(A===OneMinusSrcColorFactor)return x.ONE_MINUS_SRC_COLOR;if(A===SrcAlphaFactor)return x.SRC_ALPHA;if(A===OneMinusSrcAlphaFactor)return x.ONE_MINUS_SRC_ALPHA;if(A===DstAlphaFactor)return x.DST_ALPHA;if(A===OneMinusDstAlphaFactor)return x.ONE_MINUS_DST_ALPHA;if(A===DstColorFactor)return x.DST_COLOR;if(A===OneMinusDstColorFactor)return x.ONE_MINUS_DST_COLOR;if(A===SrcAlphaSaturateFactor)return x.SRC_ALPHA_SATURATE;if((A===RGB_S3TC_DXT1_Format||A===RGBA_S3TC_DXT1_Format||A===RGBA_S3TC_DXT3_Format||A===RGBA_S3TC_DXT5_Format)&&(C=$.get("WEBGL_compressed_texture_s3tc"),C!==null)){if(A===RGB_S3TC_DXT1_Format)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT1_Format)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT3_Format)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(A===RGBA_S3TC_DXT5_Format)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((A===RGB_PVRTC_4BPPV1_Format||A===RGB_PVRTC_2BPPV1_Format||A===RGBA_PVRTC_4BPPV1_Format||A===RGBA_PVRTC_2BPPV1_Format)&&(C=$.get("WEBGL_compressed_texture_pvrtc"),C!==null)){if(A===RGB_PVRTC_4BPPV1_Format)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(A===RGB_PVRTC_2BPPV1_Format)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(A===RGBA_PVRTC_4BPPV1_Format)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(A===RGBA_PVRTC_2BPPV1_Format)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(A===RGB_ETC1_Format&&(C=$.get("WEBGL_compressed_texture_etc1"),C!==null))return C.COMPRESSED_RGB_ETC1_WEBGL;if((A===MinEquation||A===MaxEquation)&&(C=$.get("EXT_blend_minmax"),C!==null)){if(A===MinEquation)return C.MIN_EXT;if(A===MaxEquation)return C.MAX_EXT}return A===UnsignedInt248Type&&(C=$.get("WEBGL_depth_texture"),C!==null)?C.UNSIGNED_INT_24_8_WEBGL:0}}function FogExp2(e,t){this.name="",this.color=new Color(e),this.density=t!==void 0?t:25e-5}FogExp2.prototype.isFogExp2=!0;FogExp2.prototype.clone=function(){return new FogExp2(this.color.getHex(),this.density)};FogExp2.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Fog(e,t,r){this.name="",this.color=new Color(e),this.near=t!==void 0?t:1,this.far=r!==void 0?r:1e3}Fog.prototype.isFog=!0;Fog.prototype.clone=function(){return new Fog(this.color.getHex(),this.near,this.far)};Fog.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function Scene(){Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}});function LensFlare(e,t,r,n,a){Object3D.call(this),this.lensFlares=[],this.positionScreen=new Vector3,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,r,n,a)}LensFlare.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LensFlare,isLensFlare:!0,copy:function(e){Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,n,a,o){t===void 0&&(t=-1),r===void 0&&(r=0),o===void 0&&(o=1),a===void 0&&(a=new Color(16777215)),n===void 0&&(n=NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:a,blending:n})},updateLensFlares:function(){var e,t=this.lensFlares.length,r,n=-this.positionScreen.x*2,a=-this.positionScreen.y*2;for(e=0;e<t;e++)r=this.lensFlares[e],r.x=this.positionScreen.x+n*r.distance,r.y=this.positionScreen.y+a*r.distance,r.wantedRotation=r.x*Math.PI*.25,r.rotation+=(r.wantedRotation-r.rotation)*.25}});function SpriteMaterial(e){Material.call(this),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}SpriteMaterial.prototype=Object.create(Material.prototype);SpriteMaterial.prototype.constructor=SpriteMaterial;SpriteMaterial.prototype.isSpriteMaterial=!0;SpriteMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this};function Sprite(e){Object3D.call(this),this.type="Sprite",this.material=e!==void 0?e:new SpriteMaterial}Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(a,o){t.setFromMatrixPosition(this.matrixWorld),a.ray.closestPointToPoint(t,e),r.setFromMatrixScale(this.matrixWorld);var u=r.x*r.y/4;if(!(t.distanceToSquared(e)>u)){var s=a.ray.origin.distanceTo(e);s<a.near||s>a.far||o.push({distance:s,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function LOD(){Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,copy:function(e){Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new Vector3;return function(r,n){e.setFromMatrixPosition(this.matrixWorld);var a=r.ray.origin.distanceTo(e);this.getObjectForDistance(a).raycast(r,n)}}(),update:function(){var e=new Vector3,t=new Vector3;return function(n){var a=this.levels;if(a.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var o=e.distanceTo(t);a[0].object.visible=!0;for(var u=1,s=a.length;u<s&&o>=a[u].distance;u++)a[u-1].object.visible=!1,a[u].object.visible=!0;for(;u<s;u++)a[u].object.visible=!1}}}(),toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,a=r.length;n<a;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}});function Skeleton(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Matrix4)}}Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Matrix4,t=new Matrix4;return function(){for(var n=this.bones,a=this.boneInverses,o=this.boneMatrices,u=this.boneTexture,s=0,l=n.length;s<l;s++){var f=n[s]?n[s].matrixWorld:t;e.multiplyMatrices(f,a[s]),e.toArray(o,s*16)}u!==void 0&&(u.needsUpdate=!0)}}(),clone:function(){return new Skeleton(this.bones,this.boneInverses)}});function Bone(){Object3D.call(this),this.type="Bone"}Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});function SkinnedMesh(e,t){Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4;var r=this.initBones(),n=new Skeleton(r);this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,initBones:function(){var e=[],t,r,n,a;if(this.geometry&&this.geometry.bones!==void 0){for(n=0,a=this.geometry.bones.length;n<a;n++)r=this.geometry.bones[n],t=new Bone,e.push(t),t.name=r.name,t.position.fromArray(r.pos),t.quaternion.fromArray(r.rotq),r.scl!==void 0&&t.scale.fromArray(r.scl);for(n=0,a=this.geometry.bones.length;n<a;n++)r=this.geometry.bones[n],r.parent!==-1&&r.parent!==null&&e[r.parent]!==void 0?e[r.parent].add(e[n]):this.add(e[n])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];e=1/r.lengthManhattan(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new Vector4,a=this.geometry.attributes.skinWeight;for(t=0;t<a.count;t++)n.x=a.getX(t),n.y=a.getY(t),n.z=a.getZ(t),n.w=a.getW(t),e=1/n.lengthManhattan(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0),a.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function LineBasicMaterial(e){Material.call(this),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}LineBasicMaterial.prototype=Object.create(Material.prototype);LineBasicMaterial.prototype.constructor=LineBasicMaterial;LineBasicMaterial.prototype.isLineBasicMaterial=!0;LineBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};function Line(e,t,r){if(r===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new LineSegments(e,t);Object3D.call(this),this.type="Line",this.geometry=e!==void 0?e:new BufferGeometry,this.material=t!==void 0?t:new LineBasicMaterial({color:Math.random()*16777215})}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,raycast:function(){var e=new Matrix4,t=new Ray,r=new Sphere;return function(a,o){var u=a.linePrecision,s=u*u,l=this.geometry,f=this.matrixWorld;if(l.boundingSphere===null&&l.computeBoundingSphere(),r.copy(l.boundingSphere),r.applyMatrix4(f),a.ray.intersectsSphere(r)!==!1){e.getInverse(f),t.copy(a.ray).applyMatrix4(e);var c=new Vector3,d=new Vector3,h=new Vector3,m=new Vector3,p=this&&this.isLineSegments?2:1;if(l.isBufferGeometry){var _=l.index,M=l.attributes,y=M.position.array;if(_!==null)for(var v=_.array,g=0,E=v.length-1;g<E;g+=p){var T=v[g],S=v[g+1];c.fromArray(y,T*3),d.fromArray(y,S*3);var b=t.distanceSqToSegment(c,d,m,h);if(!(b>s)){m.applyMatrix4(this.matrixWorld);var O=a.ray.origin.distanceTo(m);O<a.near||O>a.far||o.push({distance:O,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var g=0,E=y.length/3-1;g<E;g+=p){c.fromArray(y,3*g),d.fromArray(y,3*g+3);var b=t.distanceSqToSegment(c,d,m,h);if(!(b>s)){m.applyMatrix4(this.matrixWorld);var O=a.ray.origin.distanceTo(m);O<a.near||O>a.far||o.push({distance:O,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}else if(l.isGeometry)for(var P=l.vertices,B=P.length,g=0;g<B-1;g+=p){var b=t.distanceSqToSegment(P[g],P[g+1],m,h);if(!(b>s)){m.applyMatrix4(this.matrixWorld);var O=a.ray.origin.distanceTo(m);O<a.near||O>a.far||o.push({distance:O,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function LineSegments(e,t){Line.call(this,e,t),this.type="LineSegments"}LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0});function LineLoop(e,t){Line.call(this,e,t),this.type="LineLoop"}LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0});function PointsMaterial(e){Material.call(this),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}PointsMaterial.prototype=Object.create(Material.prototype);PointsMaterial.prototype.constructor=PointsMaterial;PointsMaterial.prototype.isPointsMaterial=!0;PointsMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this};function Points(e,t){Object3D.call(this),this.type="Points",this.geometry=e!==void 0?e:new BufferGeometry,this.material=t!==void 0?t:new PointsMaterial({color:Math.random()*16777215})}Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(){var e=new Matrix4,t=new Ray,r=new Sphere;return function(a,o){var u=this,s=this.geometry,l=this.matrixWorld,f=a.params.Points.threshold;if(s.boundingSphere===null&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),r.radius+=f,a.ray.intersectsSphere(r)===!1)return;e.getInverse(l),t.copy(a.ray).applyMatrix4(e);var c=f/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,h=new Vector3;function m(b,O){var P=t.distanceSqToPoint(b);if(P<d){var B=t.closestPointToPoint(b);B.applyMatrix4(l);var V=a.ray.origin.distanceTo(B);if(V<a.near||V>a.far)return;o.push({distance:V,distanceToRay:Math.sqrt(P),point:B.clone(),index:O,face:null,object:u})}}if(s.isBufferGeometry){var p=s.index,_=s.attributes,M=_.position.array;if(p!==null)for(var y=p.array,v=0,g=y.length;v<g;v++){var E=y[v];h.fromArray(M,E*3),m(h,E)}else for(var v=0,T=M.length/3;v<T;v++)h.fromArray(M,v*3),m(h,v)}else for(var S=s.vertices,v=0,T=S.length;v<T;v++)m(S[v],v)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Group(){Object3D.call(this),this.type="Group"}Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group});function VideoTexture(e,t,r,n,a,o,u,s,l){Texture.call(this,e,t,r,n,a,o,u,s,l),this.generateMipmaps=!1;var f=this;function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(f.needsUpdate=!0)}c()}VideoTexture.prototype=Object.create(Texture.prototype);VideoTexture.prototype.constructor=VideoTexture;function CompressedTexture(e,t,r,n,a,o,u,s,l,f,c,d){Texture.call(this,null,o,u,s,l,f,n,a,c,d),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}CompressedTexture.prototype=Object.create(Texture.prototype);CompressedTexture.prototype.constructor=CompressedTexture;CompressedTexture.prototype.isCompressedTexture=!0;function CanvasTexture(e,t,r,n,a,o,u,s,l){Texture.call(this,e,t,r,n,a,o,u,s,l),this.needsUpdate=!0}CanvasTexture.prototype=Object.create(Texture.prototype);CanvasTexture.prototype.constructor=CanvasTexture;function DepthTexture(e,t,r,n,a,o,u,s,l,f){if(f=f!==void 0?f:DepthFormat,f!==DepthFormat&&f!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===DepthFormat&&(r=UnsignedShortType),r===void 0&&f===DepthStencilFormat&&(r=UnsignedInt248Type),Texture.call(this,null,n,a,o,u,s,f,r,l),this.image={width:e,height:t},this.magFilter=u!==void 0?u:NearestFilter,this.minFilter=s!==void 0?s:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}DepthTexture.prototype=Object.create(Texture.prototype);DepthTexture.prototype.constructor=DepthTexture;DepthTexture.prototype.isDepthTexture=!0;function WireframeGeometry(e){BufferGeometry.call(this),this.type="WireframeGeometry";var t=[],r,n,a,o,u,s=[0,0],l={},f,c,d,h,m=["a","b","c"],p;if(e&&e.isGeometry){var _=e.faces;for(r=0,a=_.length;r<a;r++){var M=_[r];for(n=0;n<3;n++)c=M[m[n]],d=M[m[(n+1)%3]],s[0]=Math.min(c,d),s[1]=Math.max(c,d),h=s[0]+","+s[1],l[h]===void 0&&(l[h]={index1:s[0],index2:s[1]})}for(h in l)f=l[h],p=e.vertices[f.index1],t.push(p.x,p.y,p.z),p=e.vertices[f.index2],t.push(p.x,p.y,p.z)}else if(e&&e.isBufferGeometry){var y,v,g,E,T,S,b,O;if(p=new Vector3,e.index!==null){for(y=e.attributes.position,v=e.index,g=e.groups,g.length===0&&(g=[{start:0,count:v.count,materialIndex:0}]),o=0,u=g.length;o<u;++o)for(E=g[o],T=E.start,S=E.count,r=T,a=T+S;r<a;r+=3)for(n=0;n<3;n++)c=v.getX(r+n),d=v.getX(r+(n+1)%3),s[0]=Math.min(c,d),s[1]=Math.max(c,d),h=s[0]+","+s[1],l[h]===void 0&&(l[h]={index1:s[0],index2:s[1]});for(h in l)f=l[h],p.fromBufferAttribute(y,f.index1),t.push(p.x,p.y,p.z),p.fromBufferAttribute(y,f.index2),t.push(p.x,p.y,p.z)}else for(y=e.attributes.position,r=0,a=y.count/3;r<a;r++)for(n=0;n<3;n++)b=3*r+n,p.fromBufferAttribute(y,b),t.push(p.x,p.y,p.z),O=3*r+(n+1)%3,p.fromBufferAttribute(y,O),t.push(p.x,p.y,p.z)}this.addAttribute("position",new Float32BufferAttribute(t,3))}WireframeGeometry.prototype=Object.create(BufferGeometry.prototype);WireframeGeometry.prototype.constructor=WireframeGeometry;function ParametricGeometry(e,t,r){Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new ParametricBufferGeometry(e,t,r)),this.mergeVertices()}ParametricGeometry.prototype=Object.create(Geometry.prototype);ParametricGeometry.prototype.constructor=ParametricGeometry;function ParametricBufferGeometry(e,t,r){BufferGeometry.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n=[],a=[],o=[],u=[],s=1e-5,l=new Vector3,f=new Vector3,c=new Vector3,d=new Vector3,h=new Vector3,m,p,_=t+1;for(m=0;m<=r;m++){var M=m/r;for(p=0;p<=t;p++){var y=p/t;f=e(y,M,f),a.push(f.x,f.y,f.z),y-s>=0?(c=e(y-s,M,c),d.subVectors(f,c)):(c=e(y+s,M,c),d.subVectors(c,f)),M-s>=0?(c=e(y,M-s,c),h.subVectors(f,c)):(c=e(y,M+s,c),h.subVectors(c,f)),l.crossVectors(d,h).normalize(),o.push(l.x,l.y,l.z),u.push(y,M)}}for(m=0;m<r;m++)for(p=0;p<t;p++){var v=m*_+p,g=m*_+p+1,E=(m+1)*_+p+1,T=(m+1)*_+p;n.push(v,g,T),n.push(g,E,T)}this.setIndex(n),this.addAttribute("position",new Float32BufferAttribute(a,3)),this.addAttribute("normal",new Float32BufferAttribute(o,3)),this.addAttribute("uv",new Float32BufferAttribute(u,2))}ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry;function PolyhedronGeometry(e,t,r,n){Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new PolyhedronBufferGeometry(e,t,r,n)),this.mergeVertices()}PolyhedronGeometry.prototype=Object.create(Geometry.prototype);PolyhedronGeometry.prototype.constructor=PolyhedronGeometry;function PolyhedronBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1,n=n||0;var a=[],o=[];u(n),l(r),f(),this.addAttribute("position",new Float32BufferAttribute(a,3)),this.addAttribute("normal",new Float32BufferAttribute(a.slice(),3)),this.addAttribute("uv",new Float32BufferAttribute(o,2)),this.normalizeNormals();function u(y){for(var v=new Vector3,g=new Vector3,E=new Vector3,T=0;T<t.length;T+=3)h(t[T+0],v),h(t[T+1],g),h(t[T+2],E),s(v,g,E,y)}function s(y,v,g,E){var T=Math.pow(2,E),S=[],b,O;for(b=0;b<=T;b++){S[b]=[];var P=y.clone().lerp(g,b/T),B=v.clone().lerp(g,b/T),V=T-b;for(O=0;O<=V;O++)O===0&&b===T?S[b][O]=P:S[b][O]=P.clone().lerp(B,O/V)}for(b=0;b<T;b++)for(O=0;O<2*(T-b)-1;O++){var R=Math.floor(O/2);O%2==0?(d(S[b][R+1]),d(S[b+1][R]),d(S[b][R])):(d(S[b][R+1]),d(S[b+1][R+1]),d(S[b+1][R]))}}function l(y){for(var v=new Vector3,g=0;g<a.length;g+=3)v.x=a[g+0],v.y=a[g+1],v.z=a[g+2],v.normalize().multiplyScalar(y),a[g+0]=v.x,a[g+1]=v.y,a[g+2]=v.z}function f(){for(var y=new Vector3,v=0;v<a.length;v+=3){y.x=a[v+0],y.y=a[v+1],y.z=a[v+2];var g=_(y)/2/Math.PI+.5,E=M(y)/Math.PI+.5;o.push(g,1-E)}m(),c()}function c(){for(var y=0;y<o.length;y+=6){var v=o[y+0],g=o[y+2],E=o[y+4],T=Math.max(v,g,E),S=Math.min(v,g,E);T>.9&&S<.1&&(v<.2&&(o[y+0]+=1),g<.2&&(o[y+2]+=1),E<.2&&(o[y+4]+=1))}}function d(y){a.push(y.x,y.y,y.z)}function h(y,v){var g=y*3;v.x=e[g+0],v.y=e[g+1],v.z=e[g+2]}function m(){for(var y=new Vector3,v=new Vector3,g=new Vector3,E=new Vector3,T=new Vector2,S=new Vector2,b=new Vector2,O=0,P=0;O<a.length;O+=9,P+=6){y.set(a[O+0],a[O+1],a[O+2]),v.set(a[O+3],a[O+4],a[O+5]),g.set(a[O+6],a[O+7],a[O+8]),T.set(o[P+0],o[P+1]),S.set(o[P+2],o[P+3]),b.set(o[P+4],o[P+5]),E.copy(y).add(v).add(g).divideScalar(3);var B=_(E);p(T,P+0,y,B),p(S,P+2,v,B),p(b,P+4,g,B)}}function p(y,v,g,E){E<0&&y.x===1&&(o[v]=y.x-1),g.x===0&&g.z===0&&(o[v]=E/2/Math.PI+.5)}function _(y){return Math.atan2(y.z,-y.x)}function M(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype);PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry;function TetrahedronGeometry(e,t){Geometry.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new TetrahedronBufferGeometry(e,t)),this.mergeVertices()}TetrahedronGeometry.prototype=Object.create(Geometry.prototype);TetrahedronGeometry.prototype.constructor=TetrahedronGeometry;function TetrahedronBufferGeometry(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];PolyhedronBufferGeometry.call(this,r,n,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry;function OctahedronGeometry(e,t){Geometry.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new OctahedronBufferGeometry(e,t)),this.mergeVertices()}OctahedronGeometry.prototype=Object.create(Geometry.prototype);OctahedronGeometry.prototype.constructor=OctahedronGeometry;function OctahedronBufferGeometry(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];PolyhedronBufferGeometry.call(this,r,n,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry;function IcosahedronGeometry(e,t){Geometry.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IcosahedronBufferGeometry(e,t)),this.mergeVertices()}IcosahedronGeometry.prototype=Object.create(Geometry.prototype);IcosahedronGeometry.prototype.constructor=IcosahedronGeometry;function IcosahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];PolyhedronBufferGeometry.call(this,n,a,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry;function DodecahedronGeometry(e,t){Geometry.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DodecahedronBufferGeometry(e,t)),this.mergeVertices()}DodecahedronGeometry.prototype=Object.create(Geometry.prototype);DodecahedronGeometry.prototype.constructor=DodecahedronGeometry;function DodecahedronBufferGeometry(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];PolyhedronBufferGeometry.call(this,a,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype);DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry;function TubeGeometry(e,t,r,n,a,o){Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:a},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var u=new TubeBufferGeometry(e,t,r,n,a);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals,this.fromBufferGeometry(u),this.mergeVertices()}TubeGeometry.prototype=Object.create(Geometry.prototype);TubeGeometry.prototype.constructor=TubeGeometry;function TubeBufferGeometry(e,t,r,n,a){BufferGeometry.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:a},t=t||64,r=r||1,n=n||8,a=a||!1;var o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var u=new Vector3,s=new Vector3,l=new Vector2,f,c,d=[],h=[],m=[],p=[];_(),this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(d,3)),this.addAttribute("normal",new Float32BufferAttribute(h,3)),this.addAttribute("uv",new Float32BufferAttribute(m,2));function _(){for(f=0;f<t;f++)M(f);M(a===!1?t:0),v(),y()}function M(g){var E=e.getPointAt(g/t),T=o.normals[g],S=o.binormals[g];for(c=0;c<=n;c++){var b=c/n*Math.PI*2,O=Math.sin(b),P=-Math.cos(b);s.x=P*T.x+O*S.x,s.y=P*T.y+O*S.y,s.z=P*T.z+O*S.z,s.normalize(),h.push(s.x,s.y,s.z),u.x=E.x+r*s.x,u.y=E.y+r*s.y,u.z=E.z+r*s.z,d.push(u.x,u.y,u.z)}}function y(){for(c=1;c<=t;c++)for(f=1;f<=n;f++){var g=(n+1)*(c-1)+(f-1),E=(n+1)*c+(f-1),T=(n+1)*c+f,S=(n+1)*(c-1)+f;p.push(g,E,S),p.push(E,T,S)}}function v(){for(f=0;f<=t;f++)for(c=0;c<=n;c++)l.x=f/t,l.y=c/n,m.push(l.x,l.y)}}TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TubeBufferGeometry.prototype.constructor=TubeBufferGeometry;function TorusKnotGeometry(e,t,r,n,a,o,u){Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:a,q:o},u!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new TorusKnotBufferGeometry(e,t,r,n,a,o)),this.mergeVertices()}TorusKnotGeometry.prototype=Object.create(Geometry.prototype);TorusKnotGeometry.prototype.constructor=TorusKnotGeometry;function TorusKnotBufferGeometry(e,t,r,n,a,o){BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:a,q:o},e=e||100,t=t||40,r=Math.floor(r)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var u=[],s=[],l=[],f=[],c,d,h=new Vector3,m=new Vector3,p=new Vector3,_=new Vector3,M=new Vector3,y=new Vector3,v=new Vector3;for(c=0;c<=r;++c){var g=c/r*a*Math.PI*2;for(V(g,a,o,e,p),V(g+.01,a,o,e,_),y.subVectors(_,p),v.addVectors(_,p),M.crossVectors(y,v),v.crossVectors(M,y),M.normalize(),v.normalize(),d=0;d<=n;++d){var E=d/n*Math.PI*2,T=-t*Math.cos(E),S=t*Math.sin(E);h.x=p.x+(T*v.x+S*M.x),h.y=p.y+(T*v.y+S*M.y),h.z=p.z+(T*v.z+S*M.z),s.push(h.x,h.y,h.z),m.subVectors(h,p).normalize(),l.push(m.x,m.y,m.z),f.push(c/r),f.push(d/n)}}for(d=1;d<=r;d++)for(c=1;c<=n;c++){var b=(n+1)*(d-1)+(c-1),O=(n+1)*d+(c-1),P=(n+1)*d+c,B=(n+1)*(d-1)+c;u.push(b,O,B),u.push(O,P,B)}this.setIndex(u),this.addAttribute("position",new Float32BufferAttribute(s,3)),this.addAttribute("normal",new Float32BufferAttribute(l,3)),this.addAttribute("uv",new Float32BufferAttribute(f,2));function V(R,w,H,D,K){var W=Math.cos(R),k=Math.sin(R),J=H/w*R,X=Math.cos(J);K.x=D*(2+X)*.5*W,K.y=D*(2+X)*k*.5,K.z=D*Math.sin(J)*.5}}TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry;function TorusGeometry(e,t,r,n,a){Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:a},this.fromBufferGeometry(new TorusBufferGeometry(e,t,r,n,a)),this.mergeVertices()}TorusGeometry.prototype=Object.create(Geometry.prototype);TorusGeometry.prototype.constructor=TorusGeometry;function TorusBufferGeometry(e,t,r,n,a){BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:a},e=e||100,t=t||40,r=Math.floor(r)||8,n=Math.floor(n)||6,a=a||Math.PI*2;var o=[],u=[],s=[],l=[],f=new Vector3,c=new Vector3,d=new Vector3,h,m;for(h=0;h<=r;h++)for(m=0;m<=n;m++){var p=m/n*a,_=h/r*Math.PI*2;c.x=(e+t*Math.cos(_))*Math.cos(p),c.y=(e+t*Math.cos(_))*Math.sin(p),c.z=t*Math.sin(_),u.push(c.x,c.y,c.z),f.x=e*Math.cos(p),f.y=e*Math.sin(p),d.subVectors(c,f).normalize(),s.push(d.x,d.y,d.z),l.push(m/n),l.push(h/r)}for(h=1;h<=r;h++)for(m=1;m<=n;m++){var M=(n+1)*h+m-1,y=(n+1)*(h-1)+m-1,v=(n+1)*(h-1)+m,g=(n+1)*h+m;o.push(M,y,g),o.push(y,v,g)}this.setIndex(o),this.addAttribute("position",new Float32BufferAttribute(u,3)),this.addAttribute("normal",new Float32BufferAttribute(s,3)),this.addAttribute("uv",new Float32BufferAttribute(l,2))}TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype);TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var ShapeUtils={area:function(e){for(var t=e.length,r=0,n=t-1,a=0;a<t;n=a++)r+=e[n].x*e[a].y-e[a].x*e[n].y;return r*.5},triangulate:function(){function e(t,r,n,a,o,u){var s,l,f,c,d,h,m,p,_;if(l=t[u[r]].x,f=t[u[r]].y,c=t[u[n]].x,d=t[u[n]].y,h=t[u[a]].x,m=t[u[a]].y,(c-l)*(m-f)-(d-f)*(h-l)<=0)return!1;var M,y,v,g,E,T,S,b,O,P,B,V,R,w,H;for(M=h-c,y=m-d,v=l-h,g=f-m,E=c-l,T=d-f,s=0;s<o;s++)if(p=t[u[s]].x,_=t[u[s]].y,!(p===l&&_===f||p===c&&_===d||p===h&&_===m)&&(S=p-l,b=_-f,O=p-c,P=_-d,B=p-h,V=_-m,H=M*P-y*O,R=E*b-T*S,w=v*V-g*B,H>=-Number.EPSILON&&w>=-Number.EPSILON&&R>=-Number.EPSILON))return!1;return!0}return function(r,n){var a=r.length;if(a<3)return null;var o=[],u=[],s=[],l,f,c;if(ShapeUtils.area(r)>0)for(f=0;f<a;f++)u[f]=f;else for(f=0;f<a;f++)u[f]=a-1-f;var d=a,h=2*d;for(f=d-1;d>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?s:o;if(l=f,d<=l&&(l=0),f=l+1,d<=f&&(f=0),c=f+1,d<=c&&(c=0),e(r,l,f,c,d,u)){var m,p,_,M,y;for(m=u[l],p=u[f],_=u[c],o.push([r[m],r[p],r[_]]),s.push([u[l],u[f],u[c]]),M=f,y=f+1;y<d;M++,y++)u[M]=u[y];d--,h=2*d}}return n?s:o}}(),triangulateShape:function(e,t){function r(g){var E=g.length;E>2&&g[E-1].equals(g[0])&&g.pop()}r(e),t.forEach(r);function n(g,E,T){return g.x!==E.x?g.x<E.x?g.x<=T.x&&T.x<=E.x:E.x<=T.x&&T.x<=g.x:g.y<E.y?g.y<=T.y&&T.y<=E.y:E.y<=T.y&&T.y<=g.y}function a(g,E,T,S,b){var O=E.x-g.x,P=E.y-g.y,B=S.x-T.x,V=S.y-T.y,R=g.x-T.x,w=g.y-T.y,H=P*B-O*V,D=P*R-O*w;if(Math.abs(H)>Number.EPSILON){var K;if(H>0){if(D<0||D>H)return[];if(K=V*R-B*w,K<0||K>H)return[]}else{if(D>0||D<H)return[];if(K=V*R-B*w,K>0||K<H)return[]}if(K===0)return b&&(D===0||D===H)?[]:[g];if(K===H)return b&&(D===0||D===H)?[]:[E];if(D===0)return[T];if(D===H)return[S];var W=K/H;return[{x:g.x+W*O,y:g.y+W*P}]}else{if(D!==0||V*R!=B*w)return[];var k=O===0&&P===0,J=B===0&&V===0;if(k&&J)return g.x!==T.x||g.y!==T.y?[]:[g];if(k)return n(T,S,g)?[g]:[];if(J)return n(g,E,T)?[T]:[];var X,I,L,U,G,j,oe,z;return O!==0?(g.x<E.x?(X=g,L=g.x,I=E,U=E.x):(X=E,L=E.x,I=g,U=g.x),T.x<S.x?(G=T,oe=T.x,j=S,z=S.x):(G=S,oe=S.x,j=T,z=T.x)):(g.y<E.y?(X=g,L=g.y,I=E,U=E.y):(X=E,L=E.y,I=g,U=g.y),T.y<S.y?(G=T,oe=T.y,j=S,z=S.y):(G=S,oe=S.y,j=T,z=T.y)),L<=oe?U<oe?[]:U===oe?b?[]:[G]:U<=z?[G,I]:[G,j]:L>z?[]:L===z?b?[]:[X]:U<=z?[X,I]:[X,j]}}function o(g,E,T,S){var b=E.x-g.x,O=E.y-g.y,P=T.x-g.x,B=T.y-g.y,V=S.x-g.x,R=S.y-g.y,w=b*B-O*P,H=b*R-O*V;if(Math.abs(w)>Number.EPSILON){var D=V*B-R*P;return w>0?H>=0&&D>=0:H>=0||D>=0}else return H>0}function u(g,E){var T=g.concat(),S;function b(z,x){var fe=T.length-1,$=z-1;$<0&&($=fe);var ue=z+1;ue>fe&&(ue=0);var Z=o(T[z],T[$],T[ue],S[x]);if(!Z)return!1;var ce=S.length-1,pe=x-1;pe<0&&(pe=ce);var Oe=x+1;return Oe>ce&&(Oe=0),Z=o(S[x],S[pe],S[Oe],T[z]),!!Z}function O(z,x){var fe,$,ue;for(fe=0;fe<T.length;fe++)if($=fe+1,$%=T.length,ue=a(z,x,T[fe],T[$],!0),ue.length>0)return!0;return!1}var P=[];function B(z,x){var fe,$,ue,Z,ce;for(fe=0;fe<P.length;fe++)for($=E[P[fe]],ue=0;ue<$.length;ue++)if(Z=ue+1,Z%=$.length,ce=a(z,x,$[ue],$[Z],!0),ce.length>0)return!0;return!1}for(var V,R,w,H,D,K,W=[],k,J,X,I,L=0,U=E.length;L<U;L++)P.push(L);for(var G=0,j=P.length*2;P.length>0;){if(j--,j<0){console.log("Infinite Loop! Holes left:"+P.length+", Probably Hole outside Shape!");break}for(R=G;R<T.length;R++){w=T[R],V=-1;for(var L=0;L<P.length;L++)if(D=P[L],K=w.x+":"+w.y+":"+D,W[K]===void 0){S=E[D];for(var oe=0;oe<S.length;oe++)if(H=S[oe],!!b(R,oe)&&!O(w,H)&&!B(w,H)){V=oe,P.splice(L,1),k=T.slice(0,R+1),J=T.slice(R),X=S.slice(V),I=S.slice(0,V+1),T=k.concat(X).concat(I).concat(J),G=R;break}if(V>=0)break;W[K]=!0}if(V>=0)break}}return T}for(var s,l,f,c,d,h,m={},p=e.concat(),_=0,M=t.length;_<M;_++)Array.prototype.push.apply(p,t[_]);for(s=0,l=p.length;s<l;s++)d=p[s].x+":"+p[s].y,m[d]!==void 0&&console.warn("THREE.ShapeUtils: Duplicate point",d,s),m[d]=s;var y=u(e,t),v=ShapeUtils.triangulate(y,!1);for(s=0,l=v.length;s<l;s++)for(c=v[s],f=0;f<3;f++)d=c[f].x+":"+c[f].y,h=m[d],h!==void 0&&(c[f]=h);return v.concat()},isClockWise:function(e){return ShapeUtils.area(e)<0}};function ExtrudeGeometry(e,t){Geometry.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ExtrudeBufferGeometry(e,t)),this.mergeVertices()}ExtrudeGeometry.prototype=Object.create(Geometry.prototype);ExtrudeGeometry.prototype.constructor=ExtrudeGeometry;function ExtrudeBufferGeometry(e,t){if(typeof e=="undefined"){e=[];return}BufferGeometry.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals()}ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry;ExtrudeBufferGeometry.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],r=this.getAttribute("uv"),n=r?Array.prototype.slice.call(r.array):[],a=this.index,o=a?Array.prototype.slice.call(a.array):[];return{position:t,uv:n,index:o}};ExtrudeBufferGeometry.prototype.addShapeList=function(e,t){var r=e.length;t.arrays=this.getArrays();for(var n=0;n<r;n++){var a=e[n];this.addShape(a,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Float32BufferAttribute(t.arrays.position,3)),this.addAttribute("uv",new Float32BufferAttribute(t.arrays.uv,2))};ExtrudeBufferGeometry.prototype.addShape=function(e,t){var r=t.arrays?t.arrays:this.getArrays(),n=r.position,a=r.index,o=r.uv,u=[],s=t.amount!==void 0?t.amount:100,l=t.bevelThickness!==void 0?t.bevelThickness:6,f=t.bevelSize!==void 0?t.bevelSize:l-2,c=t.bevelSegments!==void 0?t.bevelSegments:3,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,p=t.extrudePath,_,M=!1,y=t.UVGenerator!==void 0?t.UVGenerator:ExtrudeGeometry.WorldUVGenerator,v,g,E,T;p&&(_=p.getSpacedPoints(m),M=!0,d=!1,v=t.frames!==void 0?t.frames:p.computeFrenetFrames(m,!1),g=new Vector3,E=new Vector3,T=new Vector3),d||(c=0,l=0,f=0);var S,b,O,P=this,B=e.extractPoints(h),V=B.shape,R=B.holes,w=!ShapeUtils.isClockWise(V);if(w){for(V=V.reverse(),b=0,O=R.length;b<O;b++)S=R[b],ShapeUtils.isClockWise(S)&&(R[b]=S.reverse());w=!1}var H=ShapeUtils.triangulateShape(V,R),D=V;for(b=0,O=R.length;b<O;b++)S=R[b],V=V.concat(S);function K(de,he,F){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().multiplyScalar(F).add(de)}var W,k,J,X,I,L=V.length,U,G=H.length;function j(de,he,F){var Q,ae,ge=1,re=de.x-he.x,ve=de.y-he.y,ye=F.x-de.x,Me=F.y-de.y,Ce=re*re+ve*ve,Ae=re*Me-ve*ye;if(Math.abs(Ae)>Number.EPSILON){var Le=Math.sqrt(Ce),De=Math.sqrt(ye*ye+Me*Me),Xe=he.x-ve/Le,Ye=he.y+re/Le,Je=F.x-Me/De,je=F.y+ye/De,ze=((Je-Xe)*Me-(je-Ye)*ye)/(re*Me-ve*ye);Q=Xe+re*ze-de.x,ae=Ye+ve*ze-de.y;var We=Q*Q+ae*ae;if(We<=2)return new Vector2(Q,ae);ge=Math.sqrt(We/2)}else{var Ge=!1;re>Number.EPSILON?ye>Number.EPSILON&&(Ge=!0):re<-Number.EPSILON?ye<-Number.EPSILON&&(Ge=!0):Math.sign(ve)===Math.sign(Me)&&(Ge=!0),Ge?(Q=-ve,ae=re,ge=Math.sqrt(Ce)):(Q=re,ae=ve,ge=Math.sqrt(Ce/2))}return new Vector2(Q/ge,ae/ge)}for(var oe=[],z=0,x=D.length,fe=x-1,$=z+1;z<x;z++,fe++,$++)fe===x&&(fe=0),$===x&&($=0),oe[z]=j(D[z],D[fe],D[$]);var ue=[],Z,ce=oe.concat();for(b=0,O=R.length;b<O;b++){for(S=R[b],Z=[],z=0,x=S.length,fe=x-1,$=z+1;z<x;z++,fe++,$++)fe===x&&(fe=0),$===x&&($=0),Z[z]=j(S[z],S[fe],S[$]);ue.push(Z),ce=ce.concat(Z)}for(W=0;W<c;W++){for(J=W/c,X=l*Math.cos(J*Math.PI/2),k=f*Math.sin(J*Math.PI/2),z=0,x=D.length;z<x;z++)I=K(D[z],oe[z],k),we(I.x,I.y,-X);for(b=0,O=R.length;b<O;b++)for(S=R[b],Z=ue[b],z=0,x=S.length;z<x;z++)I=K(S[z],Z[z],k),we(I.x,I.y,-X)}for(k=f,z=0;z<L;z++)I=d?K(V[z],ce[z],k):V[z],M?(E.copy(v.normals[0]).multiplyScalar(I.x),g.copy(v.binormals[0]).multiplyScalar(I.y),T.copy(_[0]).add(E).add(g),we(T.x,T.y,T.z)):we(I.x,I.y,0);var pe;for(pe=1;pe<=m;pe++)for(z=0;z<L;z++)I=d?K(V[z],ce[z],k):V[z],M?(E.copy(v.normals[pe]).multiplyScalar(I.x),g.copy(v.binormals[pe]).multiplyScalar(I.y),T.copy(_[pe]).add(E).add(g),we(T.x,T.y,T.z)):we(I.x,I.y,s/m*pe);for(W=c-1;W>=0;W--){for(J=W/c,X=l*Math.cos(J*Math.PI/2),k=f*Math.sin(J*Math.PI/2),z=0,x=D.length;z<x;z++)I=K(D[z],oe[z],k),we(I.x,I.y,s+X);for(b=0,O=R.length;b<O;b++)for(S=R[b],Z=ue[b],z=0,x=S.length;z<x;z++)I=K(S[z],Z[z],k),M?we(I.x,I.y+_[m-1].y,_[m-1].x+X):we(I.x,I.y,s+X)}Oe(),Fe();function Oe(){var de=n.length/3;if(d){var he=0,F=L*he;for(z=0;z<G;z++)U=H[z],Ne(U[2]+F,U[1]+F,U[0]+F);for(he=m+c*2,F=L*he,z=0;z<G;z++)U=H[z],Ne(U[0]+F,U[1]+F,U[2]+F)}else{for(z=0;z<G;z++)U=H[z],Ne(U[2],U[1],U[0]);for(z=0;z<G;z++)U=H[z],Ne(U[0]+L*m,U[1]+L*m,U[2]+L*m)}P.addGroup(de,n.length/3-de,t.material!==void 0?t.material:0)}function Fe(){var de=n.length/3,he=0;for(Ie(D,he),he+=D.length,b=0,O=R.length;b<O;b++)S=R[b],Ie(S,he),he+=S.length;P.addGroup(de,n.length/3-de,t.extrudeMaterial!==void 0?t.extrudeMaterial:1)}function Ie(de,he){var F,Q;for(z=de.length;--z>=0;){F=z,Q=z-1,Q<0&&(Q=de.length-1);var ae=0,ge=m+c*2;for(ae=0;ae<ge;ae++){var re=L*ae,ve=L*(ae+1),ye=he+F+re,Me=he+Q+re,Ce=he+Q+ve,Ae=he+F+ve;Ue(ye,Me,Ce,Ae)}}}function we(de,he,F){u.push(de),u.push(he),u.push(F)}function Ne(de,he,F){Re(de),Re(he),Re(F);var Q=n.length/3,ae=y.generateTopUV(P,n,Q-3,Q-2,Q-1);be(ae[0]),be(ae[1]),be(ae[2])}function Ue(de,he,F,Q,ae,ge,re,ve,ye){Re(de),Re(he),Re(Q),Re(he),Re(F),Re(Q);var Me=n.length/3,Ce=y.generateSideWallUV(P,n,Me-6,Me-3,Me-2,Me-1);be(Ce[0]),be(Ce[1]),be(Ce[3]),be(Ce[1]),be(Ce[2]),be(Ce[3])}function Re(de){a.push(n.length/3),n.push(u[de*3+0]),n.push(u[de*3+1]),n.push(u[de*3+2])}function be(de){o.push(de.x),o.push(de.y)}t.arrays||(this.setIndex(a),this.addAttribute("position",new Float32BufferAttribute(n,3)),this.addAttribute("uv",new Float32BufferAttribute(t.arrays.uv,2)))};ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,n,a){var o=t[r*3],u=t[r*3+1],s=t[n*3],l=t[n*3+1],f=t[a*3],c=t[a*3+1];return[new Vector2(o,u),new Vector2(s,l),new Vector2(f,c)]},generateSideWallUV:function(e,t,r,n,a,o){var u=t[r*3],s=t[r*3+1],l=t[r*3+2],f=t[n*3],c=t[n*3+1],d=t[n*3+2],h=t[a*3],m=t[a*3+1],p=t[a*3+2],_=t[o*3],M=t[o*3+1],y=t[o*3+2];return Math.abs(s-c)<.01?[new Vector2(u,1-l),new Vector2(f,1-d),new Vector2(h,1-p),new Vector2(_,1-y)]:[new Vector2(s,1-l),new Vector2(c,1-d),new Vector2(m,1-p),new Vector2(M,1-y)]}};function TextGeometry(e,t){Geometry.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new TextBufferGeometry(e,t)),this.mergeVertices()}TextGeometry.prototype=Object.create(Geometry.prototype);TextGeometry.prototype.constructor=TextGeometry;function TextBufferGeometry(e,t){t=t||{};var r=t.font;if((r&&r.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Geometry;var n=r.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,n,t),this.type="TextBufferGeometry"}TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype);TextBufferGeometry.prototype.constructor=TextBufferGeometry;function SphereGeometry(e,t,r,n,a,o,u){Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:a,thetaStart:o,thetaLength:u},this.fromBufferGeometry(new SphereBufferGeometry(e,t,r,n,a,o,u)),this.mergeVertices()}SphereGeometry.prototype=Object.create(Geometry.prototype);SphereGeometry.prototype.constructor=SphereGeometry;function SphereBufferGeometry(e,t,r,n,a,o,u){BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:a,thetaStart:o,thetaLength:u},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=n!==void 0?n:0,a=a!==void 0?a:Math.PI*2,o=o!==void 0?o:0,u=u!==void 0?u:Math.PI;var s=o+u,l,f,c=0,d=[],h=new Vector3,m=new Vector3,p=[],_=[],M=[],y=[];for(f=0;f<=r;f++){var v=[],g=f/r;for(l=0;l<=t;l++){var E=l/t;h.x=-e*Math.cos(n+E*a)*Math.sin(o+g*u),h.y=e*Math.cos(o+g*u),h.z=e*Math.sin(n+E*a)*Math.sin(o+g*u),_.push(h.x,h.y,h.z),m.set(h.x,h.y,h.z).normalize(),M.push(m.x,m.y,m.z),y.push(E,1-g),v.push(c++)}d.push(v)}for(f=0;f<r;f++)for(l=0;l<t;l++){var T=d[f][l+1],S=d[f][l],b=d[f+1][l],O=d[f+1][l+1];(f!==0||o>0)&&p.push(T,S,O),(f!==r-1||s<Math.PI)&&p.push(S,b,O)}this.setIndex(p),this.addAttribute("position",new Float32BufferAttribute(_,3)),this.addAttribute("normal",new Float32BufferAttribute(M,3)),this.addAttribute("uv",new Float32BufferAttribute(y,2))}SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype);SphereBufferGeometry.prototype.constructor=SphereBufferGeometry;function RingGeometry(e,t,r,n,a,o){Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new RingBufferGeometry(e,t,r,n,a,o)),this.mergeVertices()}RingGeometry.prototype=Object.create(Geometry.prototype);RingGeometry.prototype.constructor=RingGeometry;function RingBufferGeometry(e,t,r,n,a,o){BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:a,thetaLength:o},e=e||20,t=t||50,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,r=r!==void 0?Math.max(3,r):8,n=n!==void 0?Math.max(1,n):1;var u=[],s=[],l=[],f=[],c,d=e,h=(t-e)/n,m=new Vector3,p=new Vector2,_,M;for(_=0;_<=n;_++){for(M=0;M<=r;M++)c=a+M/r*o,m.x=d*Math.cos(c),m.y=d*Math.sin(c),s.push(m.x,m.y,m.z),l.push(0,0,1),p.x=(m.x/t+1)/2,p.y=(m.y/t+1)/2,f.push(p.x,p.y);d+=h}for(_=0;_<n;_++){var y=_*(r+1);for(M=0;M<r;M++){c=M+y;var v=c,g=c+r+1,E=c+r+2,T=c+1;u.push(v,g,T),u.push(g,E,T)}}this.setIndex(u),this.addAttribute("position",new Float32BufferAttribute(s,3)),this.addAttribute("normal",new Float32BufferAttribute(l,3)),this.addAttribute("uv",new Float32BufferAttribute(f,2))}RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype);RingBufferGeometry.prototype.constructor=RingBufferGeometry;function LatheGeometry(e,t,r,n){Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new LatheBufferGeometry(e,t,r,n)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype);LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||Math.PI*2,n=_Math.clamp(n,0,Math.PI*2);var a=[],o=[],u=[],s,l=1/t,f=new Vector3,c=new Vector2,d,h;for(d=0;d<=t;d++){var m=r+d*l*n,p=Math.sin(m),_=Math.cos(m);for(h=0;h<=e.length-1;h++)f.x=e[h].x*p,f.y=e[h].y,f.z=e[h].x*_,o.push(f.x,f.y,f.z),c.x=d/t,c.y=h/(e.length-1),u.push(c.x,c.y)}for(d=0;d<t;d++)for(h=0;h<e.length-1;h++){s=h+d*e.length;var M=s,y=s+e.length,v=s+e.length+1,g=s+1;a.push(M,y,g),a.push(y,v,g)}if(this.setIndex(a),this.addAttribute("position",new Float32BufferAttribute(o,3)),this.addAttribute("uv",new Float32BufferAttribute(u,2)),this.computeVertexNormals(),n===Math.PI*2){var E=this.attributes.normal.array,T=new Vector3,S=new Vector3,b=new Vector3;for(s=t*e.length*3,d=0,h=0;d<e.length;d++,h+=3)T.x=E[h+0],T.y=E[h+1],T.z=E[h+2],S.x=E[s+h+0],S.y=E[s+h+1],S.z=E[s+h+2],b.addVectors(T,S).normalize(),E[h+0]=E[s+h+0]=b.x,E[h+1]=E[s+h+1]=b.y,E[h+2]=E[s+h+2]=b.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype);LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;function ShapeGeometry(e,t){Geometry.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ShapeBufferGeometry(e,t)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype);ShapeGeometry.prototype.constructor=ShapeGeometry;function ShapeBufferGeometry(e,t){BufferGeometry.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],a=[],o=[],u=0,s=0;if(Array.isArray(e)===!1)f(e);else for(var l=0;l<e.length;l++)f(e[l]),this.addGroup(u,s,l),u+=s,s=0;this.setIndex(r),this.addAttribute("position",new Float32BufferAttribute(n,3)),this.addAttribute("normal",new Float32BufferAttribute(a,3)),this.addAttribute("uv",new Float32BufferAttribute(o,2));function f(c){var d,h,m,p=n.length/3,_=c.extractPoints(t),M=_.shape,y=_.holes;if(ShapeUtils.isClockWise(M)===!1)for(M=M.reverse(),d=0,h=y.length;d<h;d++)m=y[d],ShapeUtils.isClockWise(m)===!0&&(y[d]=m.reverse());var v=ShapeUtils.triangulateShape(M,y);for(d=0,h=y.length;d<h;d++)m=y[d],M=M.concat(m);for(d=0,h=M.length;d<h;d++){var g=M[d];n.push(g.x,g.y,0),a.push(0,0,1),o.push(g.x,g.y)}for(d=0,h=v.length;d<h;d++){var E=v[d],T=E[0]+p,S=E[1]+p,b=E[2]+p;r.push(T,S,b),s+=3}}}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype);ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;function EdgesGeometry(e,t){BufferGeometry.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;var r=[],n=Math.cos(_Math.DEG2RAD*t),a=[0,0],o={},u,s,l,f=["a","b","c"],c;e.isBufferGeometry?(c=new Geometry,c.fromBufferGeometry(e)):c=e.clone(),c.mergeVertices(),c.computeFaceNormals();for(var d=c.vertices,h=c.faces,m=0,p=h.length;m<p;m++)for(var _=h[m],M=0;M<3;M++)u=_[f[M]],s=_[f[(M+1)%3]],a[0]=Math.min(u,s),a[1]=Math.max(u,s),l=a[0]+","+a[1],o[l]===void 0?o[l]={index1:a[0],index2:a[1],face1:m,face2:void 0}:o[l].face2=m;for(l in o){var y=o[l];if(y.face2===void 0||h[y.face1].normal.dot(h[y.face2].normal)<=n){var v=d[y.index1];r.push(v.x,v.y,v.z),v=d[y.index2],r.push(v.x,v.y,v.z)}}this.addAttribute("position",new Float32BufferAttribute(r,3))}EdgesGeometry.prototype=Object.create(BufferGeometry.prototype);EdgesGeometry.prototype.constructor=EdgesGeometry;function CylinderGeometry(e,t,r,n,a,o,u,s){Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:s},this.fromBufferGeometry(new CylinderBufferGeometry(e,t,r,n,a,o,u,s)),this.mergeVertices()}CylinderGeometry.prototype=Object.create(Geometry.prototype);CylinderGeometry.prototype.constructor=CylinderGeometry;function CylinderBufferGeometry(e,t,r,n,a,o,u,s){BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:s};var l=this;e=e!==void 0?e:20,t=t!==void 0?t:20,r=r!==void 0?r:100,n=Math.floor(n)||8,a=Math.floor(a)||1,o=o!==void 0?o:!1,u=u!==void 0?u:0,s=s!==void 0?s:2*Math.PI;var f=[],c=[],d=[],h=[],m=0,p=[],_=r/2,M=0;y(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(f),this.addAttribute("position",new Float32BufferAttribute(c,3)),this.addAttribute("normal",new Float32BufferAttribute(d,3)),this.addAttribute("uv",new Float32BufferAttribute(h,2));function y(){var g,E,T=new Vector3,S=new Vector3,b=0,O=(t-e)/r;for(E=0;E<=a;E++){var P=[],B=E/a,V=B*(t-e)+e;for(g=0;g<=n;g++){var R=g/n,w=R*s+u,H=Math.sin(w),D=Math.cos(w);S.x=V*H,S.y=-B*r+_,S.z=V*D,c.push(S.x,S.y,S.z),T.set(H,O,D).normalize(),d.push(T.x,T.y,T.z),h.push(R,1-B),P.push(m++)}p.push(P)}for(g=0;g<n;g++)for(E=0;E<a;E++){var K=p[E][g],W=p[E+1][g],k=p[E+1][g+1],J=p[E][g+1];f.push(K,W,J),f.push(W,k,J),b+=6}l.addGroup(M,b,0),M+=b}function v(g){var E,T,S,b=new Vector2,O=new Vector3,P=0,B=g===!0?e:t,V=g===!0?1:-1;for(T=m,E=1;E<=n;E++)c.push(0,_*V,0),d.push(0,V,0),h.push(.5,.5),m++;for(S=m,E=0;E<=n;E++){var R=E/n,w=R*s+u,H=Math.cos(w),D=Math.sin(w);O.x=B*D,O.y=_*V,O.z=B*H,c.push(O.x,O.y,O.z),d.push(0,V,0),b.x=H*.5+.5,b.y=D*.5*V+.5,h.push(b.x,b.y),m++}for(E=0;E<n;E++){var K=T+E,W=S+E;g===!0?f.push(W,W+1,K):f.push(W+1,W,K),P+=3}l.addGroup(M,P,g===!0?1:2),M+=P}}CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry;function ConeGeometry(e,t,r,n,a,o,u){CylinderGeometry.call(this,0,e,t,r,n,a,o,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:u}}ConeGeometry.prototype=Object.create(CylinderGeometry.prototype);ConeGeometry.prototype.constructor=ConeGeometry;function ConeBufferGeometry(e,t,r,n,a,o,u){CylinderBufferGeometry.call(this,0,e,t,r,n,a,o,u),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:u}}ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype);ConeBufferGeometry.prototype.constructor=ConeBufferGeometry;function CircleGeometry(e,t,r,n){Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new CircleBufferGeometry(e,t,r,n)),this.mergeVertices()}CircleGeometry.prototype=Object.create(Geometry.prototype);CircleGeometry.prototype.constructor=CircleGeometry;function CircleBufferGeometry(e,t,r,n){BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||50,t=t!==void 0?Math.max(3,t):8,r=r!==void 0?r:0,n=n!==void 0?n:Math.PI*2;var a=[],o=[],u=[],s=[],l,f,c=new Vector3,d=new Vector2;for(o.push(0,0,0),u.push(0,0,1),s.push(.5,.5),f=0,l=3;f<=t;f++,l+=3){var h=r+f/t*n;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),u.push(0,0,1),d.x=(o[l]/e+1)/2,d.y=(o[l+1]/e+1)/2,s.push(d.x,d.y)}for(l=1;l<=t;l++)a.push(l,l+1,0);this.setIndex(a),this.addAttribute("position",new Float32BufferAttribute(o,3)),this.addAttribute("normal",new Float32BufferAttribute(u,3)),this.addAttribute("uv",new Float32BufferAttribute(s,2))}CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype);CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var Geometries=Object.freeze({WireframeGeometry,ParametricGeometry,ParametricBufferGeometry,TetrahedronGeometry,TetrahedronBufferGeometry,OctahedronGeometry,OctahedronBufferGeometry,IcosahedronGeometry,IcosahedronBufferGeometry,DodecahedronGeometry,DodecahedronBufferGeometry,PolyhedronGeometry,PolyhedronBufferGeometry,TubeGeometry,TubeBufferGeometry,TorusKnotGeometry,TorusKnotBufferGeometry,TorusGeometry,TorusBufferGeometry,TextGeometry,TextBufferGeometry,SphereGeometry,SphereBufferGeometry,RingGeometry,RingBufferGeometry,PlaneGeometry,PlaneBufferGeometry,LatheGeometry,LatheBufferGeometry,ShapeGeometry,ShapeBufferGeometry,ExtrudeGeometry,ExtrudeBufferGeometry,EdgesGeometry,ConeGeometry,ConeBufferGeometry,CylinderGeometry,CylinderBufferGeometry,CircleGeometry,CircleBufferGeometry,BoxGeometry,BoxBufferGeometry});function ShadowMaterial(e){ShaderMaterial.call(this,{uniforms:UniformsUtils.merge([UniformsLib.lights,{opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}}),this.setValues(e)}ShadowMaterial.prototype=Object.create(ShaderMaterial.prototype);ShadowMaterial.prototype.constructor=ShadowMaterial;ShadowMaterial.prototype.isShadowMaterial=!0;function RawShaderMaterial(e){ShaderMaterial.call(this,e),this.type="RawShaderMaterial"}RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype);RawShaderMaterial.prototype.constructor=RawShaderMaterial;RawShaderMaterial.prototype.isRawShaderMaterial=!0;function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}MeshStandardMaterial.prototype=Object.create(Material.prototype);MeshStandardMaterial.prototype.constructor=MeshStandardMaterial;MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype);MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial;MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this};function MeshPhongMaterial(e){Material.call(this),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}MeshPhongMaterial.prototype=Object.create(Material.prototype);MeshPhongMaterial.prototype.constructor=MeshPhongMaterial;MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;MeshPhongMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function MeshToonMaterial(e){MeshPhongMaterial.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}MeshToonMaterial.prototype=Object.create(MeshPhongMaterial.prototype);MeshToonMaterial.prototype.constructor=MeshToonMaterial;MeshToonMaterial.prototype.isMeshToonMaterial=!0;MeshToonMaterial.prototype.copy=function(e){return MeshPhongMaterial.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};function MeshNormalMaterial(e){Material.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}MeshNormalMaterial.prototype=Object.create(Material.prototype);MeshNormalMaterial.prototype.constructor=MeshNormalMaterial;MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;MeshNormalMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function MeshLambertMaterial(e){Material.call(this),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}MeshLambertMaterial.prototype=Object.create(Material.prototype);MeshLambertMaterial.prototype.constructor=MeshLambertMaterial;MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;MeshLambertMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function LineDashedMaterial(e){Material.call(this),this.type="LineDashedMaterial",this.color=new Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}LineDashedMaterial.prototype=Object.create(Material.prototype);LineDashedMaterial.prototype.constructor=LineDashedMaterial;LineDashedMaterial.prototype.isLineDashedMaterial=!0;LineDashedMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Materials=Object.freeze({ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshBasicMaterial,LineDashedMaterial,LineBasicMaterial,Material}),Cache={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function LoadingManager(e,t,r){var n=this,a=!1,o=0,u=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(s){u++,a===!1&&n.onStart!==void 0&&n.onStart(s,o,u),a=!0},this.itemEnd=function(s){o++,n.onProgress!==void 0&&n.onProgress(s,o,u),o===u&&(a=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(s){n.onError!==void 0&&n.onError(s)}}var DefaultLoadingManager=new LoadingManager;function FileLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(FileLoader.prototype,{load:function(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e);var a=this,o=Cache.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var u=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(u);if(s){var l=s[1],f=!!s[2],c=s[3];c=window.decodeURIComponent(c),f&&(c=window.atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":d=new ArrayBuffer(c.length);for(var m=new Uint8Array(d),p=0;p<c.length;p++)m[p]=c.charCodeAt(p);h==="blob"&&(d=new Blob([d],{type:l}));break;case"document":var _=new DOMParser;d=_.parseFromString(c,l);break;case"json":d=JSON.parse(c);break;default:d=c;break}window.setTimeout(function(){t&&t(d),a.manager.itemEnd(e)},0)}catch(v){window.setTimeout(function(){n&&n(v),a.manager.itemEnd(e),a.manager.itemError(e)},0)}}else{var M=new XMLHttpRequest;M.open("GET",e,!0),M.addEventListener("load",function(v){var g=v.target.response;Cache.add(e,g),this.status===200?(t&&t(g),a.manager.itemEnd(e)):this.status===0?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(g),a.manager.itemEnd(e)):(n&&n(v),a.manager.itemEnd(e),a.manager.itemError(e))},!1),r!==void 0&&M.addEventListener("progress",function(v){r(v)},!1),M.addEventListener("error",function(v){n&&n(v),a.manager.itemEnd(e),a.manager.itemError(e)},!1),this.responseType!==void 0&&(M.responseType=this.responseType),this.withCredentials!==void 0&&(M.withCredentials=this.withCredentials),M.overrideMimeType&&M.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var y in this.requestHeader)M.setRequestHeader(y,this.requestHeader[y]);M.send(null)}return a.manager.itemStart(e),M},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});function CompressedTextureLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager,this._parser=null}Object.assign(CompressedTextureLoader.prototype,{load:function(e,t,r,n){var a=this,o=[],u=new CompressedTexture;u.image=o;var s=new FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer");function l(h){s.load(e[h],function(m){var p=a._parser(m,!0);o[h]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},f+=1,f===6&&(p.mipmapCount===1&&(u.minFilter=LinearFilter),u.format=p.format,u.needsUpdate=!0,t&&t(u))},r,n)}if(Array.isArray(e))for(var f=0,c=0,d=e.length;c<d;++c)l(c);else s.load(e,function(h){var m=a._parser(h,!0);if(m.isCubemap)for(var p=m.mipmaps.length/m.mipmapCount,_=0;_<p;_++){o[_]={mipmaps:[]};for(var M=0;M<m.mipmapCount;M++)o[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+M]),o[_].format=m.format,o[_].width=m.width,o[_].height=m.height}else u.image.width=m.width,u.image.height=m.height,u.mipmaps=m.mipmaps;m.mipmapCount===1&&(u.minFilter=LinearFilter),u.format=m.format,u.needsUpdate=!0,t&&t(u)},r,n);return u},setPath:function(e){return this.path=e,this}});function DataTextureLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager,this._parser=null}Object.assign(DataTextureLoader.prototype,{load:function(e,t,r,n){var a=this,o=new DataTexture,u=new FileLoader(this.manager);return u.setResponseType("arraybuffer"),u.load(e,function(s){var l=a._parser(s);!l||(l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:ClampToEdgeWrapping,o.wrapT=l.wrapT!==void 0?l.wrapT:ClampToEdgeWrapping,o.magFilter=l.magFilter!==void 0?l.magFilter:LinearFilter,o.minFilter=l.minFilter!==void 0?l.minFilter:LinearMipMapLinearFilter,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps),l.mipmapCount===1&&(o.minFilter=LinearFilter),o.needsUpdate=!0,t&&t(o,l))},r,n),o}});function ImageLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(ImageLoader.prototype,{load:function(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e);var a=this,o=Cache.get(e);if(o!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",function(){Cache.add(e,this),t&&t(this),a.manager.itemEnd(e)},!1),u.addEventListener("error",function(s){n&&n(s),a.manager.itemEnd(e),a.manager.itemError(e)},!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),a.manager.itemStart(e),u.src=e,u},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function CubeTextureLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(CubeTextureLoader.prototype,{load:function(e,t,r,n){var a=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var u=0;function s(f){o.load(e[f],function(c){a.images[f]=c,u++,u===6&&(a.needsUpdate=!0,t&&t(a))},void 0,n)}for(var l=0;l<e.length;++l)s(l);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function TextureLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(TextureLoader.prototype,{load:function(e,t,r,n){var a=new ImageLoader(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=new Texture;return o.image=a.load(e,function(){var u=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;o.format=u?RGBFormat:RGBAFormat,o.needsUpdate=!0,t!==void 0&&t(o)},r,n),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function Light(e,t){Object3D.call(this),this.type="Light",this.color=new Color(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function HemisphereLight(e,t,r){Light.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function LightShadow(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.matrix=new Matrix4}Object.assign(LightShadow.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=_Math.RAD2DEG*2*e.angle,n=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||n!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=n,t.far=a,t.updateProjectionMatrix())}});function SpotLight(e,t,r,n,a,o){Light.call(this,e,t),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(u){this.intensity=u/Math.PI}}),this.distance=r!==void 0?r:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=a!==void 0?a:0,this.decay=o!==void 0?o:1,this.shadow=new SpotLightShadow}SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function PointLight(e,t,r,n){Light.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}}),this.distance=r!==void 0?r:0,this.decay=n!==void 0?n:1,this.shadow=new LightShadow(new PerspectiveCamera(90,1,.5,500))}PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow});function DirectionalLight(e,t){Light.call(this,e,t),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function AmbientLight(e,t){Light.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0});function RectAreaLight(e,t,r,n){Light.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=r!==void 0?r:10,this.height=n!==void 0?n:10}RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Light.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var AnimationUtils={arraySlice:function(e,t,r){return AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(o,u){return e[o]-e[u]}for(var r=e.length,n=new Array(r),a=0;a!==r;++a)n[a]=a;return n.sort(t),n},sortedArray:function(e,t,r){for(var n=e.length,a=new e.constructor(n),o=0,u=0;u!==n;++o)for(var s=r[o]*t,l=0;l!==t;++l)a[u++]=e[s+l];return a},flattenJSON:function(e,t,r,n){for(var a=1,o=e[0];o!==void 0&&o[n]===void 0;)o=e[a++];if(o!==void 0){var u=o[n];if(u!==void 0)if(Array.isArray(u))do u=o[n],u!==void 0&&(t.push(o.time),r.push.apply(r,u)),o=e[a++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[n],u!==void 0&&(t.push(o.time),u.toArray(r,r.length)),o=e[a++];while(o!==void 0);else do u=o[n],u!==void 0&&(t.push(o.time),r.push(u)),o=e[a++];while(o!==void 0)}}};function Interpolant(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}Object.assign(Interpolant.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],a=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var u=r+2;;){if(n===void 0){if(e<a)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,a)}if(r===u)break;if(a=n,n=t[++r],e<n)break t}o=t.length;break r}if(!(e>=a)){var s=t[1];e<s&&(r=2,a=s);for(var u=r-2;;){if(a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===u)break;if(n=a,a=t[--r-1],e>=a)break t}o=r,r=0;break r}break e}for(;r<o;){var l=r+o>>>1;e<t[l]?o=l:r=l+1}if(n=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(n===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,a,e)}this._cachedIndex=r,this.intervalChanged_(r,a,n)}return this.interpolate_(r,a,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n,o=0;o!==n;++o)t[o]=r[a+o];return t},interpolate_:function(e,t,r,n){throw new Error("call to abstract method")},intervalChanged_:function(e,t,r){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_});function CubicInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},intervalChanged_:function(e,t,r){var n=this.parameterPositions,a=e-2,o=e+1,u=n[a],s=n[o];if(u===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:a=e,u=2*t-r;break;case WrapAroundEnding:a=n.length-2,u=t+n[a]-n[a+1];break;default:a=e,u=r}if(s===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:o=e,s=2*r-t;break;case WrapAroundEnding:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t}var l=(r-t)*.5,f=this.valueSize;this._weightPrev=l/(t-u),this._weightNext=l/(s-r),this._offsetPrev=a*f,this._offsetNext=o*f},interpolate_:function(e,t,r,n){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,s=e*u,l=s-u,f=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(r-t)/(n-t),p=m*m,_=p*m,M=-d*_+2*d*p-d*m,y=(1+d)*_+(-1.5-2*d)*p+(-.5+d)*m+1,v=(-1-h)*_+(1.5+h)*p+.5*m,g=h*_-h*p,E=0;E!==u;++E)a[E]=M*o[f+E]+y*o[l+E]+v*o[s+E]+g*o[c+E];return a}});function LinearInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,t,r,n){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,s=e*u,l=s-u,f=(r-t)/(n-t),c=1-f,d=0;d!==u;++d)a[d]=o[l+d]*c+o[s+d]*f;return a}});function DiscreteInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e,t,r,n){return this.copySampleValue_(e-1)}});var KeyframeTrackPrototype;KeyframeTrackPrototype={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodDiscrete:function(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);console.warn(r);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,a=0,o=n-1;a!==n&&r[a]<e;)++a;for(;o!==-1&&r[o]>t;)--o;if(++o,a!==0||o!==n){a>=o&&(o=Math.max(o,1),a=o-1);var u=this.getValueSize();this.times=AnimationUtils.arraySlice(r,a,o),this.values=AnimationUtils.arraySlice(this.values,a*u,o*u)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,n=this.values,a=r.length;a===0&&(console.error("track is empty",this),e=!1);for(var o=null,u=0;u!==a;u++){var s=r[u];if(typeof s=="number"&&isNaN(s)){console.error("time is not a valid number",this,u,s),e=!1;break}if(o!==null&&o>s){console.error("out of order keys",this,u,s,o),e=!1;break}o=s}if(n!==void 0&&AnimationUtils.isTypedArray(n))for(var u=0,l=n.length;u!==l;++u){var f=n[u];if(isNaN(f)){console.error("value is not a valid number",this,u,f),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=this.getInterpolation()===InterpolateSmooth,a=1,o=e.length-1,u=1;u<o;++u){var s=!1,l=e[u],f=e[u+1];if(l!==f&&(u!==1||l!==l[0]))if(n)s=!0;else for(var c=u*r,d=c-r,h=c+r,m=0;m!==r;++m){var p=t[c+m];if(p!==t[d+m]||p!==t[h+m]){s=!0;break}}if(s){if(u!==a){e[a]=e[u];for(var _=u*r,M=a*r,m=0;m!==r;++m)t[M+m]=t[_+m]}++a}}if(o>0){e[a]=e[o];for(var _=o*r,M=a*r,m=0;m!==r;++m)t[M+m]=t[_+m];++a}return a!==e.length&&(this.times=AnimationUtils.arraySlice(e,0,a),this.values=AnimationUtils.arraySlice(t,0,a*r)),this}};function KeyframeTrackConstructor(e,t,r,n){if(e===void 0)throw new Error("track name is undefined");if(t===void 0||t.length===0)throw new Error("no keyframes in track named "+e);this.name=e,this.times=AnimationUtils.convertArray(t,this.TimeBufferType),this.values=AnimationUtils.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function VectorKeyframeTrack(e,t,r,n){KeyframeTrackConstructor.call(this,e,t,r,n)}VectorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"});function QuaternionLinearInterpolant(e,t,r,n){Interpolant.call(this,e,t,r,n)}QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,t,r,n){for(var a=this.resultBuffer,o=this.sampleValues,u=this.valueSize,s=e*u,l=(r-t)/(n-t),f=s+u;s!==f;s+=4)Quaternion.slerpFlat(a,0,o,s-u,o,s,l);return a}});function QuaternionKeyframeTrack(e,t,r,n){KeyframeTrackConstructor.call(this,e,t,r,n)}QuaternionKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:InterpolateLinear,InterpolantFactoryMethodLinear:function(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function NumberKeyframeTrack(e,t,r,n){KeyframeTrackConstructor.call(this,e,t,r,n)}NumberKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"});function StringKeyframeTrack(e,t,r,n){KeyframeTrackConstructor.call(this,e,t,r,n)}StringKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function BooleanKeyframeTrack(e,t,r){KeyframeTrackConstructor.call(this,e,t,r)}BooleanKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ColorKeyframeTrack(e,t,r,n){KeyframeTrackConstructor.call(this,e,t,r,n)}ColorKeyframeTrack.prototype=Object.assign(Object.create(KeyframeTrackPrototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"});function KeyframeTrack(e,t,r,n){KeyframeTrackConstructor.apply(this,arguments)}KeyframeTrack.prototype=KeyframeTrackPrototype;KeyframeTrackPrototype.constructor=KeyframeTrack;Object.assign(KeyframeTrack,{parse:function(e){if(e.type===void 0)throw new Error("track type undefined, can not parse");var t=KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(e.times===void 0){var r=[],n=[];AnimationUtils.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor,r;if(t.toJSON!==void 0)r=t.toJSON(e);else{r={name:e.name,times:AnimationUtils.convertArray(e.times,Array),values:AnimationUtils.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("Unsupported typeName: "+e)}});function AnimationClip(e,t,r){this.name=e,this.tracks=r,this.duration=t!==void 0?t:-1,this.uuid=_Math.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}Object.assign(AnimationClip,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),a=0,o=r.length;a!==o;++a)t.push(KeyframeTrack.parse(r[a]).scale(n));return new AnimationClip(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t},a=0,o=r.length;a!==o;++a)t.push(KeyframeTrack.toJSON(r[a]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var a=t.length,o=[],u=0;u<a;u++){var s=[],l=[];s.push((u+a-1)%a,u,(u+1)%a),l.push(0,1,0);var f=AnimationUtils.getKeyframeOrder(s);s=AnimationUtils.sortedArray(s,1,f),l=AnimationUtils.sortedArray(l,1,f),!n&&s[0]===0&&(s.push(a),l.push(l[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[u].name+"]",s,l).scale(1/r))}return new AnimationClip(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var a=0;a<r.length;a++)if(r[a].name===t)return r[a];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},a=/^([\w-]*?)([\d]+)$/,o=0,u=e.length;o<u;o++){var s=e[o],l=s.name.match(a);if(l&&l.length>1){var f=l[1],c=n[f];c||(n[f]=c=[]),c.push(s)}}var d=[];for(var f in n)d.push(AnimationClip.CreateFromMorphTargetSequence(f,n[f],t,r));return d},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(g,E,T,S,b){if(T.length!==0){var O=[],P=[];AnimationUtils.flattenJSON(T,O,P,S),O.length!==0&&b.push(new g(E,O,P))}},n=[],a=e.name||"default",o=e.length||-1,u=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var f=s[l].keys;if(!(!f||f.length===0))if(f[0].morphTargets){for(var c={},d=0;d<f.length;d++)if(f[d].morphTargets)for(var h=0;h<f[d].morphTargets.length;h++)c[f[d].morphTargets[h]]=-1;for(var m in c){for(var p=[],_=[],h=0;h!==f[d].morphTargets.length;++h){var M=f[d];p.push(M.time),_.push(M.morphTarget===m?1:0)}n.push(new NumberKeyframeTrack(".morphTargetInfluence["+m+"]",p,_))}o=c.length*(u||1)}else{var y=".bones["+t[l].name+"]";r(VectorKeyframeTrack,y+".position",f,"pos",n),r(QuaternionKeyframeTrack,y+".quaternion",f,"rot",n),r(VectorKeyframeTrack,y+".scale",f,"scl",n)}}if(n.length===0)return null;var v=new AnimationClip(a,o,n);return v}});Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,r=0,n=e.length;r!==n;++r){var a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});function MaterialLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager,this.textures={}}Object.assign(MaterialLoader.prototype,{load:function(e,t,r,n){var a=this,o=new FileLoader(a.manager);o.setResponseType("json"),o.load(e,function(u){t(a.parse(u))},r,n)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}var n=new Materials[e.type];if(e.uuid!==void 0&&(n.uuid=e.uuid),e.name!==void 0&&(n.name=e.name),e.color!==void 0&&n.color.setHex(e.color),e.roughness!==void 0&&(n.roughness=e.roughness),e.metalness!==void 0&&(n.metalness=e.metalness),e.emissive!==void 0&&n.emissive.setHex(e.emissive),e.specular!==void 0&&n.specular.setHex(e.specular),e.shininess!==void 0&&(n.shininess=e.shininess),e.clearCoat!==void 0&&(n.clearCoat=e.clearCoat),e.clearCoatRoughness!==void 0&&(n.clearCoatRoughness=e.clearCoatRoughness),e.uniforms!==void 0&&(n.uniforms=e.uniforms),e.vertexShader!==void 0&&(n.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(n.fragmentShader=e.fragmentShader),e.vertexColors!==void 0&&(n.vertexColors=e.vertexColors),e.fog!==void 0&&(n.fog=e.fog),e.shading!==void 0&&(n.shading=e.shading),e.blending!==void 0&&(n.blending=e.blending),e.side!==void 0&&(n.side=e.side),e.opacity!==void 0&&(n.opacity=e.opacity),e.transparent!==void 0&&(n.transparent=e.transparent),e.alphaTest!==void 0&&(n.alphaTest=e.alphaTest),e.depthTest!==void 0&&(n.depthTest=e.depthTest),e.depthWrite!==void 0&&(n.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(n.colorWrite=e.colorWrite),e.wireframe!==void 0&&(n.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(n.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=e.wireframeLinejoin),e.skinning!==void 0&&(n.skinning=e.skinning),e.morphTargets!==void 0&&(n.morphTargets=e.morphTargets),e.size!==void 0&&(n.size=e.size),e.sizeAttenuation!==void 0&&(n.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(n.map=r(e.map)),e.alphaMap!==void 0&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),e.bumpMap!==void 0&&(n.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(n.bumpScale=e.bumpScale),e.normalMap!==void 0&&(n.normalMap=r(e.normalMap)),e.normalScale!==void 0){var a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),n.normalScale=new Vector2().fromArray(a)}return e.displacementMap!==void 0&&(n.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(n.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(n.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(n.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(n.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(n.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(n.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(n.specularMap=r(e.specularMap)),e.envMap!==void 0&&(n.envMap=r(e.envMap)),e.reflectivity!==void 0&&(n.reflectivity=e.reflectivity),e.lightMap!==void 0&&(n.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(n.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(n.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(n.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(n.gradientMap=r(e.gradientMap)),n}});function BufferGeometryLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(BufferGeometryLoader.prototype,{load:function(e,t,r,n){var a=this,o=new FileLoader(a.manager);o.setResponseType("json"),o.load(e,function(u){t(a.parse(u))},r,n)},parse:function(e){var t=new BufferGeometry,r=e.data.index;if(r!==void 0){var n=new TYPED_ARRAYS[r.type](r.array);t.setIndex(new BufferAttribute(n,1))}var a=e.data.attributes;for(var o in a){var u=a[o],n=new TYPED_ARRAYS[u.type](u.array);t.addAttribute(o,new BufferAttribute(n,u.itemSize,u.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(s!==void 0)for(var l=0,f=s.length;l!==f;++l){var c=s[l];t.addGroup(c.start,c.count,c.materialIndex)}var d=e.data.boundingSphere;if(d!==void 0){var h=new Vector3;d.center!==void 0&&h.fromArray(d.center),t.boundingSphere=new Sphere(h,d.radius)}return t}});var TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Loader(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var a=t[r],o=t[r+1];if(a.test(e))return o}return null}};Object.assign(Loader.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return t.length===1?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var n=[],a=0;a<e.length;++a)n[a]=this.createMaterial(e[a],t,r);return n},createMaterial:function(){var e={NoBlending,NormalBlending,AdditiveBlending,SubtractiveBlending,MultiplyBlending,CustomBlending},t=new Color,r=new TextureLoader,n=new MaterialLoader;return function(o,u,s){var l={};function f(m,p,_,M,y){var v=u+m,g=Loader.Handlers.get(v),E;g!==null?E=g.load(v):(r.setCrossOrigin(s),E=r.load(v)),p!==void 0&&(E.repeat.fromArray(p),p[0]!==1&&(E.wrapS=RepeatWrapping),p[1]!==1&&(E.wrapT=RepeatWrapping)),_!==void 0&&E.offset.fromArray(_),M!==void 0&&(M[0]==="repeat"&&(E.wrapS=RepeatWrapping),M[0]==="mirror"&&(E.wrapS=MirroredRepeatWrapping),M[1]==="repeat"&&(E.wrapT=RepeatWrapping),M[1]==="mirror"&&(E.wrapT=MirroredRepeatWrapping)),y!==void 0&&(E.anisotropy=y);var T=_Math.generateUUID();return l[T]=E,T}var c={uuid:_Math.generateUUID(),type:"MeshLambertMaterial"};for(var d in o){var h=o[d];switch(d){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",d,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":h.toLowerCase()==="basic"&&(c.type="MeshBasicMaterial"),h.toLowerCase()==="phong"&&(c.type="MeshPhongMaterial"),h.toLowerCase()==="standard"&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=f(h,o.mapDiffuseRepeat,o.mapDiffuseOffset,o.mapDiffuseWrap,o.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=f(h,o.mapEmissiveRepeat,o.mapEmissiveOffset,o.mapEmissiveWrap,o.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=f(h,o.mapLightRepeat,o.mapLightOffset,o.mapLightWrap,o.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=f(h,o.mapAORepeat,o.mapAOOffset,o.mapAOWrap,o.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=f(h,o.mapBumpRepeat,o.mapBumpOffset,o.mapBumpWrap,o.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=f(h,o.mapNormalRepeat,o.mapNormalOffset,o.mapNormalWrap,o.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=f(h,o.mapSpecularRepeat,o.mapSpecularOffset,o.mapSpecularWrap,o.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=f(h,o.mapMetalnessRepeat,o.mapMetalnessOffset,o.mapMetalnessWrap,o.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=f(h,o.mapRoughnessRepeat,o.mapRoughnessOffset,o.mapRoughnessWrap,o.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=f(h,o.mapAlphaRepeat,o.mapAlphaOffset,o.mapAlphaWrap,o.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=BackSide;break;case"doubleSided":c.side=DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[d]=h;break;case"vertexColors":h===!0&&(c.vertexColors=VertexColors),h==="face"&&(c.vertexColors=FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",d,h);break}}return c.type==="MeshBasicMaterial"&&delete c.emissive,c.type!=="MeshPhongMaterial"&&delete c.specular,c.opacity<1&&(c.transparent=!0),n.setTextures(l),n.parse(c)}}()});function JSONLoader(e){typeof e=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=e!==void 0?e:DefaultLoadingManager,this.withCredentials=!1}Object.assign(JSONLoader.prototype,{load:function(e,t,r,n){var a=this,o=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:Loader.prototype.extractUrlBase(e),u=new FileLoader(this.manager);u.setResponseType("json"),u.setWithCredentials(this.withCredentials),u.load(e,function(s){var l=s.metadata;if(l!==void 0){var f=l.type;if(f!==void 0){if(f.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(f.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var c=a.parse(s,o);t(c.geometry,c.materials)},r,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(a,o){function u(G,j){return G&1<<j}var s,l,f,c,d,h,m,p,_,M,y,v,g,E,T,S,b,O,P,B,V,R,w,H,D,K,W,k=a.faces,J=a.vertices,X=a.normals,I=a.colors,L=a.scale,U=0;if(a.uvs!==void 0){for(s=0;s<a.uvs.length;s++)a.uvs[s].length&&U++;for(s=0;s<U;s++)o.faceVertexUvs[s]=[]}for(c=0,d=J.length;c<d;)O=new Vector3,O.x=J[c++]*L,O.y=J[c++]*L,O.z=J[c++]*L,o.vertices.push(O);for(c=0,d=k.length;c<d;)if(M=k[c++],y=u(M,0),v=u(M,1),g=u(M,3),E=u(M,4),T=u(M,5),S=u(M,6),b=u(M,7),y){if(B=new Face3,B.a=k[c],B.b=k[c+1],B.c=k[c+3],V=new Face3,V.a=k[c+1],V.b=k[c+2],V.c=k[c+3],c+=4,v&&(_=k[c++],B.materialIndex=_,V.materialIndex=_),f=o.faces.length,g)for(s=0;s<U;s++)for(H=a.uvs[s],o.faceVertexUvs[s][f]=[],o.faceVertexUvs[s][f+1]=[],l=0;l<4;l++)p=k[c++],K=H[p*2],W=H[p*2+1],D=new Vector2(K,W),l!==2&&o.faceVertexUvs[s][f].push(D),l!==0&&o.faceVertexUvs[s][f+1].push(D);if(E&&(m=k[c++]*3,B.normal.set(X[m++],X[m++],X[m]),V.normal.copy(B.normal)),T)for(s=0;s<4;s++)m=k[c++]*3,w=new Vector3(X[m++],X[m++],X[m]),s!==2&&B.vertexNormals.push(w),s!==0&&V.vertexNormals.push(w);if(S&&(h=k[c++],R=I[h],B.color.setHex(R),V.color.setHex(R)),b)for(s=0;s<4;s++)h=k[c++],R=I[h],s!==2&&B.vertexColors.push(new Color(R)),s!==0&&V.vertexColors.push(new Color(R));o.faces.push(B),o.faces.push(V)}else{if(P=new Face3,P.a=k[c++],P.b=k[c++],P.c=k[c++],v&&(_=k[c++],P.materialIndex=_),f=o.faces.length,g)for(s=0;s<U;s++)for(H=a.uvs[s],o.faceVertexUvs[s][f]=[],l=0;l<3;l++)p=k[c++],K=H[p*2],W=H[p*2+1],D=new Vector2(K,W),o.faceVertexUvs[s][f].push(D);if(E&&(m=k[c++]*3,P.normal.set(X[m++],X[m++],X[m])),T)for(s=0;s<3;s++)m=k[c++]*3,w=new Vector3(X[m++],X[m++],X[m]),P.vertexNormals.push(w);if(S&&(h=k[c++],P.color.setHex(I[h])),b)for(s=0;s<3;s++)h=k[c++],P.vertexColors.push(new Color(I[h]));o.faces.push(P)}}function t(a,o){var u=a.influencesPerVertex!==void 0?a.influencesPerVertex:2;if(a.skinWeights)for(var s=0,l=a.skinWeights.length;s<l;s+=u){var f=a.skinWeights[s],c=u>1?a.skinWeights[s+1]:0,d=u>2?a.skinWeights[s+2]:0,h=u>3?a.skinWeights[s+3]:0;o.skinWeights.push(new Vector4(f,c,d,h))}if(a.skinIndices)for(var s=0,l=a.skinIndices.length;s<l;s+=u){var m=a.skinIndices[s],p=u>1?a.skinIndices[s+1]:0,_=u>2?a.skinIndices[s+2]:0,M=u>3?a.skinIndices[s+3]:0;o.skinIndices.push(new Vector4(m,p,_,M))}o.bones=a.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match.")}function r(a,o){var u=a.scale;if(a.morphTargets!==void 0)for(var s=0,l=a.morphTargets.length;s<l;s++){o.morphTargets[s]={},o.morphTargets[s].name=a.morphTargets[s].name,o.morphTargets[s].vertices=[];for(var f=o.morphTargets[s].vertices,c=a.morphTargets[s].vertices,d=0,h=c.length;d<h;d+=3){var m=new Vector3;m.x=c[d]*u,m.y=c[d+1]*u,m.z=c[d+2]*u,f.push(m)}}if(a.morphColors!==void 0&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var p=o.faces,_=a.morphColors[0].colors,s=0,l=p.length;s<l;s++)p[s].color.fromArray(_,s*3)}}function n(a,o){var u=[],s=[];a.animation!==void 0&&s.push(a.animation),a.animations!==void 0&&(a.animations.length?s=s.concat(a.animations):s.push(a.animations));for(var l=0;l<s.length;l++){var f=AnimationClip.parseAnimation(s[l],o.bones);f&&u.push(f)}if(o.morphTargets){var c=AnimationClip.CreateClipsFromMorphTargetSequences(o.morphTargets,10);u=u.concat(c)}u.length>0&&(o.animations=u)}return function(a,o){a.data!==void 0&&(a=a.data),a.scale!==void 0?a.scale=1/a.scale:a.scale=1;var u=new Geometry;if(e(a,u),t(a,u),r(a,u),n(a,u),u.computeFaceNormals(),u.computeBoundingSphere(),a.materials===void 0||a.materials.length===0)return{geometry:u};var s=Loader.prototype.initMaterials(a.materials,o,this.crossOrigin);return{geometry:u,materials:s}}}()});function ObjectLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager,this.texturePath=""}Object.assign(ObjectLoader.prototype,{load:function(e,t,r,n){this.texturePath===""&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var a=this,o=new FileLoader(a.manager);o.load(e,function(u){var s=null;try{s=JSON.parse(u)}catch(f){n!==void 0&&n(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}var l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}a.parse(s,t)},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,n),o=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,o);return e.animations&&(u.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(u),u},parseGeometries:function(e){var t={};if(e!==void 0)for(var r=new JSONLoader,n=new BufferGeometryLoader,a=0,o=e.length;a<o;a++){var u,s=e[a];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":u=new Geometries[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":u=new Geometries[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":u=new Geometries[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":u=new Geometries[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":u=new Geometries[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":u=new Geometries[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":u=new Geometries[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":u=new Geometries[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":u=new Geometries[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":u=new Geometries[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":u=new Geometries[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":u=n.parse(s);break;case"Geometry":u=r.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}u.uuid=s.uuid,s.name!==void 0&&(u.name=s.name),t[s.uuid]=u}return t},parseMaterials:function(e,t){var r={};if(e!==void 0){var n=new MaterialLoader;n.setTextures(t);for(var a=0,o=e.length;a<o;a++){var u=e[a];if(u.type==="MultiMaterial"){for(var s=[],l=0;l<u.materials.length;l++)s.push(n.parse(u.materials[l]));r[u.uuid]=s}else r[u.uuid]=n.parse(u)}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=AnimationClip.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this,n={};function a(d){return r.manager.itemStart(d),u.load(d,function(){r.manager.itemEnd(d)},void 0,function(){r.manager.itemEnd(d),r.manager.itemError(d)})}if(e!==void 0&&e.length>0){var o=new LoadingManager(t),u=new ImageLoader(o);u.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var f=e[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f.url)?f.url:r.texturePath+f.url;n[f.uuid]=a(c)}}return n},parseTextures:function(e,t){function r(l,f){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),f[l])}var n={};if(e!==void 0)for(var a=0,o=e.length;a<o;a++){var u=e[a];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);var s=new Texture(t[u.image]);s.needsUpdate=!0,s.uuid=u.uuid,u.name!==void 0&&(s.name=u.name),u.mapping!==void 0&&(s.mapping=r(u.mapping,TEXTURE_MAPPING)),u.offset!==void 0&&s.offset.fromArray(u.offset),u.repeat!==void 0&&s.repeat.fromArray(u.repeat),u.wrap!==void 0&&(s.wrapS=r(u.wrap[0],TEXTURE_WRAPPING),s.wrapT=r(u.wrap[1],TEXTURE_WRAPPING)),u.minFilter!==void 0&&(s.minFilter=r(u.minFilter,TEXTURE_FILTER)),u.magFilter!==void 0&&(s.magFilter=r(u.magFilter,TEXTURE_FILTER)),u.anisotropy!==void 0&&(s.anisotropy=u.anisotropy),u.flipY!==void 0&&(s.flipY=u.flipY),n[u.uuid]=s}return n},parseObject:function(){var e=new Matrix4;return function(r,n,a){var o;function u(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function s(p){if(p!==void 0){if(Array.isArray(p)){for(var _=[],M=0,y=p.length;M<y;M++){var v=p[M];a[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),_.push(a[v])}return _}return a[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),a[p]}}switch(r.type){case"Scene":o=new Scene,r.background!==void 0&&Number.isInteger(r.background)&&(o.background=new Color(r.background)),r.fog!==void 0&&(r.fog.type==="Fog"?o.fog=new Fog(r.fog.color,r.fog.near,r.fog.far):r.fog.type==="FogExp2"&&(o.fog=new FogExp2(r.fog.color,r.fog.density)));break;case"PerspectiveCamera":o=new PerspectiveCamera(r.fov,r.aspect,r.near,r.far),r.focus!==void 0&&(o.focus=r.focus),r.zoom!==void 0&&(o.zoom=r.zoom),r.filmGauge!==void 0&&(o.filmGauge=r.filmGauge),r.filmOffset!==void 0&&(o.filmOffset=r.filmOffset),r.view!==void 0&&(o.view=Object.assign({},r.view));break;case"OrthographicCamera":o=new OrthographicCamera(r.left,r.right,r.top,r.bottom,r.near,r.far);break;case"AmbientLight":o=new AmbientLight(r.color,r.intensity);break;case"DirectionalLight":o=new DirectionalLight(r.color,r.intensity);break;case"PointLight":o=new PointLight(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":o=new RectAreaLight(r.color,r.intensity,r.width,r.height);break;case"SpotLight":o=new SpotLight(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":o=new HemisphereLight(r.color,r.groundColor,r.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var l=u(r.geometry),f=s(r.material);l.bones&&l.bones.length>0?o=new SkinnedMesh(l,f):o=new Mesh(l,f);break;case"LOD":o=new LOD;break;case"Line":o=new Line(u(r.geometry),s(r.material),r.mode);break;case"LineLoop":o=new LineLoop(u(r.geometry),s(r.material));break;case"LineSegments":o=new LineSegments(u(r.geometry),s(r.material));break;case"PointCloud":case"Points":o=new Points(u(r.geometry),s(r.material));break;case"Sprite":o=new Sprite(s(r.material));break;case"Group":o=new Group;break;default:o=new Object3D}if(o.uuid=r.uuid,r.name!==void 0&&(o.name=r.name),r.matrix!==void 0?(e.fromArray(r.matrix),e.decompose(o.position,o.quaternion,o.scale)):(r.position!==void 0&&o.position.fromArray(r.position),r.rotation!==void 0&&o.rotation.fromArray(r.rotation),r.quaternion!==void 0&&o.quaternion.fromArray(r.quaternion),r.scale!==void 0&&o.scale.fromArray(r.scale)),r.castShadow!==void 0&&(o.castShadow=r.castShadow),r.receiveShadow!==void 0&&(o.receiveShadow=r.receiveShadow),r.shadow&&(r.shadow.bias!==void 0&&(o.shadow.bias=r.shadow.bias),r.shadow.radius!==void 0&&(o.shadow.radius=r.shadow.radius),r.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(r.shadow.mapSize),r.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(r.shadow.camera))),r.visible!==void 0&&(o.visible=r.visible),r.userData!==void 0&&(o.userData=r.userData),r.children!==void 0)for(var c in r.children)o.add(this.parseObject(r.children[c],n,a));if(r.type==="LOD")for(var d=r.levels,h=0;h<d.length;h++){var m=d[h],c=o.getObjectByProperty("uuid",m.object);c!==void 0&&o.addLevel(c,m.distance)}return o}}()});var TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,SphericalReflectionMapping,CubeUVReflectionMapping,CubeUVRefractionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipMapNearestFilter,NearestMipMapLinearFilter,LinearFilter,LinearMipMapNearestFilter,LinearMipMapLinearFilter};function CatmullRom(e,t,r,n,a){var o=(n-t)*.5,u=(a-r)*.5,s=e*e,l=e*s;return(2*r-2*n+o+u)*l+(-3*r+3*n-2*o-u)*s+o*e+r}function QuadraticBezierP0(e,t){var r=1-e;return r*r*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,r,n){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,r)+QuadraticBezierP2(e,n)}function CubicBezierP0(e,t){var r=1-e;return r*r*r*t}function CubicBezierP1(e,t){var r=1-e;return 3*r*r*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,r,n,a){return CubicBezierP0(e,t)+CubicBezierP1(e,r)+CubicBezierP2(e,n)+CubicBezierP3(e,a)}function Curve(){this.arcLengthDivisions=200}Object.assign(Curve.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],r,n=this.getPoint(0),a,o=0;for(t.push(0),a=1;a<=e;a++)r=this.getPoint(a/e),o+=r.distanceTo(n),t.push(o),n=r;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r=this.getLengths(),n=0,a=r.length,o;t?o=t:o=e*r[a-1];for(var u=0,s=a-1,l;u<=s;)if(n=Math.floor(u+(s-u)/2),l=r[n]-o,l<0)u=n+1;else if(l>0)s=n-1;else{s=n;break}if(n=s,r[n]===o)return n/(a-1);var f=r[n],c=r[n+1],d=c-f,h=(o-f)/d,m=(n+h)/(a-1);return m},getTangent:function(e){var t=1e-4,r=e-t,n=e+t;r<0&&(r=0),n>1&&(n=1);var a=this.getPoint(r),o=this.getPoint(n),u=o.clone().sub(a);return u.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r=new Vector3,n=[],a=[],o=[],u=new Vector3,s=new Matrix4,l,f,c;for(l=0;l<=e;l++)f=l/e,n[l]=this.getTangentAt(f),n[l].normalize();a[0]=new Vector3,o[0]=new Vector3;var d=Number.MAX_VALUE,h=Math.abs(n[0].x),m=Math.abs(n[0].y),p=Math.abs(n[0].z);for(h<=d&&(d=h,r.set(1,0,0)),m<=d&&(d=m,r.set(0,1,0)),p<=d&&r.set(0,0,1),u.crossVectors(n[0],r).normalize(),a[0].crossVectors(n[0],u),o[0].crossVectors(n[0],a[0]),l=1;l<=e;l++)a[l]=a[l-1].clone(),o[l]=o[l-1].clone(),u.crossVectors(n[l-1],n[l]),u.length()>Number.EPSILON&&(u.normalize(),c=Math.acos(_Math.clamp(n[l-1].dot(n[l]),-1,1)),a[l].applyMatrix4(s.makeRotationAxis(u,c))),o[l].crossVectors(n[l],a[l]);if(t===!0)for(c=Math.acos(_Math.clamp(a[0].dot(a[e]),-1,1)),c/=e,n[0].dot(u.crossVectors(a[0],a[e]))>0&&(c=-c),l=1;l<=e;l++)a[l].applyMatrix4(s.makeRotationAxis(n[l],c*l)),o[l].crossVectors(n[l],a[l]);return{tangents:n,normals:a,binormals:o}}});function LineCurve(e,t){Curve.call(this),this.v1=e,this.v2=t}LineCurve.prototype=Object.create(Curve.prototype);LineCurve.prototype.constructor=LineCurve;LineCurve.prototype.isLineCurve=!0;LineCurve.prototype.getPoint=function(e){if(e===1)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t};LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)};LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()};function CurvePath(){Curve.call(this),this.curves=[],this.autoClose=!1}CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var a=r[n]-t,o=this.curves[n],u=o.getLength(),s=u===0?0:1-a/u;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],r,n=0,a=this.curves;n<a.length;n++)for(var o=a[n],u=o&&o.isEllipseCurve?e*2:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(u),l=0;l<s.length;l++){var f=s[l];r&&r.equals(f)||(t.push(f),r=f)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Geometry,r=0,n=e.length;r<n;r++){var a=e[r];t.vertices.push(new Vector3(a.x,a.y,a.z||0))}return t}});function EllipseCurve(e,t,r,n,a,o,u,s){Curve.call(this),this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=u,this.aRotation=s||0}EllipseCurve.prototype=Object.create(Curve.prototype);EllipseCurve.prototype.constructor=EllipseCurve;EllipseCurve.prototype.isEllipseCurve=!0;EllipseCurve.prototype.getPoint=function(e){for(var t=Math.PI*2,r=this.aEndAngle-this.aStartAngle,n=Math.abs(r)<Number.EPSILON;r<0;)r+=t;for(;r>t;)r-=t;r<Number.EPSILON&&(n?r=0:r=t),this.aClockwise===!0&&!n&&(r===t?r=-t:r=r-t);var a=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){var s=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=o-this.aX,c=u-this.aY;o=f*s-c*l+this.aX,u=f*l+c*s+this.aY}return new Vector2(o,u)};function SplineCurve(e){Curve.call(this),this.points=e===void 0?[]:e}SplineCurve.prototype=Object.create(Curve.prototype);SplineCurve.prototype.constructor=SplineCurve;SplineCurve.prototype.isSplineCurve=!0;SplineCurve.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),a=r-n,o=t[n===0?n:n-1],u=t[n],s=t[n>t.length-2?t.length-1:n+1],l=t[n>t.length-3?t.length-1:n+2];return new Vector2(CatmullRom(a,o.x,u.x,s.x,l.x),CatmullRom(a,o.y,u.y,s.y,l.y))};function CubicBezierCurve(e,t,r,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=r,this.v3=n}CubicBezierCurve.prototype=Object.create(Curve.prototype);CubicBezierCurve.prototype.constructor=CubicBezierCurve;CubicBezierCurve.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2,a=this.v3;return new Vector2(CubicBezier(e,t.x,r.x,n.x,a.x),CubicBezier(e,t.y,r.y,n.y,a.y))};function QuadraticBezierCurve(e,t,r){Curve.call(this),this.v0=e,this.v1=t,this.v2=r}QuadraticBezierCurve.prototype=Object.create(Curve.prototype);QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve;QuadraticBezierCurve.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2;return new Vector2(QuadraticBezier(e,t.x,r.x,n.x),QuadraticBezier(e,t.y,r.y,n.y))};var PathPrototype=Object.assign(Object.create(CurvePath.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,n){var a=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,n));this.curves.push(a),this.currentPoint.set(r,n)},bezierCurveTo:function(e,t,r,n,a,o){var u=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(r,n),new Vector2(a,o));this.curves.push(u),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new SplineCurve(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,a,o){var u=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+u,t+s,r,n,a,o)},absarc:function(e,t,r,n,a,o){this.absellipse(e,t,r,r,n,a,o)},ellipse:function(e,t,r,n,a,o,u,s){var l=this.currentPoint.x,f=this.currentPoint.y;this.absellipse(e+l,t+f,r,n,a,o,u,s)},absellipse:function(e,t,r,n,a,o,u,s){var l=new EllipseCurve(e,t,r,n,a,o,u,s);if(this.curves.length>0){var f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});function Path(e){CurvePath.call(this),this.currentPoint=new Vector2,e&&this.fromPoints(e)}Path.prototype=PathPrototype;PathPrototype.constructor=Path;function Shape(){Path.apply(this,arguments),this.holes=[]}Shape.prototype=Object.assign(Object.create(PathPrototype),{constructor:Shape,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}});function ShapePath(){this.subPaths=[],this.currentPath=null}Object.assign(ShapePath.prototype,{moveTo:function(e,t){this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,a,o){this.currentPath.bezierCurveTo(e,t,r,n,a,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(D){for(var K=[],W=0,k=D.length;W<k;W++){var J=D[W],X=new Shape;X.curves=J.curves,K.push(X)}return K}function n(D,K){for(var W=K.length,k=!1,J=W-1,X=0;X<W;J=X++){var I=K[J],L=K[X],U=L.x-I.x,G=L.y-I.y;if(Math.abs(G)>Number.EPSILON){if(G<0&&(I=K[X],U=-U,L=K[J],G=-G),D.y<I.y||D.y>L.y)continue;if(D.y===I.y){if(D.x===I.x)return!0}else{var j=G*(D.x-I.x)-U*(D.y-I.y);if(j===0)return!0;if(j<0)continue;k=!k}}else{if(D.y!==I.y)continue;if(L.x<=D.x&&D.x<=I.x||I.x<=D.x&&D.x<=L.x)return!0}}return k}var a=ShapeUtils.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return r(o);var u,s,l,f=[];if(o.length===1)return s=o[0],l=new Shape,l.curves=s.curves,f.push(l),f;var c=!a(o[0].getPoints());c=e?!c:c;var d=[],h=[],m=[],p=0,_;h[p]=void 0,m[p]=[];for(var M=0,y=o.length;M<y;M++)s=o[M],_=s.getPoints(),u=a(_),u=e?!u:u,u?(!c&&h[p]&&p++,h[p]={s:new Shape,p:_},h[p].s.curves=s.curves,c&&p++,m[p]=[]):m[p].push({h:s,p:_[0]});if(!h[0])return r(o);if(h.length>1){for(var v=!1,g=[],E=0,T=h.length;E<T;E++)d[E]=[];for(var E=0,T=h.length;E<T;E++)for(var S=m[E],b=0;b<S.length;b++){for(var O=S[b],P=!0,B=0;B<h.length;B++)n(O.p,h[B].p)&&(E!==B&&g.push({froms:E,tos:B,hole:b}),P?(P=!1,d[B].push(O)):v=!0);P&&d[E].push(O)}g.length>0&&(v||(m=d))}for(var V,M=0,R=h.length;M<R;M++){l=h[M].s,f.push(l),V=m[M];for(var w=0,H=V.length;w<H;w++)l.holes.push(V[w].h)}return f}});function Font(e){this.data=e}Object.assign(Font.prototype,{isFont:!0,generateShapes:function(e,t,r){function n(c){for(var d=String(c).split(""),h=t/o.resolution,m=(o.boundingBox.yMax-o.boundingBox.yMin+o.underlineThickness)*h,p=0,_=0,M=[],y=0;y<d.length;y++){var v=d[y];if(v===`
`)p=0,_-=m;else{var g=a(v,h,p,_);p+=g.offsetX,M.push(g.path)}}return M}function a(c,d,h,m){var p=o.glyphs[c]||o.glyphs["?"];if(!!p){var _=new ShapePath,M,y,v,g,E,T,S,b;if(p.o)for(var O=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),P=0,B=O.length;P<B;){var V=O[P++];switch(V){case"m":M=O[P++]*d+h,y=O[P++]*d+m,_.moveTo(M,y);break;case"l":M=O[P++]*d+h,y=O[P++]*d+m,_.lineTo(M,y);break;case"q":v=O[P++]*d+h,g=O[P++]*d+m,E=O[P++]*d+h,T=O[P++]*d+m,_.quadraticCurveTo(E,T,v,g);break;case"b":v=O[P++]*d+h,g=O[P++]*d+m,E=O[P++]*d+h,T=O[P++]*d+m,S=O[P++]*d+h,b=O[P++]*d+m,_.bezierCurveTo(E,T,S,b,v,g);break}}return{offsetX:p.ha*d,path:_}}}t===void 0&&(t=100);for(var o=this.data,u=n(e),s=[],l=0,f=u.length;l<f;l++)Array.prototype.push.apply(s,u[l].toShapes());return s}});function FontLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(FontLoader.prototype,{load:function(e,t,r,n){var a=this,o=new FileLoader(this.manager);o.load(e,function(u){var s;try{s=JSON.parse(u)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(u.substring(65,u.length-2))}var l=a.parse(s);t&&t(l)},r,n)},parse:function(e){return new Font(e)}});var context,AudioContext={getContext:function(){return context===void 0&&(context=new(window.AudioContext||window.webkitAudioContext)),context},setContext:function(e){context=e}};function AudioLoader(e){this.manager=e!==void 0?e:DefaultLoadingManager}Object.assign(AudioLoader.prototype,{load:function(e,t,r,n){var a=new FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(o){var u=AudioContext.getContext();u.decodeAudioData(o,function(s){t(s)})},r,n)}});function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(StereoCamera.prototype,{update:function(){var e,t,r,n,a,o,u,s,l=new Matrix4,f=new Matrix4;return function(d){var h=e!==this||t!==d.focus||r!==d.fov||n!==d.aspect*this.aspect||a!==d.near||o!==d.far||u!==d.zoom||s!==this.eyeSep;if(h){e=this,t=d.focus,r=d.fov,n=d.aspect*this.aspect,a=d.near,o=d.far,u=d.zoom;var m=d.projectionMatrix.clone();s=this.eyeSep/2;var p=s*a/t,_=a*Math.tan(_Math.DEG2RAD*r*.5)/u,M,y;f.elements[12]=-s,l.elements[12]=s,M=-_*n+p,y=_*n+p,m.elements[0]=2*a/(y-M),m.elements[8]=(y+M)/(y-M),this.cameraL.projectionMatrix.copy(m),M=-_*n-p,y=_*n-p,m.elements[0]=2*a/(y-M),m.elements[8]=(y+M)/(y-M),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(d.matrixWorld).multiply(f),this.cameraR.matrixWorld.copy(d.matrixWorld).multiply(l)}}()});function CubeCamera(e,t,r){Object3D.call(this),this.type="CubeCamera";var n=90,a=1,o=new PerspectiveCamera(n,a,e,t);o.up.set(0,-1,0),o.lookAt(new Vector3(1,0,0)),this.add(o);var u=new PerspectiveCamera(n,a,e,t);u.up.set(0,-1,0),u.lookAt(new Vector3(-1,0,0)),this.add(u);var s=new PerspectiveCamera(n,a,e,t);s.up.set(0,0,1),s.lookAt(new Vector3(0,1,0)),this.add(s);var l=new PerspectiveCamera(n,a,e,t);l.up.set(0,0,-1),l.lookAt(new Vector3(0,-1,0)),this.add(l);var f=new PerspectiveCamera(n,a,e,t);f.up.set(0,-1,0),f.lookAt(new Vector3(0,0,1)),this.add(f);var c=new PerspectiveCamera(n,a,e,t);c.up.set(0,-1,0),c.lookAt(new Vector3(0,0,-1)),this.add(c);var d={format:RGBFormat,magFilter:LinearFilter,minFilter:LinearFilter};this.renderTarget=new WebGLRenderTargetCube(r,r,d),this.renderTarget.texture.name="CubeCamera",this.updateCubeMap=function(h,m){this.parent===null&&this.updateMatrixWorld();var p=this.renderTarget,_=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,p.activeCubeFace=0,h.render(m,o,p),p.activeCubeFace=1,h.render(m,u,p),p.activeCubeFace=2,h.render(m,s,p),p.activeCubeFace=3,h.render(m,l,p),p.activeCubeFace=4,h.render(m,f,p),p.texture.generateMipmaps=_,p.activeCubeFace=5,h.render(m,c,p),h.setRenderTarget(null)}}CubeCamera.prototype=Object.create(Object3D.prototype);CubeCamera.prototype.constructor=CubeCamera;function ArrayCamera(e){PerspectiveCamera.call(this),this.enabled=!1,this.cameras=e||[]}ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0});function AudioListener(){Object3D.call(this),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Vector3,t=new Quaternion,r=new Vector3,n=new Vector3;return function(o){Object3D.prototype.updateMatrixWorld.call(this,o);var u=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),u.positionX?(u.positionX.setValueAtTime(e.x,this.context.currentTime),u.positionY.setValueAtTime(e.y,this.context.currentTime),u.positionZ.setValueAtTime(e.z,this.context.currentTime),u.forwardX.setValueAtTime(n.x,this.context.currentTime),u.forwardY.setValueAtTime(n.y,this.context.currentTime),u.forwardZ.setValueAtTime(n.z,this.context.currentTime),u.upX.setValueAtTime(s.x,this.context.currentTime),u.upY.setValueAtTime(s.y,this.context.currentTime),u.upZ.setValueAtTime(s.z,this.context.currentTime)):(u.setPosition(e.x,e.y,e.z),u.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z))}}()});function Audio(e){Object3D.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.startTime=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}});function PositionalAudio(e){Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Vector3;return function(r){Object3D.prototype.updateMatrixWorld.call(this,r),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()});function AudioAnalyser(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}});function PropertyMixer(e,t,r){this.binding=e,this.valueSize=r;var n=Float64Array,a;switch(t){case"quaternion":a=this._slerp;break;case"string":case"bool":n=Array,a=this._select;break;default:a=this._lerp}this.buffer=new n(r*4),this._mixBufferRegion=a,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(PropertyMixer.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,a=e*n+n,o=this.cumulativeWeight;if(o===0){for(var u=0;u!==n;++u)r[a+u]=r[u];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(r,a,0,s,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,a=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,a<1){var u=t*3;this._mixBufferRegion(r,n,u,1-a,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){o.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=r*3;e.getValue(t,n);for(var a=r,o=n;a!==o;++a)t[a]=t[n+a%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,a){if(n>=.5)for(var o=0;o!==a;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){Quaternion.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,a){for(var o=1-n,u=0;u!==a;++u){var s=t+u;e[s]=e[s]*o+e[r+u]*n}}});function Composite(e,t,r){var n=r||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}Object.assign(Composite.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,a=r.length;n!==a;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}});function PropertyBinding(e,t,r){this.path=t,this.parsedPath=r||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(PropertyBinding,{Composite,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,r):new PropertyBinding(e,t,r)},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,r=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,n=/\.([\w-]+)(?:\[(.+)\])?/,a=new RegExp("^"+e.source+t.source+r.source+n.source+"$"),o=["material","materials","bones"];return function(u){var s=a.exec(u);if(!s)throw new Error("PropertyBinding: Cannot parse trackName: "+u);var l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},f=l.nodeName&&l.nodeName.lastIndexOf(".");if(f!==void 0&&f!==-1){var c=l.nodeName.substring(f+1);o.indexOf(c)!==-1&&(l.nodeName=l.nodeName.substring(0,f),l.objectName=c)}if(l.propertyName===null||l.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+u);return l}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(u){for(var s=0;s<u.bones.length;s++){var l=u.bones[s];if(l.name===t)return l}return null},n=r(e.skeleton);if(n)return n}if(e.children){var a=function(u){for(var s=0;s<u.length;s++){var l=u[s];if(l.name===t||l.uuid===t)return l;var f=a(l.children);if(f)return f}return null},o=a(e.children);if(o)return o}return null}});Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function e(t,r){t[r]=this.node[this.propertyName]},function e(t,r){for(var n=this.resolvedProperty,a=0,o=n.length;a!==o;++a)t[r++]=n[a]},function e(t,r){t[r]=this.resolvedProperty[this.propertyIndex]},function e(t,r){this.resolvedProperty.toArray(t,r)}],SetterByBindingTypeAndVersioning:[[function e(t,r){this.node[this.propertyName]=t[r]},function e(t,r){this.node[this.propertyName]=t[r],this.targetObject.needsUpdate=!0},function e(t,r){this.node[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function e(t,r){for(var n=this.resolvedProperty,a=0,o=n.length;a!==o;++a)n[a]=t[r++]},function e(t,r){for(var n=this.resolvedProperty,a=0,o=n.length;a!==o;++a)n[a]=t[r++];this.targetObject.needsUpdate=!0},function e(t,r){for(var n=this.resolvedProperty,a=0,o=n.length;a!==o;++a)n[a]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r]},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0},function e(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function e(t,r){this.resolvedProperty.fromArray(t,r)},function e(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0},function e(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function e(t,r){this.bind(),this.getValue(t,r)},setValue:function e(t,r){this.bind(),this.setValue(t,r)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,a=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("  trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("  can not bind to material as node does not have a material",this);return}if(!e.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}e=e.skeleton.bones;for(var u=0;u<e.length;u++)if(e[u].name===o){o=u;break}break;default:if(e[r]===void 0){console.error("  can not bind to objectName of node, undefined",this);return}e=e[r]}if(o!==void 0){if(e[o]===void 0){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);return}e=e[o]}}var s=e[n];if(s===void 0){var l=t.nodeName;console.error("  trying to update property for track: "+l+"."+n+" but it wasn't found.",e);return}var f=this.Versioning.None;e.needsUpdate!==void 0?(f=this.Versioning.NeedsUpdate,this.targetObject=e):e.matrixWorldNeedsUpdate!==void 0&&(f=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(a!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!e.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(var u=0;u<this.node.geometry.morphTargets.length;u++)if(e.geometry.morphTargets[u].name===a){a=u;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][f]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue});function AnimationObjectGroup(e){this.uuid=_Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,n=arguments.length;r!==n;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,a=this._indicesByUUID,o=this._paths,u=this._parsedPaths,s=this._bindings,l=s.length,f=0,c=arguments.length;f!==c;++f){var d=arguments[f],h=d.uuid,m=a[h],p=void 0;if(m===void 0){m=r++,a[h]=m,t.push(d);for(var _=0,M=l;_!==M;++_)s[_].push(new PropertyBinding(d,o[_],u[_]))}else if(m<n){p=t[m];var y=--n,v=t[y];a[v.uuid]=m,t[m]=v,a[h]=y,t[y]=d;for(var _=0,M=l;_!==M;++_){var g=s[_],E=g[y],T=g[m];g[m]=E,T===void 0&&(T=new PropertyBinding(d,o[_],u[_])),g[y]=T}}else t[m]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(e){for(var t=this._objects,r=this.nCachedObjects_,n=this._indicesByUUID,a=this._bindings,o=a.length,u=0,s=arguments.length;u!==s;++u){var l=arguments[u],f=l.uuid,c=n[f];if(c!==void 0&&c>=r){var d=r++,h=t[d];n[h.uuid]=c,t[c]=h,n[f]=d,t[d]=l;for(var m=0,p=o;m!==p;++m){var _=a[m],M=_[d],y=_[c];_[c]=M,_[d]=y}}}this.nCachedObjects_=r},uncache:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,a=this._indicesByUUID,o=this._bindings,u=o.length,s=0,l=arguments.length;s!==l;++s){var f=arguments[s],c=f.uuid,d=a[c];if(d!==void 0)if(delete a[c],d<n){var h=--n,m=t[h],p=--r,_=t[p];a[m.uuid]=d,t[d]=m,a[_.uuid]=h,t[h]=_,t.pop();for(var M=0,y=u;M!==y;++M){var v=o[M],g=v[h],E=v[p];v[d]=g,v[h]=E,v.pop()}}else{var p=--r,_=t[p];a[_.uuid]=d,t[d]=_,t.pop();for(var M=0,y=u;M!==y;++M){var v=o[M];v[d]=v[p],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],a=this._bindings;if(n!==void 0)return a[n];var o=this._paths,u=this._parsedPaths,s=this._objects,l=s.length,f=this.nCachedObjects_,c=new Array(l);n=a.length,r[e]=n,o.push(e),u.push(t),a.push(c);for(var d=f,h=s.length;d!==h;++d){var m=s[d];c[d]=new PropertyBinding(m,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){var n=this._paths,a=this._parsedPaths,o=this._bindings,u=o.length-1,s=o[u],l=e[u];t[l]=r,o[r]=s,o.pop(),a[r]=a[u],a.pop(),n[r]=n[u],n.pop()}}});function AnimationAction(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,a=n.length,o=new Array(a),u={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding},s=0;s!==a;++s){var l=n[s].createInterpolant(null);o[s]=l,l.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,a=e._clip.duration,o=a/n,u=n/a;e.warp(1,o,t),this.warp(u,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,a=n.time,o=this._timeScaleInterpolant,u=this.timeScale;o===null&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=a,s[1]=a+r,l[0]=e/u,l[1]=t/u,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(!this.enabled){this._updateWeight(e);return}var a=this._startTime;if(a!==null){var o=(e-a)*r;if(o<0||r===0)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var u=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,f=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(u),f[c].accumulate(n,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(r!==null){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(r!==null){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var r=this._clip.duration,n=this.loop,a=this._loopCount;if(n===LoopOnce){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else if(t<0)t=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=n===LoopPingPong;if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),t>=r||t<0){var u=Math.floor(t/r);t-=r*u,a+=Math.abs(u);var s=this.repetitions-a;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===0){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}if(o&&(a&1)==1)return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=ZeroSlopeEnding,n.endingEnd=ZeroSlopeEnding):(e?n.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:n.endingStart=WrapAroundEnding,t?n.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:n.endingEnd=WrapAroundEnding)},_scheduleFading:function(e,t,r){var n=this._mixer,a=n.time,o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var u=o.parameterPositions,s=o.sampleValues;return u[0]=a,s[0]=t,u[1]=a+e,s[1]=r,this}});function AnimationMixer(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Object.assign(AnimationMixer.prototype,EventDispatcher.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,a=n.length,o=e._propertyBindings,u=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,f=l[s];f===void 0&&(f={},l[s]=f);for(var c=0;c!==a;++c){var d=n[c],h=d.name,m=f[h];if(m!==void 0)o[c]=m;else{if(m=o[c],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;m=new PropertyMixer(PropertyBinding.create(r,h,p),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,s,h),o[c]=m}u[c].resultBuffer=m.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var a=e._propertyBindings,o=0,u=a.length;o!==u;++o){var s=a[o];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var a=t[r];--a.useCount==0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,a=this._actionsByClip,o=a[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{var u=o.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,o=this._actionsByClip,u=o[a],s=u.knownActions,l=s[s.length-1],f=e._byClipCacheIndex;l._byClipCacheIndex=f,s[f]=l,s.pop(),e._byClipCacheIndex=null;var c=u.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],s.length===0&&delete o[a],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var a=t[r];--a.referenceCount==0&&this._removeInactiveBinding(a)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,a=t[n];e._cacheIndex=n,t[n]=e,a._cacheIndex=r,t[r]=a},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,a=t[n];e._cacheIndex=n,t[n]=e,a._cacheIndex=r,t[r]=a},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,a=n[t],o=this._bindings;a===void 0&&(a={},n[t]=a),a[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,u=o[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete u[a];e:{for(var f in u)break e;delete o[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,a=t[n];e._cacheIndex=n,t[n]=e,a._cacheIndex=r,t[r]=a},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,a=t[n];e._cacheIndex=n,t[n]=e,a._cacheIndex=r,t[r]=a},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,a=t[n];e.__cacheIndex=n,t[n]=e,a.__cacheIndex=r,t[r]=a},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,a=typeof e=="string"?AnimationClip.findByName(r,e):e,o=a!==null?a.uuid:e,u=this._actionsByClip[o],s=null;if(u!==void 0){var l=u.actionByRoot[n];if(l!==void 0)return l;s=u.knownActions[0],a===null&&(a=s._clip)}if(a===null)return null;var f=new AnimationAction(this,a,t);return this._bindAction(f,s),this._addInactiveAction(f,o,n),f},existingAction:function(e,t){var r=t||this._root,n=r.uuid,a=typeof e=="string"?AnimationClip.findByName(r,e):e,o=a?a.uuid:e,u=this._actionsByClip[o];return u!==void 0&&u.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var a=0;a!==t;++a)e[a].reset();for(var a=0;a!==n;++a)r[a].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,a=Math.sign(e),o=this._accuIndex^=1,u=0;u!==r;++u){var s=t[u];s._update(n,e,a,o)}for(var l=this._bindings,f=this._nActiveBindings,u=0;u!==f;++u)l[u].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,a=n[r];if(a!==void 0){for(var o=a.knownActions,u=0,s=o.length;u!==s;++u){var l=o[u];this._deactivateAction(l);var f=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=f,t[f]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var a=r[n].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var u=this._bindingsByRootAndName,s=u[t];if(s!==void 0)for(var l in s){var f=s[l];f.restoreOriginalState(),this._removeInactiveBinding(f)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}});function Uniform(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},copy:function(e){var t=e.index;t!==null&&this.setIndex(t.clone());var r=e.attributes;for(var n in r){var a=r[n];this.addAttribute(n,a.clone())}for(var o=e.groups,u=0,s=o.length;u<s;u++){var l=o[u];this.addGroup(l.start,l.count,l.materialIndex)}return this}});function InterleavedBufferAttribute(e,t,r,n){this.uuid=_Math.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=n===!0}Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=a,this}});function InterleavedBuffer(e,t){this.uuid=_Math.generateUUID(),this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,a=this.stride;n<a;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});function InstancedInterleavedBuffer(e,t,r){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=r||1}InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function InstancedBufferAttribute(e,t,r){BufferAttribute.call(this,e,t),this.meshPerAttribute=r||1}InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function Raycaster(e,t,r,n){this.ray=new Ray(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,r,n){if(e.visible!==!1&&(e.raycast(t,r),n===!0))for(var a=e.children,o=0,u=a.length;o<u;o++)intersectObject(a[o],t,r,!0)}Object.assign(Raycaster.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return intersectObject(e,this,r,t),r.sort(ascSort),r},intersectObjects:function(e,t){var r=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,a=e.length;n<a;n++)intersectObject(e[n],this,r,t);return r.sort(ascSort),r}});function Clock(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Clock.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance=="undefined"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});function Spherical(e,t,r){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=r!==void 0?r:0,this}Object.assign(Spherical.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(_Math.clamp(e.y/this.radius,-1,1))),this}});function Cylindrical(e,t,r){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=r!==void 0?r:0,this}Object.assign(Cylindrical.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}});function MorphBlendMesh(e,t){Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n="__default",a=0,o=r-1,u=r/1;this.createAnimation(n,a,o,u),this.setAnimationWeight(n,1)}MorphBlendMesh.prototype=Object.create(Mesh.prototype);MorphBlendMesh.prototype.constructor=MorphBlendMesh;MorphBlendMesh.prototype.createAnimation=function(e,t,r,n){var a={start:t,end:r,length:r-t+1,fps:n,duration:(r-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=a,this.animationsList.push(a)};MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t=/([a-z]+)_?(\d+)/i,r,n={},a=this.geometry,o=0,u=a.morphTargets.length;o<u;o++){var s=a.morphTargets[o],l=s.name.match(t);if(l&&l.length>1){var f=l[1];n[f]||(n[f]={start:1/0,end:-1/0});var c=n[f];o<c.start&&(c.start=o),o>c.end&&(c.end=o),r||(r=f)}}for(var f in n){var c=n[f];this.createAnimation(f,c.start,c.end,e)}this.firstAnimation=r};MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)};MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)};MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)};MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)};MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)};MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)};MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t};MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t};MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")};MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)};MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var n=this.animationsList[t];if(!!n.active){var a=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var o=n.start+_Math.clamp(Math.floor(n.time/a),0,n.length-1),u=n.weight;o!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*u,this.morphTargetInfluences[o]=0,n.lastFrame=n.currentFrame,n.currentFrame=o);var s=n.time%a/a;n.directionBackwards&&(s=1-s),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=s*u,this.morphTargetInfluences[n.lastFrame]=(1-s)*u):this.morphTargetInfluences[n.currentFrame]=u}}};function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(t){}}ImmediateRenderObject.prototype=Object.create(Object3D.prototype);ImmediateRenderObject.prototype.constructor=ImmediateRenderObject;ImmediateRenderObject.prototype.isImmediateRenderObject=!0;function VertexNormalsHelper(e,t,r,n){this.object=e,this.size=t!==void 0?t:1;var a=r!==void 0?r:16711680,o=n!==void 0?n:1,u=0,s=this.object.geometry;s&&s.isGeometry?u=s.faces.length*3:s&&s.isBufferGeometry&&(u=s.attributes.normal.count);var l=new BufferGeometry,f=new Float32BufferAttribute(u*2*3,3);l.addAttribute("position",f),LineSegments.call(this,l,new LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}VertexNormalsHelper.prototype=Object.create(LineSegments.prototype);VertexNormalsHelper.prototype.constructor=VertexNormalsHelper;VertexNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Matrix3;return function(){var a=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,u=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var l=s.vertices,f=s.faces,c=0,d=0,h=f.length;d<h;d++)for(var m=f[d],p=0,_=m.vertexNormals.length;p<_;p++){var M=l[m[a[p]]],y=m.vertexNormals[p];e.copy(M).applyMatrix4(o),t.copy(y).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),u.setXYZ(c,e.x,e.y,e.z),c=c+1,u.setXYZ(c,t.x,t.y,t.z),c=c+1}else if(s&&s.isBufferGeometry)for(var v=s.attributes.position,g=s.attributes.normal,c=0,p=0,_=v.count;p<_;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(o),t.set(g.getX(p),g.getY(p),g.getZ(p)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),u.setXYZ(c,e.x,e.y,e.z),c=c+1,u.setXYZ(c,t.x,t.y,t.z),c=c+1;u.needsUpdate=!0}}();function SpotLightHelper(e){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new BufferGeometry,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,a=1,o=32;n<o;n++,a++){var u=n/o*Math.PI*2,s=a/o*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Float32BufferAttribute(r,3));var l=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(t,l),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype);SpotLightHelper.prototype.constructor=SpotLightHelper;SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};SpotLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3;return function(){var n=this.light.distance?this.light.distance:1e3,a=n*Math.tan(this.light.angle);this.cone.scale.set(a,a,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color)}}();function SkeletonHelper(e){this.bones=this.getBoneList(e);for(var t=new BufferGeometry,r=[],n=[],a=new Color(0,0,1),o=new Color(0,1,0),u=0;u<this.bones.length;u++){var s=this.bones[u];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(a.r,a.g,a.b),n.push(o.r,o.g,o.b))}t.addAttribute("position",new Float32BufferAttribute(r,3)),t.addAttribute("color",new Float32BufferAttribute(n,3));var l=new LineBasicMaterial({vertexColors:VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});LineSegments.call(this,t,l),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}SkeletonHelper.prototype=Object.create(LineSegments.prototype);SkeletonHelper.prototype.constructor=SkeletonHelper;SkeletonHelper.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t};SkeletonHelper.prototype.update=function(){var e=new Vector3,t=new Matrix4,r=new Matrix4;return function(){var a=this.geometry,o=a.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var u=0,s=0;u<this.bones.length;u++){var l=this.bones[u];l.parent&&l.parent.isBone&&(t.multiplyMatrices(r,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(s,e.x,e.y,e.z),t.multiplyMatrices(r,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(s+1,e.x,e.y,e.z),s+=2)}a.getAttribute("position").needsUpdate=!0}}();function PointLightHelper(e,t){this.light=e,this.light.updateMatrixWorld();var r=new SphereBufferGeometry(t,4,2),n=new MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color),Mesh.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}PointLightHelper.prototype=Object.create(Mesh.prototype);PointLightHelper.prototype.constructor=PointLightHelper;PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color)};function RectAreaLightHelper(e){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new LineBasicMaterial({color:e.color}),r=new BufferGeometry;r.addAttribute("position",new BufferAttribute(new Float32Array(5*3),3)),this.add(new Line(r,t)),this.update()}RectAreaLightHelper.prototype=Object.create(Object3D.prototype);RectAreaLightHelper.prototype.constructor=RectAreaLightHelper;RectAreaLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};RectAreaLightHelper.prototype.update=function(){var e=this.children[0];e.material.color.copy(this.light.color);var t=this.light.width*.5,r=this.light.height*.5,n=e.geometry.attributes.position,a=n.array;a[0]=t,a[1]=-r,a[2]=0,a[3]=t,a[4]=r,a[5]=0,a[6]=-t,a[7]=r,a[8]=0,a[9]=-t,a[10]=-r,a[11]=0,a[12]=t,a[13]=-r,a[14]=0,n.needsUpdate=!0};function HemisphereLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var r=new OctahedronBufferGeometry(t);r.rotateY(Math.PI*.5);var n=new MeshBasicMaterial({vertexColors:VertexColors,wireframe:!0}),a=r.getAttribute("position"),o=new Float32Array(a.count*3);r.addAttribute("color",new BufferAttribute(o,3)),this.add(new Mesh(r,n)),this.update()}HemisphereLightHelper.prototype=Object.create(Object3D.prototype);HemisphereLightHelper.prototype.constructor=HemisphereLightHelper;HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};HemisphereLightHelper.prototype.update=function(){var e=new Vector3,t=new Color,r=new Color;return function(){var a=this.children[0],o=a.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var u=0,s=o.count;u<s;u++){var l=u<s/2?t:r;o.setXYZ(u,l.r,l.g,l.b)}a.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),o.needsUpdate=!0}}();function GridHelper(e,t,r,n){e=e||10,t=t||10,r=new Color(r!==void 0?r:4473924),n=new Color(n!==void 0?n:8947848);for(var a=t/2,o=e/t,u=e/2,s=[],l=[],f=0,c=0,d=-u;f<=t;f++,d+=o){s.push(-u,0,d,u,0,d),s.push(d,0,-u,d,0,u);var h=f===a?r:n;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var m=new BufferGeometry;m.addAttribute("position",new Float32BufferAttribute(s,3)),m.addAttribute("color",new Float32BufferAttribute(l,3));var p=new LineBasicMaterial({vertexColors:VertexColors});LineSegments.call(this,m,p)}GridHelper.prototype=Object.create(LineSegments.prototype);GridHelper.prototype.constructor=GridHelper;function PolarGridHelper(e,t,r,n,a,o){e=e||10,t=t||16,r=r||8,n=n||64,a=new Color(a!==void 0?a:4473924),o=new Color(o!==void 0?o:8947848);var u=[],s=[],l,f,c,d,h,m,p;for(d=0;d<=t;d++)c=d/t*(Math.PI*2),l=Math.sin(c)*e,f=Math.cos(c)*e,u.push(0,0,0),u.push(l,0,f),p=d&1?a:o,s.push(p.r,p.g,p.b),s.push(p.r,p.g,p.b);for(d=0;d<=r;d++)for(p=d&1?a:o,m=e-e/r*d,h=0;h<n;h++)c=h/n*(Math.PI*2),l=Math.sin(c)*m,f=Math.cos(c)*m,u.push(l,0,f),s.push(p.r,p.g,p.b),c=(h+1)/n*(Math.PI*2),l=Math.sin(c)*m,f=Math.cos(c)*m,u.push(l,0,f),s.push(p.r,p.g,p.b);var _=new BufferGeometry;_.addAttribute("position",new Float32BufferAttribute(u,3)),_.addAttribute("color",new Float32BufferAttribute(s,3));var M=new LineBasicMaterial({vertexColors:VertexColors});LineSegments.call(this,_,M)}PolarGridHelper.prototype=Object.create(LineSegments.prototype);PolarGridHelper.prototype.constructor=PolarGridHelper;function FaceNormalsHelper(e,t,r,n){this.object=e,this.size=t!==void 0?t:1;var a=r!==void 0?r:16776960,o=n!==void 0?n:1,u=0,s=this.object.geometry;s&&s.isGeometry?u=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new BufferGeometry,f=new Float32BufferAttribute(u*2*3,3);l.addAttribute("position",f),LineSegments.call(this,l,new LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}FaceNormalsHelper.prototype=Object.create(LineSegments.prototype);FaceNormalsHelper.prototype.constructor=FaceNormalsHelper;FaceNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Matrix3;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var a=this.object.matrixWorld,o=this.geometry.attributes.position,u=this.object.geometry,s=u.vertices,l=u.faces,f=0,c=0,d=l.length;c<d;c++){var h=l[c],m=h.normal;e.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(a),t.copy(m).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(f,e.x,e.y,e.z),f=f+1,o.setXYZ(f,t.x,t.y,t.z),f=f+1}o.needsUpdate=!0}}();function DirectionalLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t===void 0&&(t=1);var r=new BufferGeometry;r.addAttribute("position",new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new LineBasicMaterial({fog:!1});this.add(new Line(r,n)),r=new BufferGeometry,r.addAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.add(new Line(r,n)),this.update()}DirectionalLightHelper.prototype=Object.create(Object3D.prototype);DirectionalLightHelper.prototype.constructor=DirectionalLightHelper;DirectionalLightHelper.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()};DirectionalLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,r=new Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var a=this.children[0],o=this.children[1];a.lookAt(r),a.material.color.copy(this.light.color),o.lookAt(r),o.scale.z=r.length()}}();function CameraHelper(e){var t=new BufferGeometry,r=new LineBasicMaterial({color:16777215,vertexColors:FaceColors}),n=[],a=[],o={},u=new Color(16755200),s=new Color(16711680),l=new Color(43775),f=new Color(16777215),c=new Color(3355443);d("n1","n2",u),d("n2","n4",u),d("n4","n3",u),d("n3","n1",u),d("f1","f2",u),d("f2","f4",u),d("f4","f3",u),d("f3","f1",u),d("n1","f1",u),d("n2","f2",u),d("n3","f3",u),d("n4","f4",u),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",f),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c);function d(m,p,_){h(m,_),h(p,_)}function h(m,p){n.push(0,0,0),a.push(p.r,p.g,p.b),o[m]===void 0&&(o[m]=[]),o[m].push(n.length/3-1)}t.addAttribute("position",new Float32BufferAttribute(n,3)),t.addAttribute("color",new Float32BufferAttribute(a,3)),LineSegments.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}CameraHelper.prototype=Object.create(LineSegments.prototype);CameraHelper.prototype.constructor=CameraHelper;CameraHelper.prototype.update=function(){var e,t,r=new Vector3,n=new Camera;function a(o,u,s,l){r.set(u,s,l).unproject(n);var f=t[o];if(f!==void 0)for(var c=e.getAttribute("position"),d=0,h=f.length;d<h;d++)c.setXYZ(f[d],r.x,r.y,r.z)}return function(){e=this.geometry,t=this.pointMap;var u=1,s=1;n.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-u,-s,-1),a("n2",u,-s,-1),a("n3",-u,s,-1),a("n4",u,s,-1),a("f1",-u,-s,1),a("f2",u,-s,1),a("f3",-u,s,1),a("f4",u,s,1),a("u1",u*.7,s*1.1,-1),a("u2",-u*.7,s*1.1,-1),a("u3",0,s*2,-1),a("cf1",-u,0,1),a("cf2",u,0,1),a("cf3",0,-s,1),a("cf4",0,s,1),a("cn1",-u,0,-1),a("cn2",u,0,-1),a("cn3",0,-s,-1),a("cn4",0,s,-1),e.getAttribute("position").needsUpdate=!0}}();function BoxHelper(e,t){this.object=e,t===void 0&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(8*3),a=new BufferGeometry;a.setIndex(new BufferAttribute(r,1)),a.addAttribute("position",new BufferAttribute(n,3)),LineSegments.call(this,a,new LineBasicMaterial({color:t})),this.matrixAutoUpdate=!1,this.update()}BoxHelper.prototype=Object.create(LineSegments.prototype);BoxHelper.prototype.constructor=BoxHelper;BoxHelper.prototype.update=function(){var e=new Box3;return function(r){if(r!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,a=e.max,o=this.geometry.attributes.position,u=o.array;u[0]=a.x,u[1]=a.y,u[2]=a.z,u[3]=n.x,u[4]=a.y,u[5]=a.z,u[6]=n.x,u[7]=n.y,u[8]=a.z,u[9]=a.x,u[10]=n.y,u[11]=a.z,u[12]=a.x,u[13]=a.y,u[14]=n.z,u[15]=n.x,u[16]=a.y,u[17]=n.z,u[18]=n.x,u[19]=n.y,u[20]=n.z,u[21]=a.x,u[22]=n.y,u[23]=n.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();BoxHelper.prototype.setFromObject=function(e){return this.object=e,this.update(),this};var lineGeometry,coneGeometry;function ArrowHelper(e,t,r,n,a,o){Object3D.call(this),n===void 0&&(n=16776960),r===void 0&&(r=1),a===void 0&&(a=.2*r),o===void 0&&(o=.2*a),lineGeometry===void 0&&(lineGeometry=new BufferGeometry,lineGeometry.addAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),coneGeometry=new CylinderBufferGeometry(0,.5,1,5,1),coneGeometry.translate(0,-.5,0)),this.position.copy(t),this.line=new Line(lineGeometry,new LineBasicMaterial({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(coneGeometry,new MeshBasicMaterial({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,o)}ArrowHelper.prototype=Object.create(Object3D.prototype);ArrowHelper.prototype.constructor=ArrowHelper;ArrowHelper.prototype.setDirection=function(){var e=new Vector3,t;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}();ArrowHelper.prototype.setLength=function(e,t,r){t===void 0&&(t=.2*e),r===void 0&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()};ArrowHelper.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)};function AxisHelper(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new BufferGeometry;n.addAttribute("position",new Float32BufferAttribute(t,3)),n.addAttribute("color",new Float32BufferAttribute(r,3));var a=new LineBasicMaterial({vertexColors:VertexColors});LineSegments.call(this,n,a)}AxisHelper.prototype=Object.create(LineSegments.prototype);AxisHelper.prototype.constructor=AxisHelper;function CubicPoly(){var e=0,t=0,r=0,n=0;function a(o,u,s,l){e=o,t=s,r=-3*o+3*u-2*s-l,n=2*o-2*u+s+l}return{initCatmullRom:function(o,u,s,l,f){a(u,s,f*(s-o),f*(l-u))},initNonuniformCatmullRom:function(o,u,s,l,f,c,d){var h=(u-o)/f-(s-o)/(f+c)+(s-u)/c,m=(s-u)/c-(l-u)/(c+d)+(l-s)/d;h*=c,m*=c,a(u,s,h,m)},calc:function(o){var u=o*o,s=u*o;return e+t*o+r*u+n*s}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;function CatmullRomCurve3(e){Curve.call(this),this.points=e||[],this.closed=!1}CatmullRomCurve3.prototype=Object.create(Curve.prototype);CatmullRomCurve3.prototype.constructor=CatmullRomCurve3;CatmullRomCurve3.prototype.getPoint=function(e){var t=this.points,r=t.length;r<2&&console.log("duh, you need at least 2 points");var n=(r-(this.closed?0:1))*e,a=Math.floor(n),o=n-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/t.length)+1)*t.length:o===0&&a===r-1&&(a=r-2,o=1);var u,s,l,f;if(this.closed||a>0?u=t[(a-1)%r]:(tmp.subVectors(t[0],t[1]).add(t[0]),u=tmp),s=t[a%r],l=t[(a+1)%r],this.closed||a+2<r?f=t[(a+2)%r]:(tmp.subVectors(t[r-1],t[r-2]).add(t[r-1]),f=tmp),this.type===void 0||this.type==="centripetal"||this.type==="chordal"){var c=this.type==="chordal"?.5:.25,d=Math.pow(u.distanceToSquared(s),c),h=Math.pow(s.distanceToSquared(l),c),m=Math.pow(l.distanceToSquared(f),c);h<1e-4&&(h=1),d<1e-4&&(d=h),m<1e-4&&(m=h),px.initNonuniformCatmullRom(u.x,s.x,l.x,f.x,d,h,m),py.initNonuniformCatmullRom(u.y,s.y,l.y,f.y,d,h,m),pz.initNonuniformCatmullRom(u.z,s.z,l.z,f.z,d,h,m)}else if(this.type==="catmullrom"){var p=this.tension!==void 0?this.tension:.5;px.initCatmullRom(u.x,s.x,l.x,f.x,p),py.initCatmullRom(u.y,s.y,l.y,f.y,p),pz.initCatmullRom(u.z,s.z,l.z,f.z,p)}return new Vector3(px.calc(o),py.calc(o),pz.calc(o))};function CubicBezierCurve3(e,t,r,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=r,this.v3=n}CubicBezierCurve3.prototype=Object.create(Curve.prototype);CubicBezierCurve3.prototype.constructor=CubicBezierCurve3;CubicBezierCurve3.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2,a=this.v3;return new Vector3(CubicBezier(e,t.x,r.x,n.x,a.x),CubicBezier(e,t.y,r.y,n.y,a.y),CubicBezier(e,t.z,r.z,n.z,a.z))};function QuadraticBezierCurve3(e,t,r){Curve.call(this),this.v0=e,this.v1=t,this.v2=r}QuadraticBezierCurve3.prototype=Object.create(Curve.prototype);QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3;QuadraticBezierCurve3.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2;return new Vector3(QuadraticBezier(e,t.x,r.x,n.x),QuadraticBezier(e,t.y,r.y,n.y),QuadraticBezier(e,t.z,r.z,n.z))};function LineCurve3(e,t){Curve.call(this),this.v1=e,this.v2=t}LineCurve3.prototype=Object.create(Curve.prototype);LineCurve3.prototype.constructor=LineCurve3;LineCurve3.prototype.getPoint=function(e){if(e===1)return this.v2.clone();var t=new Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t};function ArcCurve(e,t,r,n,a,o){EllipseCurve.call(this,e,t,r,r,n,a,o)}ArcCurve.prototype=Object.create(EllipseCurve.prototype);ArcCurve.prototype.constructor=ArcCurve;Curve.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};function Spline(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,e),this.type="catmullrom"}Spline.prototype=Object.create(CatmullRomCurve3.prototype);Object.assign(Spline.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Object.assign(Box2.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Box3.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Line3.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};_Math.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()};Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Matrix4.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return e===void 0&&(e=new Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,a,o)}});Plane.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Quaternion.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(Ray.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(Shape.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,e)}});Object.assign(Vector2.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}});Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}});Object.assign(Vector4.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}});Geometry.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(Object3D.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}});Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});PerspectiveCamera.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}});Object.assign(BufferGeometry.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}}});Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(WebGLRenderer.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}});Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?CullFaceFront:CullFaceBack},set:function(e){var t=e!==CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}});Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Audio.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,r=new AudioLoader;return r.load(e,function(n){t.setBuffer(n)}),this};AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};class WasmTestBaseClass{warmUpRunLoops;benchmarkRunLoops;modules;shouldOverrideError;performance;constructor(t,r,n){this.warmUpRunLoops=t,this.benchmarkRunLoops=r,this.modules=n,this.shouldOverrideError=Error("Should override this function in sub class"),typeof window=="undefined"&&typeof global=="object"?this.performance=require("perf_hooks").performance:this.performance=performance}initTestData(){throw this.shouldOverrideError}runJavaScript(){throw this.shouldOverrideError}runCWasm(){throw this.shouldOverrideError}runRustWasm(){throw this.shouldOverrideError}getAllRunWasmFunc(){const{cModule:t,rustModule:r}=this.modules,{runCWasm:n,runRustWasm:a}=this,o=[];return t&&o.push(n.bind(this)),r&&o.push(a.bind(this)),o}check(t,r){if(typeof t=="number")return t===r;if(Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView))return this.equalArray(t,r);throw this.shouldOverrideError}runWasmBenchmark(){const t={};for(const r of this.getAllRunWasmFunc()){for(let o=0;o<this.warmUpRunLoops;o++)r.call(this);let n=0;for(let o=0;o<this.benchmarkRunLoops;o++){let u=this.performance.now();r(),n+=this.performance.now()-u}const a=r.name.replace("bound ","");t[a]=(n/this.benchmarkRunLoops).toFixed(4)}return t}runJavaScriptBenchmark(){for(let r=0;r<this.warmUpRunLoops;r++)this.runJavaScript();let t=0;for(let r=0;r<this.benchmarkRunLoops;r++){let n=this.performance.now();this.runJavaScript(),t+=this.performance.now()-n}return(t/this.benchmarkRunLoops).toFixed(4)}checkFunctionality(){const t=this.runJavaScript();for(const r of this.getAllRunWasmFunc())if(!this.check(t,r()))return!1;return!0}equalArray(t,r){if(t.length!==r.length)return!1;for(let n=0,a=t.length;n<a;n++)if(t[n]!==r[n])return!1;return!0}copyArray(t,r){for(let n=0,a=t.length;n<a;n++)r[n]=t[n]}}class WasmTestImageBaseClass extends WasmTestBaseClass{image;canvas;jsCanvas;wsCanvas;jsContext;wsContext;width;height;imageData;jsImageData;wsImageData;constructor(t,r,n,a,o,u,s){super(r,n,a);this.image=o,this.width=this.image.width,this.height=this.image.height,this.jsCanvas=u,this.wsCanvas=s}initImageCanvasData(){this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height;const t=this.canvas.getContext("2d");t.drawImage(this.image,0,0),this.imageData=t.getImageData(0,0,this.width,this.height),this.jsCanvas.width=this.width,this.jsCanvas.height=this.height,this.jsContext=this.jsCanvas.getContext("2d"),this.jsImageData=this.jsContext.getImageData(0,0,this.width,this.height),this.wsCanvas.width=this.width,this.wsCanvas.height=this.height,this.wsContext=this.wsCanvas.getContext("2d"),this.wsImageData=this.wsContext.getImageData(0,0,this.width,this.height)}}class WasmTestVideoAbstractBaseClass extends WasmTestBaseClass{module;video;renderer;gl;texture;renderTarget;camera;scene;jsCanvas;wsCanvas;jsContext;wsContext;videoDataArray;jsImageData;jsImageDataArray;wsImageData;wsImageDataArray;width;height;length;jsElapsedTime=0;wsElapsedTime=0;count=0;videoCanvasDataInited=!1;pointer1;constructor(t,r,n,a,o,u,s){super(r,n,{cModule:a});this.module=a,this.video=o,this.width=this.video.videoWidth,this.height=this.video.videoHeight,this.length=this.width*this.height*4,this.jsCanvas=u,this.wsCanvas=s,this.jsCanvas.width=this.width,this.jsCanvas.height=this.height,this.jsContext=this.jsCanvas.getContext("2d"),this.wsCanvas.width=this.width,this.wsCanvas.height=this.height,this.wsContext=this.wsCanvas.getContext("2d"),this.initThreeData()}runWasm(){throw this.shouldOverrideError}initThreeData(){this.renderer=new WebGLRenderer({antialias:!0}),this.gl=this.renderer.getContext(),this.texture=new Texture(this.video),this.texture.minFilter=NearestFilter,this.texture.magFilter=NearestFilter,this.texture.format=RGBAFormat,this.texture.wrapS=ClampToEdgeWrapping,this.texture.wrapT=ClampToEdgeWrapping,this.renderTarget=new WebGLRenderTarget(this.width,this.height),this.camera=new OrthographicCamera(-1,1,1,-1,0,1),this.scene=new Scene;const t={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	gl_FragColor = texture2D(tDiffuse, vec2(vUv.x, 1.0-vUv.y));","}"].join(`
`)},r=new ShaderMaterial({uniforms:UniformsUtils.clone(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader});r.uniforms.tDiffuse.value=this.texture;const n=new Mesh(new PlaneBufferGeometry(2,2),r);n.frustumCulled=!1,this.scene.add(n)}updateOriginalImageData(){this.texture.needsUpdate=!0,this.renderer.render(this.scene,this.camera,this.renderTarget),this.gl.readPixels(0,0,this.width,this.height,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.videoDataArray)}runJavaScriptBenchmark(){const t=1;let r=0;for(let n=0;n<t;n++){let a=performance.now();this.runJavaScript(),r+=performance.now()-a}return r/t}runWasmBenchmark(){const t=1;let r=0;for(let n=0;n<t;n++){let a=performance.now();this.runWasm(),r+=performance.now()-a}return r/t}initVideoCanvasData(){this.videoDataArray=new Uint8Array(this.length),this.updateOriginalImageData(),this.jsImageDataArray=new Uint8ClampedArray(this.length),this.jsImageData=new ImageData(this.jsImageDataArray,this.width,this.height),this.pointer1=this.module._malloc(this.length);const t=this.pointer1,r=new Uint8ClampedArray(this.module.HEAPU8.buffer);this.wsImageDataArray=r.subarray(t,t+this.length),this.wsImageData=new ImageData(this.wsImageDataArray,this.width,this.height)}}class CollisionDetectionWasmTest extends WasmTestBaseClass{array;dataSize;positions;radiuses;javascriptResult;wasmtResult;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.array=new Int32Array(this.dataSize),this.radiuses=new Float64Array(t),this.positions=[],this.javascriptResult=new Uint8Array(t/8),this.wasmtResult=new Uint8Array(t/8),this.initTestData()}static Position=class{x;y;z;constructor(t,r,n){this.x=t,this.y=r,this.z=n}};initTestData(){this.initPositions(),this.initRadiuses()}initPositions(){for(let t=0;t<this.dataSize;t++){const r=Math.random()*2e3-1e3,n=Math.random()*2e3-1e3,a=Math.random()*2e3-1e3;this.positions[t]=new CollisionDetectionWasmTest.Position(r,n,a)}}initRadiuses(){for(let t=0,r=this.radiuses.length;t<r;t++)this.radiuses[t]=Math.random()*10}check(t,r){return t===r&&this.equalArray(this.javascriptResult,this.wasmtResult)}clearArray(t){for(let r=0,n=t.length;r<n;r++)t[r]=0}runCWasm(){this.clearArray(this.wasmtResult);const t=this.modules.cModule;let r=t._malloc(this.positions.length*3*8),n=t._malloc(this.radiuses.length*8),a=t._malloc(this.wasmtResult.length),o=r/8,u=n/8,s=a;this.setPositionsToFloat64Array(this.positions,t.HEAPF64,o),t.HEAPF64.set(this.radiuses,u);let l=t._collisionDetection(r,n,a,this.dataSize);return this.wasmtResult.set(t.HEAPU8.subarray(s,s+this.wasmtResult.length)),t._free(r),t._free(n),t._free(a),l}runRustWasm(){return this.clearArray(this.wasmtResult),this.modules.rustModule.collision_detection(this.positions,this.radiuses,this.wasmtResult,this.dataSize)}runJavaScript(){this.clearArray(this.javascriptResult);let t=0;for(let r=0;r<this.dataSize;r++){let n=this.positions[r],a=this.radiuses[r],o=0;for(let l=r+1;l<this.dataSize;l++){let f=this.positions[l],c=n.x-f.x,d=n.y-f.y,h=n.z-f.z,m=Math.sqrt(c*c+d*d+h*h);if(a>m){o=1,t++;break}}let u=r/8|0,s=7-r%8;o===0?this.javascriptResult[u]&=~(1<<s):this.javascriptResult[u]|=1<<s}return t}setPositionsToFloat64Array(t,r,n){for(let a=0,o=t.length;a<o;a++){let u=n+a*3;r[u+0]=t[a].x,r[u+1]=t[a].y,r[u+2]=t[a].z}}}var Module$b=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"fib.wast",wasmBinaryFile=Module.wasmBinaryFile||"fib.wasm",asmjsCodeFile=Module.asmjsCodeFile||"fib.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"fib.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module._fib=function(){return Module.asm._fib.apply(null,arguments)},Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class FibWasmTest extends WasmTestBaseClass{dataSize;constructor(t,r,n,a){super(r,n,a);this.dataSize=t}runCWasm(){return this.modules.cModule._fib(this.dataSize)}runRustWasm(){return this.modules.rustModule.fib(this.dataSize)}runJavaScript(){function t(r){return r===1||r===2?1:t(r-1)+t(r-2)}return t(this.dataSize)}}var Module$a=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"imageConvolute.wast",wasmBinaryFile=Module.wasmBinaryFile||"imageConvolute.wasm",asmjsCodeFile=Module.asmjsCodeFile||"imageConvolute.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"imageConvolute.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm,Module._imageConvolute=function(){return Module.asm._imageConvolute.apply(null,arguments)},Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)},_malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class ImageConvoluteWasmTest extends WasmTestImageBaseClass{weights=new Float64Array([1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25]);wWidth=5;wHeight=5;constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s);this.initImageCanvasData()}check(t,r){return this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.equalArray(this.jsImageData.data,this.wsImageData.data)}runCWasm(){const t=this.modules.cModule;let r=t._malloc(this.imageData.data.length),n=t._malloc(this.wsImageData.data.length),a=t._malloc(this.weights.length*8),o=r,u=n,s=a/8;t.HEAPU8.set(this.imageData.data,o),t.HEAPF64.set(this.weights,s),t._imageConvolute(r,n,this.width,this.height,a,this.wWidth,this.wHeight),this.wsImageData.data.set(t.HEAPU8.subarray(u,u+this.wsImageData.data.length)),t._free(r),t._free(n),t._free(a)}runRustWasm(){this.modules.rustModule.imageConvolute(this.imageData.data,this.wsImageData.data,this.width,this.height,this.weights,this.wWidth,this.wHeight)}runJavaScript(){const t=this.wWidth/2|0,r=this.wHeight/2|0;for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++){let o=0,u=0,s=0,l=0;for(let c=0;c<this.wHeight;c++){const d=n+c-r;if(!(d<0||d>=this.height))for(let h=0;h<this.wWidth;h++){const m=a+h-t;if(m<0||m>=this.width)continue;let p=d*this.width+m,_=this.weights[c*this.wWidth+h];o+=this.imageData.data[p*4+0]*_,u+=this.imageData.data[p*4+1]*_,s+=this.imageData.data[p*4+2]*_,l+=this.imageData.data[p*4+3]*_}}const f=n*this.width+a;this.jsImageData.data[f*4+0]=o|0,this.jsImageData.data[f*4+1]=u|0,this.jsImageData.data[f*4+2]=s|0,this.jsImageData.data[f*4+3]=l|0}}}var Module$9=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"imageGrayscale.wast",wasmBinaryFile=Module.wasmBinaryFile||"imageGrayscale.wasm",asmjsCodeFile=Module.asmjsCodeFile||"imageGrayscale.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"imageGrayscale.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._imageGrayscale=function(){return Module.asm._imageGrayscale.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class ImageGrayscaleWasmTest extends WasmTestImageBaseClass{constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s);this.initImageCanvasData(),this.initTestData()}initTestData(){this.copyArray(this.imageData.data,this.jsImageData.data),this.copyArray(this.imageData.data,this.wsImageData.data)}check(t,r){return this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.equalArray(this.jsImageData.data,this.wsImageData.data)}getAllRunWasmFunc(){return[()=>{const r=this.modules.cModule,n=r._malloc(this.wsImageData.data.length),a=n;r.HEAPU8.set(this.wsImageData.data,a),r._imageGrayscale(n,this.width,this.height),this.wsImageData.data.set(r.HEAPU8.subarray(a,a+this.wsImageData.data.length)),r._free(n)}]}runJavaScript(){for(let t=0,r=this.width*this.height;t<r;t++){const n=this.jsImageData.data[t*4+0],a=this.jsImageData.data[t*4+1],o=this.jsImageData.data[t*4+2];this.jsImageData.data[t*4+0]=this.jsImageData.data[t*4+1]=this.jsImageData.data[t*4+2]=.2126*n+.7152*a+.0722*o|0}}}var Module$8=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"imageThreshold.wast",wasmBinaryFile=Module.wasmBinaryFile||"imageThreshold.wasm",asmjsCodeFile=Module.asmjsCodeFile||"imageThreshold.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"imageThreshold.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm,Module._imageThreshold=function(){return Module.asm._imageThreshold.apply(null,arguments)};var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},_free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class ImageThresholdWasmTest extends WasmTestImageBaseClass{_work;constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s);this._work=new Int32Array(this.width*this.height),this.initImageCanvasData(),this.initTestData()}initTestData(){this.copyArray(this.imageData.data,this.jsImageData.data),this.copyArray(this.imageData.data,this.wsImageData.data)}check(t,r){return this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.equalArray(this.jsImageData.data,this.wsImageData.data)}getAllRunWasmFunc(){return[()=>{const r=this.modules.cModule,n=r._malloc(this.wsImageData.data.length),a=n;r.HEAPU8.set(this.wsImageData.data,a),r._imageThreshold(n,this.width,this.height),this.wsImageData.data.set(r.HEAPU8.subarray(a,a+this.wsImageData.data.length)),r._free(n)}]}runJavaScript(){const t=this._work,n=8/2,o=(100-15)/100;for(let u=0;u<this.width;u++){let s=0;for(let l=0;l<this.height;l++){let f=l*this.width+u,c=this.jsImageData.data[f*4+0],d=this.jsImageData.data[f*4+1],h=this.jsImageData.data[f*4+2];this.jsImageData.data[f*4]=.2126*c+.7152*d+.0722*h|0,s+=this.jsImageData.data[f*4],u===0?t[f]=s:t[f]=t[f-1]+s}}for(let u=0;u<this.width;u++)for(let s=0;s<this.height;s++){let l=u-n,f=u+n,c=s-n,d=s+n,h=l-1,m=c-1;l<0&&(l=0),f>=this.width&&(f=this.width-1),h<0&&(h=0),c<0&&(c=0),d>=this.height&&(d=this.height-1),m<0&&(m=0);const p=(f-l)*(d-c),_=s*this.width+u,M=d*this.width+f,y=m*this.width+f,v=d*this.width+h,g=m*this.width+h,E=t[M]-t[y]-t[v]+t[g];this.jsImageData.data[_*4]*p<=E*o?this.jsImageData.data[_*4+0]=this.jsImageData.data[_*4+1]=this.jsImageData.data[_*4+2]=0:this.jsImageData.data[_*4+0]=this.jsImageData.data[_*4+1]=this.jsImageData.data[_*4+2]=255}}}var Module$7=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"multiplyDouble.wast",wasmBinaryFile=Module.wasmBinaryFile||"multiplyDouble.wasm",asmjsCodeFile=Module.asmjsCodeFile||"multiplyDouble.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"multiplyDouble.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module._multiplyDouble=function(){return Module.asm._multiplyDouble.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class MultiplyDoubleWasmTest extends WasmTestBaseClass{dataSize;constructor(t,r,n,a){super(r,n,a);this.dataSize=t}runCWasm(){return this.modules.cModule._multiplyDouble(1,1,this.dataSize)}runRustWasm(){return this.modules.rustModule.multiply_double(1,1,this.dataSize)}runJavaScript(){function t(r,n,a){let o=1;for(let u=0;u<a;u++)o=o*r*n;return o}return t(1,1,this.dataSize)}}var Module$6=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"multiplyIntVec.wast",wasmBinaryFile=Module.wasmBinaryFile||"multiplyIntVec.wasm",asmjsCodeFile=Module.asmjsCodeFile||"multiplyIntVec.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"multiplyIntVec.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._multiplyIntVec=function(){return Module.asm._multiplyIntVec.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class MultiplyIntVecWasmTest extends WasmTestBaseClass{dataSize;src1;src2;res1;res2;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.src1=new Int32Array(this.dataSize),this.src2=new Int32Array(this.dataSize),this.res1=new Int32Array(this.dataSize),this.res2=new Int32Array(this.dataSize),this.initTestData()}initTestData(){function t(r){for(let n=0,a=r.length;n<a;n++)r[n]=(Math.random()*2e4|0)-1e4}t(this.src1),t(this.src2)}runCWasm(){const{cModule:t}=this.modules;let r=t._malloc(this.src1.length*4),n=t._malloc(this.src2.length*4),a=t._malloc(this.dataSize*4),o=r/4,u=n/4,s=a/4;return t.HEAP32.set(this.src1,o),t.HEAP32.set(this.src2,u),t._multiplyIntVec(r,n,a,this.dataSize),this.res2.set(t.HEAP32.subarray(s,s+this.dataSize)),t._free(r),t._free(n),t._free(a),this.res2}runRustWasm(){return this.modules.rustModule.multiply_int_vec(this.src1,this.src2,this.res2,this.dataSize),this.res2}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.res1[t]=this.src1[t]*this.src2[t];return this.res1}}var Module$5=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"multiplyDoubleVec.wast",wasmBinaryFile=Module.wasmBinaryFile||"multiplyDoubleVec.wasm",asmjsCodeFile=Module.asmjsCodeFile||"multiplyDoubleVec.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"multiplyDoubleVec.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)};var _emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)},_memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)};Module._multiplyDoubleVec=function(){return Module.asm._multiplyDoubleVec.apply(null,arguments)},Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},_free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class MultiplyDoubleVecWasmTest extends WasmTestBaseClass{dataSize;src1;src2;res1;res2;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.src1=new Float64Array(this.dataSize),this.src2=new Float64Array(this.dataSize),this.res1=new Float64Array(this.dataSize),this.res2=new Float64Array(this.dataSize),this.initTestData()}initTestData(){function t(r){for(let n=0,a=r.length;n<a;n++)r[n]=Math.random()*2e4-1e4}t(this.src1),t(this.src2)}runCWasm(){const{cModule:t}=this.modules;let r=t._malloc(this.src1.length*8),n=t._malloc(this.src2.length*8),a=t._malloc(this.res2.length*8),o=r/8,u=n/8,s=a/8;return t.HEAPF64.set(this.src1,o),t.HEAPF64.set(this.src2,u),t._multiplyDoubleVec(r,n,a,this.dataSize),this.res2.set(t.HEAPF64.subarray(s,s+this.dataSize)),t._free(r),t._free(n),t._free(a),this.res2}runRustWasm(){return this.modules.rustModule.multiply_double_vec(this.src1,this.src2,this.res2,this.dataSize),this.res2}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.res1[t]=this.src1[t]*this.src2[t];return this.res1}}var Module$4=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"quicksortInt.wast",wasmBinaryFile=Module.wasmBinaryFile||"quicksortInt.wasm",asmjsCodeFile=Module.asmjsCodeFile||"quicksortInt.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"quicksortInt.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module._quicksortInt=function(){return Module.asm._quicksortInt.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class quicksortIntWasmTest extends WasmTestBaseClass{dataSize;array0;array1;array2;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.array0=new Int32Array(this.dataSize),this.array1=new Int32Array(this.dataSize),this.array2=new Int32Array(this.dataSize),this.initTestData()}initTestData(){for(let t=0,r=this.array0.length;t<r;t++)this.array0[t]=(Math.random()*2e4|0)-1e4}check(t,r){function n(a){for(let o=1,u=a.length;o<u;o++)if(a[o-1]>a[o])return!1;return!0}return n(this.array1)?this.equalArray(this.array1,this.array2):!1}getAllRunWasmFunc(){return[()=>{const r=this.modules.cModule;this.copyArray(this.array0,this.array2);let n=r._malloc(this.array2.length*4),a=n/4;r.HEAP32.set(this.array2,a),r._quicksortInt(n,0,this.array2.length-1),this.array2.set(r.HEAP32.subarray(a,a+this.array2.length)),r._free(n)}]}runJavaScript(){function t(r,n,a){if(n>=a)return;let o=r[a],u=0,s=0;for(;u+s<a-n;){let l=r[n+u];l<o?u++:(r[n+u]=r[a-s-1],r[a-s-1]=o,r[a-s]=l,s++)}t(r,n,n+u-1),t(r,n+u+1,a)}this.copyArray(this.array0,this.array1),t(this.array1,0,this.array1.length-1)}}var Module$3=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"quicksortDouble.wast",wasmBinaryFile=Module.wasmBinaryFile||"quicksortDouble.wasm",asmjsCodeFile=Module.asmjsCodeFile||"quicksortDouble.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"quicksortDouble.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module._quicksortDouble=function(){return Module.asm._quicksortDouble.apply(null,arguments)},Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class quicksortDoubleWasmTest extends WasmTestBaseClass{dataSize;array0;array1;array2;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.array0=new Float64Array(this.dataSize),this.array1=new Float64Array(this.dataSize),this.array2=new Float64Array(this.dataSize),this.initTestData()}initTestData(){for(let t=0,r=this.array0.length;t<r;t++)this.array0[t]=Math.random()*200-100}check(t,r){function n(a){for(let o=1,u=a.length;o<u;o++)if(a[o-1]>a[o])return!1;return!0}return n(this.array1)?this.equalArray(this.array1,this.array2):!1}getAllRunWasmFunc(){return[()=>{const r=this.modules.cModule;this.copyArray(this.array0,this.array2);let n=r._malloc(this.array2.length*8),a=n/8;r.HEAPF64.set(this.array2,a),r._quicksortDouble(n,0,this.array2.length-1),this.array2.set(r.HEAPF64.subarray(a,a+this.array2.length)),r._free(n)}]}runJavaScript(){function t(r,n,a){if(n>=a)return;let o=r[a],u=0,s=0;for(;u+s<a-n;){let l=r[n+u];l<o?u++:(r[n+u]=r[a-s-1],r[a-s-1]=o,r[a-s]=l,s++)}t(r,n,n+u-1),t(r,n+u+1,a)}this.copyArray(this.array0,this.array1),t(this.array1,0,this.array1.length-1)}}var Module$2=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"sumInt.wast",wasmBinaryFile=Module.wasmBinaryFile||"sumInt.wasm",asmjsCodeFile=Module.asmjsCodeFile||"sumInt.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"sumInt.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},_free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)},Module._sumInt=function(){return Module.asm._sumInt.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class SumIntWasmTest extends WasmTestBaseClass{array;dataSize;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.array=new Int32Array(this.dataSize),this.initTestData()}initTestData(){for(let t=0,r=this.array.length;t<r;t++)this.array[t]=(Math.random()*2e4|0)-1e4}runCWasm(){const{cModule:t}=this.modules,r=t._malloc(this.array.length*4),n=r/4;t.HEAP32.set(this.array,n);const a=t._sumInt(r,this.dataSize);return t._free(r),a}runRustWasm(){return this.modules.rustModule.sum_int(this.array,this.dataSize)}runJavaScript(){let t=0;for(let r=0;r<this.dataSize;r++)t+=this.array[r];return t}}var Module$1=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216,MIN_TOTAL_MEMORY=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}Module.reallocBuffer||(Module.reallocBuffer=function(e){var t;try{if(ArrayBuffer.transfer)t=ArrayBuffer.transfer(buffer,e);else{var r=HEAP8;t=new ArrayBuffer(e);var n=new Int8Array(t);n.set(r)}}catch{return!1}var a=_emscripten_replace_memory(t);return a?t:!1});function enlargeMemory(){var e=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE,t=2147483648-e;if(HEAP32[DYNAMICTOP_PTR>>2]>t)return!1;for(TOTAL_MEMORY=Math.max(TOTAL_MEMORY,MIN_TOTAL_MEMORY);TOTAL_MEMORY<HEAP32[DYNAMICTOP_PTR>>2];)TOTAL_MEMORY<=536870912?TOTAL_MEMORY=alignUp(2*TOTAL_MEMORY,e):TOTAL_MEMORY=Math.min(alignUp((3*TOTAL_MEMORY+2147483648)/4,e),t);var r=Module.reallocBuffer(TOTAL_MEMORY);return!r||r.byteLength!=TOTAL_MEMORY?!1:(updateGlobalBuffer(r),updateGlobalBufferViews(),!0)}var byteLength;try{byteLength=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get),byteLength(new ArrayBuffer(4))}catch(e){byteLength=function(t){return t.byteLength}}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||16777216;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"sumDouble.wast",wasmBinaryFile=Module.wasmBinaryFile||"sumDouble.wasm",asmjsCodeFile=Module.asmjsCodeFile||"sumDouble.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8528,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"sumDouble.js.mem":null;var STATIC_BUMP=8528;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}Module._memset=_memset;function _abort(){Module.abort()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=34,Module.wasmMaxTableSize=34;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0,byteLength},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___cxa_begin_catch,___syscall54,_pthread_setspecific,___lock,_abort,___setErrNo,___syscall6,___syscall140,___gxx_personality_v0,_pthread_once,_emscripten_memcpy_big,_pthread_key_create,___unlock,___resumeException,__ZSt18uncaught_exceptionv,___assert_fail,___syscall146,___cxa_find_matching_catch,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)};Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)};var _memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)};Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)};var _memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)},_emscripten_replace_memory=Module._emscripten_replace_memory=function(){return Module.asm._emscripten_replace_memory.apply(null,arguments)};Module._sumDouble=function(){return Module.asm._sumDouble.apply(null,arguments)},Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)};var _sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)};Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};if(Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module};class SumDoubleWasmTest extends WasmTestBaseClass{array;dataSize;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.array=new Float64Array(this.dataSize),this.initTestData()}initTestData(){for(let t=0,r=this.array.length;t<r;t++)this.array[t]=Math.random()*2e4-1e4}runCWasm(){const{cModule:t}=this.modules,r=t._malloc(this.array.length*8),n=r/8;t.HEAPF64.set(this.array,n);const a=t._sumDouble(r,this.dataSize);return t._free(r),a}runRustWasm=()=>this.modules.rustModule.sum_double(this.array,this.dataSize);runJavaScript(){let t=0;for(let r=0;r<this.dataSize;r++)t+=this.array[r];return t}}class VideoConvoluteWasmTest extends WasmTestVideoAbstractBaseClass{pointer2;pointer3;weights=new Float64Array([1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25,1/25]);wWidth=5;wHeight=5;constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s)}initVideoCanvasData(){const t=new Uint8Array(this.module.HEAPU8.buffer);this.pointer1=this.module._malloc(this.length);const r=this.pointer1;this.videoDataArray=t.subarray(r,r+this.length),this.updateOriginalImageData(),this.jsImageDataArray=new Uint8ClampedArray(this.length),this.jsImageData=new ImageData(this.jsImageDataArray,this.width,this.height),this.pointer2=this.module._malloc(this.length),this.pointer3=this.module._malloc(this.weights.length*8);const n=this.pointer2,a=this.pointer3/8;this.module.HEAPF64.set(this.weights,a);const o=new Uint8ClampedArray(this.module.HEAPU8.buffer);this.wsImageDataArray=o.subarray(n,n+this.length),this.wsImageData=new ImageData(this.wsImageDataArray,this.width,this.height)}render(t){if(this.updateOriginalImageData(),this.jsElapsedTime+=this.runJavaScriptBenchmark(),this.wsElapsedTime+=this.runWasmBenchmark(),this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.count++,this.count===this.benchmarkRunLoops){const r=(this.jsElapsedTime/this.benchmarkRunLoops).toFixed(4),n=(this.wsElapsedTime/this.benchmarkRunLoops).toFixed(4);t.jsPerformance=r,t.wsPerformance=n,t.comparison=(Number(r)/Number(n)).toFixed(4),this.jsElapsedTime=0,this.wsElapsedTime=0,this.count=0}}checkFunctionality(){return this.videoCanvasDataInited||(this.initVideoCanvasData(),this.videoCanvasDataInited=!0),this.runWasm(),this.runJavaScript(),this.equalArray(this.jsImageDataArray,this.wsImageDataArray)}runWasm(){this.module._imageConvolute(this.pointer1,this.pointer2,this.width,this.height,this.pointer3,this.wWidth,this.wHeight)}runJavaScript(){const t=this.wWidth/2|0,r=this.wHeight/2|0;for(let n=0;n<this.height;n++)for(let a=0;a<this.width;a++){let o=0,u=0,s=0,l=0;for(let c=0;c<this.wHeight;c++){const d=n+c-r;if(!(d<0||d>=this.height))for(let h=0;h<this.wWidth;h++){const m=a+h-t;if(m<0||m>=this.width)continue;const p=d*this.width+m,_=this.weights[c*this.wWidth+h];o+=this.videoDataArray[p*4+0]*_,u+=this.videoDataArray[p*4+1]*_,s+=this.videoDataArray[p*4+2]*_,l+=this.videoDataArray[p*4+3]*_}}const f=n*this.width+a;this.jsImageDataArray[f*4+0]=o|0,this.jsImageDataArray[f*4+1]=u|0,this.jsImageDataArray[f*4+2]=s|0,this.jsImageDataArray[f*4+3]=l|0}}}class VideoGrayscaleWasmTest extends WasmTestVideoAbstractBaseClass{constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s)}render(t){if(this.updateOriginalImageData(),this.copyArray(this.videoDataArray,this.jsImageDataArray),this.copyArray(this.videoDataArray,this.wsImageDataArray),this.jsElapsedTime+=this.runJavaScriptBenchmark(),this.wsElapsedTime+=this.runWasmBenchmark(),this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.count++,this.count===this.benchmarkRunLoops){const r=(this.jsElapsedTime/this.benchmarkRunLoops).toFixed(4),n=(this.wsElapsedTime/this.benchmarkRunLoops).toFixed(4);t.jsPerformance=r,t.wsPerformance=n,t.comparison=(Number(r)/Number(n)).toFixed(4),this.jsElapsedTime=0,this.wsElapsedTime=0,this.count=0}}checkFunctionality(){return this.videoCanvasDataInited||(this.initVideoCanvasData(),this.videoCanvasDataInited=!0),this.copyArray(this.videoDataArray,this.jsImageDataArray),this.copyArray(this.videoDataArray,this.wsImageDataArray),this.runWasm(),this.runJavaScript(),this.equalArray(this.jsImageDataArray,this.wsImageDataArray)}runWasm(){this.module._imageGrayscale(this.pointer1,this.width,this.height)}runJavaScript(){for(let t=0,r=this.width*this.height;t<r;t++){let n=this.jsImageDataArray[t*4+0],a=this.jsImageDataArray[t*4+1],o=this.jsImageDataArray[t*4+2];this.jsImageDataArray[t*4+0]=this.jsImageDataArray[t*4+1]=this.jsImageDataArray[t*4+2]=.2126*n+.7152*a+.0722*o|0}}}var Module=function(Module){Module=Module||{};var Module=Module,Module;Module||(Module=(typeof Module!="undefined"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;if(Module.ENVIRONMENT)if(Module.ENVIRONMENT==="WEB")ENVIRONMENT_IS_WEB=!0;else if(Module.ENVIRONMENT==="WORKER")ENVIRONMENT_IS_WORKER=!0;else if(Module.ENVIRONMENT==="NODE")ENVIRONMENT_IS_NODE=!0;else if(Module.ENVIRONMENT==="SHELL")ENVIRONMENT_IS_SHELL=!0;else throw new Error("The provided Module['ENVIRONMENT'] value is not valid. It must be one of: WEB|WORKER|NODE|SHELL.");else ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof require=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=console.log),Module.printErr||(Module.printErr=console.warn);var nodeFS,nodePath;Module.read=function(t,r){nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),t=nodePath.normalize(t);var n=nodeFS.readFileSync(t);return r?n:n.toString()},Module.readBinary=function(t){var r=Module.read(t,!0);return r.buffer||(r=new Uint8Array(r)),assert(r.buffer),r},Module.load=function(t){globalEval(read(t))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),typeof module!="undefined"&&(module.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr!="undefined"&&(Module.printErr=printErr),typeof read!="undefined"?Module.read=read:Module.read=function(){throw"no read() available"},Module.readBinary=function(t){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));var r=read(t,"binary");return assert(typeof r=="object"),r},typeof scriptArgs!="undefined"?Module.arguments=scriptArgs:typeof arguments!="undefined"&&(Module.arguments=arguments),typeof quit=="function"&&(Module.quit=function(e,t){quit(e)});else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(null),r.responseText},ENVIRONMENT_IS_WORKER&&(Module.readBinary=function(t){var r=new XMLHttpRequest;return r.open("GET",t,!1),r.responseType="arraybuffer",r.send(null),r.response}),Module.readAsync=function(t,r,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){a.status==200||a.status==0&&a.response?r(a.response):n()},a.onerror=n,a.send(null)},typeof arguments!="undefined"&&(Module.arguments=arguments),typeof console!="undefined")Module.print||(Module.print=function(t){console.log(t)}),Module.printErr||(Module.printErr=function(t){console.warn(t)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump!="undefined"?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle=="undefined"&&(Module.setWindowTitle=function(e){document.title=e})}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}!Module.load&&Module.read&&(Module.load=function(t){globalEval(Module.read(t))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.quit||(Module.quit=function(e,t){throw t}),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=void 0;var Runtime={setTempRet0:function(e){return tempRet0=e,e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*")return Runtime.QUANTUM_SIZE;if(e[0]==="i"){var t=parseInt(e.substr(1));return assert(t%8==0),t/8}else return 0}}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(e,t){return t==="double"||t==="i64"?e&7&&(assert((e&7)==4),e+=4):assert((e&3)==0),e},getAlignSize:function(e,t,r){return!r&&(e=="i64"||e=="double")?8:e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8)},dynCall:function(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var r=Runtime.funcWrappers[t];return r[e]||(t.length===1?r[e]=function(){return Runtime.dynCall(t,e)}:t.length===2?r[e]=function(a){return Runtime.dynCall(t,e,[a])}:r[e]=function(){return Runtime.dynCall(t,e,Array.prototype.slice.call(arguments))}),r[e]},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=STACKTOP+e|0,STACKTOP=STACKTOP+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=STATICTOP+e|0,STATICTOP=STATICTOP+15&-16,t},dynamicAlloc:function(e){var t=HEAP32[DYNAMICTOP_PTR>>2],r=(t+e+15|0)&-16;if(HEAP32[DYNAMICTOP_PTR>>2]=r,r>=TOTAL_MEMORY){var n=enlargeMemory();if(!n)return HEAP32[DYNAMICTOP_PTR>>2]=t,0}return t},alignMemory:function(e,t){var r=e=Math.ceil(e/(t||16))*(t||16);return r},makeBigInt:function(e,t,r){var n=r?+(e>>>0)+ +(t>>>0)*4294967296:+(e>>>0)+ +(t|0)*4294967296;return n},GLOBAL_BASE:1024,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=0;function assert(e,t){e||abort("Assertion failed: "+t)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;if(e!=null&&e!==0){var r=(e.length<<2)+1;t=Runtime.stackAlloc(r),stringToUTF8(e,t,r)}return t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(t,r,n,a,o){var u=getCFunc(t),s=[],l=0;if(a)for(var f=0;f<a.length;f++){var c=toC[n[f]];c?(l===0&&(l=Runtime.stackSave()),s[f]=c(a[f])):s[f]=a[f]}var d=u.apply(null,s);if(r==="string"&&(d=Pointer_stringify(d)),l!==0){if(o&&o.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(l)});return}Runtime.stackRestore(l)}return d};var sourceRegex=/^function\s*[a-zA-Z$_0-9]*\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource=null;function ensureJSsource(){if(!JSsource){JSsource={};for(var e in JSfuncs)JSfuncs.hasOwnProperty(e)&&(JSsource[e]=parseJSFunc(JSfuncs[e]))}}cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return e==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){ensureJSsource(),funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"=("+convertCode.returnValue+");"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(ensureJSsource(),funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(e,t,r,n){switch(r=r||"i8",r.charAt(r.length-1)==="*"&&(r="i32"),r){case"i1":HEAP8[e>>0]=t;break;case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.setValue=setValue;function getValue(e,t,r){switch(t=t||"i8",t.charAt(t.length-1)==="*"&&(t="i32"),t){case"i1":return HEAP8[e>>0];case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":return HEAP32[e>>2];case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(e,t,r,n){var a,o;typeof e=="number"?(a=!0,o=e):(a=!1,o=e.length);var u=typeof t=="string"?t:null,s;if(r==ALLOC_NONE?s=n:s=[typeof _malloc=="function"?_malloc:Runtime.staticAlloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][r===void 0?ALLOC_STATIC:r](Math.max(o,u?1:t.length)),a){var n=s,l;for(assert((s&3)==0),l=s+(o&~3);n<l;n+=4)HEAP32[n>>2]=0;for(l=s+o;n<l;)HEAP8[n++>>0]=0;return s}if(u==="i8")return e.subarray||e.slice?HEAPU8.set(e,s):HEAPU8.set(new Uint8Array(e),s),s;for(var f=0,c,d,h;f<o;){var m=e[f];if(typeof m=="function"&&(m=Runtime.getFunctionIndex(m)),c=u||t[f],c===0){f++;continue}c=="i64"&&(c="i32"),setValue(s+f,m,c),h!==c&&(d=Runtime.getNativeTypeSize(c),h=c),f+=d}return s}Module.allocate=allocate;function getMemory(e){return staticSealed?runtimeInitialized?_malloc(e):Runtime.dynamicAlloc(e):Runtime.staticAlloc(e)}Module.getMemory=getMemory;function Pointer_stringify(e,t){if(t===0||!e)return"";for(var r=0,n,a=0;n=HEAPU8[e+a>>0],r|=n,!(n==0&&!t||(a++,t&&a==t)););t||(t=a);var o="";if(r<128){for(var u=1024,s;t>0;)s=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,u))),o=o?o+s:s,e+=u,t-=u;return o}return Module.UTF8ToString(e)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(e){for(var t="";;){var r=HEAP8[e++>>0];if(!r)return t;t+=String.fromCharCode(r)}}Module.AsciiToString=AsciiToString;function stringToAscii(e,t){return writeAsciiToMemory(e,t,!1)}Module.stringToAscii=stringToAscii;var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,r));for(var n,a,o,u,s,l,f="";;){if(n=e[t++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(a=e[t++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|a);continue}if(o=e[t++]&63,(n&240)==224?n=(n&15)<<12|a<<6|o:(u=e[t++]&63,(n&248)==240?n=(n&7)<<18|a<<12|o<<6|u:(s=e[t++]&63,(n&252)==248?n=(n&3)<<24|a<<18|o<<12|u<<6|s:(l=e[t++]&63,n=(n&1)<<30|a<<24|o<<18|u<<12|s<<6|l))),n<65536)f+=String.fromCharCode(n);else{var c=n-65536;f+=String.fromCharCode(55296|c>>10,56320|c&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(e){return UTF8ArrayToString(HEAPU8,e)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((s&1023)<<10)|e.charCodeAt(++u)&1023),s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=2097151){if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else if(s<=67108863){if(r+4>=o)break;t[r++]=248|s>>24,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}else{if(r+5>=o)break;t[r++]=252|s>>30,t[r++]=128|s>>24&63,t[r++]=128|s>>18&63,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|s&63}}return t[r]=0,r-a}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:n<=2097151?t+=4:n<=67108863?t+=5:t+=6}return t}Module.lengthBytesUTF8=lengthBytesUTF8,typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function demangle(e){var t=Module.___cxa_demangle||Module.__cxa_demangle;if(t){try{var r=e.substr(1),n=lengthBytesUTF8(r)+1,a=_malloc(n);stringToUTF8(r,a,n);var o=_malloc(4),u=t(a,0,0,o);if(getValue(o,"i32")===0&&u)return Pointer_stringify(u)}catch{}finally{a&&_free(a),o&&_free(o),u&&_free(u)}return e}return Runtime.warnOnce("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function demangleAll(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(r){var n=demangle(r);return r===n?r:r+" ["+n+"]"})}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+=`
`+Module.extraStackTrace()),demangleAll(e)}Module.stackTrace=stackTrace;var WASM_PAGE_SIZE=65536,ASMJS_PAGE_SIZE=16777216;function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}var HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBuffer(e){Module.buffer=buffer=e}function updateGlobalBufferViews(){Module.HEAP8=HEAP8=new Int8Array(buffer),Module.HEAP16=HEAP16=new Int16Array(buffer),Module.HEAP32=HEAP32=new Int32Array(buffer),Module.HEAPU8=HEAPU8=new Uint8Array(buffer),Module.HEAPU16=HEAPU16=new Uint16Array(buffer),Module.HEAPU32=HEAPU32=new Uint32Array(buffer),Module.HEAPF32=HEAPF32=new Float32Array(buffer),Module.HEAPF64=HEAPF64=new Float64Array(buffer)}var STATIC_BASE,STATICTOP,staticSealed,STACK_BASE,STACKTOP,STACK_MAX,DYNAMIC_BASE,DYNAMICTOP_PTR;STATIC_BASE=STATICTOP=STACK_BASE=STACKTOP=STACK_MAX=DYNAMIC_BASE=DYNAMICTOP_PTR=0,staticSealed=!1;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||134217728;TOTAL_MEMORY<TOTAL_STACK&&Module.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+TOTAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),Module.buffer?buffer=Module.buffer:typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(Module.wasmMemory=new WebAssembly.Memory({initial:TOTAL_MEMORY/WASM_PAGE_SIZE,maximum:TOTAL_MEMORY/WASM_PAGE_SIZE}),buffer=Module.wasmMemory.buffer):buffer=new ArrayBuffer(TOTAL_MEMORY),updateGlobalBufferViews();function getTotalMemory(){return TOTAL_MEMORY}if(HEAP32[0]=1668509029,HEAP16[1]=25459,HEAPU8[2]!==115||HEAPU8[3]!==99)throw"Runtime error: expected the system to be little-endian!";Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t();continue}var r=t.func;typeof r=="number"?t.arg===void 0?Module.dynCall_v(r):Module.dynCall_vi(r,t.arg):r(t.arg===void 0?null:t.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}Module.addOnPreRun=addOnPreRun;function addOnInit(e){__ATINIT__.unshift(e)}Module.addOnInit=addOnInit;function addOnPreMain(e){__ATMAIN__.unshift(e)}Module.addOnPreMain=addOnPreMain;function addOnExit(e){__ATEXIT__.unshift(e)}Module.addOnExit=addOnExit;function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,a=new Array(n),o=stringToUTF8Array(e,a,0,a.length);return t&&(a.length=o),a}Module.intArrayFromString=intArrayFromString;function intArrayToString(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n>255&&(n&=255),t.push(String.fromCharCode(n))}return t.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(e,t,r){Runtime.warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var n,a;r&&(a=t+lengthBytesUTF8(e),n=HEAP8[a]),stringToUTF8(e,t,1/0),r&&(HEAP8[a]=n)}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(e,t){HEAP8.set(e,t)}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}if(Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function e(t,r){var n=t>>>16,a=t&65535,o=r>>>16,u=r&65535;return a*u+(n*u+a*o<<16)|0}),Math.imul=Math.imul,!Math.fround){var froundBuffer=new Float32Array(1);Math.fround=function(e){return froundBuffer[0]=e,froundBuffer[0]}}Math.fround=Math.fround,Math.clz32||(Math.clz32=function(e){e=e>>>0;for(var t=0;t<32;t++)if(e&1<<31-t)return t;return 32}),Math.clz32=Math.clz32,Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Math.trunc=Math.trunc;var Math_abs=Math.abs,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;function integrateWasmJS(Module){var method=Module.wasmJSMethod||"native-wasm";Module.wasmJSMethod=method;var wasmTextFile=Module.wasmTextFile||"markerDetection.wast",wasmBinaryFile=Module.wasmBinaryFile||"markerDetection.wasm",asmjsCodeFile=Module.asmjsCodeFile||"markerDetection.temp.asm.js",wasmPageSize=64*1024,asm2wasmImports={"f64-rem":function(e,t){return e%t},"f64-to-int":function(e){return e|0},"i32s-div":function(e,t){return(e|0)/(t|0)|0},"i32u-div":function(e,t){return(e>>>0)/(t>>>0)>>>0},"i32s-rem":function(e,t){return(e|0)%(t|0)|0},"i32u-rem":function(e,t){return(e>>>0)%(t>>>0)>>>0},debugger:function(){debugger}},info={global:null,env:null,asm2wasm:asm2wasmImports,parent:Module},exports=null;function lookupImport(e,t){var r=info;if(e.indexOf(".")<0)r=(r||{})[e];else{var n=e.split(".");r=(r||{})[n[0]],r=(r||{})[n[1]]}return t&&(r=(r||{})[t]),r===void 0&&abort("bad lookupImport to ("+e+")."+t),r}function mergeMemory(e){var t=Module.buffer;e.byteLength<t.byteLength&&Module.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(t),n=new Int8Array(e);memoryInitializer||r.set(n.subarray(Module.STATIC_BASE,Module.STATIC_BASE+Module.STATIC_BUMP),Module.STATIC_BASE),n.set(r),updateGlobalBuffer(e),updateGlobalBufferViews()}function fixImports(e){return e}function getBinary(){var e;if(Module.wasmBinary)e=Module.wasmBinary,e=new Uint8Array(e);else if(Module.readBinary)e=Module.readBinary(wasmBinaryFile);else throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)";return e}function getBinaryPromise(){return!Module.wasmBinary&&typeof fetch=="function"?fetch(wasmBinaryFile).then(function(e){return e.arrayBuffer()}):new Promise(function(e,t){e(getBinary())})}function doJustAsm(global,env,providedBuffer){return(typeof Module.asm!="function"||Module.asm===methodHandler)&&(Module.asmPreload?Module.asm=Module.asmPreload:eval(Module.read(asmjsCodeFile))),typeof Module.asm!="function"?(Module.printErr("asm evalling did not set the module properly"),!1):Module.asm(global,env,providedBuffer)}function doNativeWasm(e,t,r){if(typeof WebAssembly!="object")return Module.printErr("no native wasm support detected"),!1;if(!(Module.wasmMemory instanceof WebAssembly.Memory))return Module.printErr("no native wasm Memory in use"),!1;t.memory=Module.wasmMemory,info.global={NaN:NaN,Infinity:1/0},info["global.Math"]=e.Math,info.env=t;function n(a){exports=a.exports,exports.memory&&mergeMemory(exports.memory),Module.asm=exports,Module.usingWasm=!0,removeRunDependency()}if(addRunDependency(),Module.instantiateWasm)try{return Module.instantiateWasm(info,n)}catch(a){return Module.printErr("Module.instantiateWasm callback failed with error: "+a),!1}return Module.printErr("asynchronously preparing wasm"),getBinaryPromise().then(function(a){return WebAssembly.instantiate(a,info)}).then(function(a){n(a.instance)}).catch(function(a){Module.printErr("failed to asynchronously prepare wasm: "+a),Module.quit(1,a)}),{}}function doWasmPolyfill(e,t,r,n){if(typeof WasmJS!="function")return Module.printErr("WasmJS not detected - polyfill not bundled?"),!1;var a=WasmJS({});a.outside=Module,a.info=info,a.lookupImport=lookupImport,assert(r===Module.buffer),info.global=e,info.env=t,assert(r===Module.buffer),t.memory=r,assert(t.memory instanceof ArrayBuffer),a.providedTotalMemory=Module.buffer.byteLength;var o;n==="interpret-binary"?o=getBinary():o=Module.read(n=="interpret-asm2wasm"?asmjsCodeFile:wasmTextFile);var u;if(n=="interpret-asm2wasm")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_asm2wasm(u);else if(n==="interpret-s-expr")u=a._malloc(o.length+1),a.writeAsciiToMemory(o,u),a._load_s_expr2wasm(u);else if(n==="interpret-binary")u=a._malloc(o.length),a.HEAPU8.set(o,u),a._load_binary2wasm(u,o.length);else throw"what? "+n;return a._free(u),a._instantiate(u),Module.newBuffer&&(mergeMemory(Module.newBuffer),Module.newBuffer=null),exports=a.asmExports,exports}Module.asmPreload=Module.asm,Module.reallocBuffer=function(e){var t=Module.usingWasm?WASM_PAGE_SIZE:ASMJS_PAGE_SIZE;e=alignUp(e,t);var r=Module.buffer,n=r.byteLength;if(Module.usingWasm)try{var a=Module.wasmMemory.grow((e-n)/wasmPageSize);return a!==(-1|0)?Module.buffer=Module.wasmMemory.buffer:null}catch{return null}else return exports.__growWasmMemory((e-n)/wasmPageSize),Module.buffer!==r?Module.buffer:null},Module.asm=function(e,t,r){if(e=fixImports(e),t=fixImports(t),!t.table){var n=Module.wasmTableSize;n===void 0&&(n=1024);var a=Module.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?a!==void 0?t.table=new WebAssembly.Table({initial:n,maximum:a,element:"anyfunc"}):t.table=new WebAssembly.Table({initial:n,element:"anyfunc"}):t.table=new Array(n),Module.wasmTable=t.table}t.memoryBase||(t.memoryBase=Module.STATIC_BASE),t.tableBase||(t.tableBase=0);for(var o,u=method.split(","),s=0;s<u.length;s++){var l=u[s];if(Module.printErr("trying binaryen method: "+l),l==="native-wasm"){if(o=doNativeWasm(e,t))break}else if(l==="asmjs"){if(o=doJustAsm(e,t,r))break}else if(l==="interpret-asm2wasm"||l==="interpret-s-expr"||l==="interpret-binary"){if(o=doWasmPolyfill(e,t,r,l))break}else throw"bad method: "+l}if(!o)throw"no binaryen method succeeded. consider enabling more options, like interpreting, if you want that: https://github.com/kripken/emscripten/wiki/WebAssembly#binaryen-methods";return Module.printErr("binaryen method succeeded."),o};var methodHandler=Module.asm}integrateWasmJS(Module),STATIC_BASE=1024,STATICTOP=STATIC_BASE+8864,__ATINIT__.push(),memoryInitializer=Module.wasmJSMethod.indexOf("asmjs")>=0||Module.wasmJSMethod.indexOf("interpret-asm2wasm")>=0?"markerDetection.js.mem":null;var STATIC_BUMP=8864;Module.STATIC_BASE=STATIC_BASE,Module.STATIC_BUMP=STATIC_BUMP;var tempDoublePtr=STATICTOP;STATICTOP+=16;function ___assert_fail(e,t,r,n){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(e)+", at: "+[t?Pointer_stringify(t):"unknown filename",r,n?Pointer_stringify(n):"unknown function"]+" at "+stackTrace()}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos){var r=EXCEPTIONS.infos[t];if(r.adjusted===e)return t}return e},addRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,t.refcount===0&&!t.rethrown&&(t.destructor&&Module.dynCall_vi(t.destructor,e),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(!!e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return Runtime.setTempRet0(0),0|0;var t=EXCEPTIONS.infos[e],r=t.type;if(!r)return Runtime.setTempRet0(0),e|0;var n=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(r),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var a=0;a<n.length;a++)if(n[a]&&Module.___cxa_can_catch(n[a],r,e))return e=HEAP32[e>>2],t.adjusted=e,Runtime.setTempRet0(n[a]),e|0;return e=HEAP32[e>>2],Runtime.setTempRet0(r),e|0}function ___cxa_throw(e,t,r){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:r,refcount:0,caught:!1,rethrown:!1},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module._memset=_memset;function _abort(){Module.abort()}function ___cxa_begin_catch(e){var t=EXCEPTIONS.infos[e];return t&&!t.caught&&(t.caught=!0,__ZSt18uncaught_exceptionv.uncaught_exception--),t&&(t.rethrown=!1),EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),!(e in _pthread_once.seen)&&(Module.dynCall_v(t),_pthread_once.seen[e]=1)}function ___lock(){}function ___unlock(){}var SYSCALLS={varargs:0,get:function(e){SYSCALLS.varargs+=4;var t=HEAP32[SYSCALLS.varargs-4>>2];return t},getStr:function(){var e=Pointer_stringify(SYSCALLS.get());return e},get64:function(){var e=SYSCALLS.get(),t=SYSCALLS.get();return e>=0?assert(t===0):assert(t===-1),e},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall6(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD();return FS.close(r),0}catch(n){return(typeof FS=="undefined"||!(n instanceof FS.ErrnoError))&&abort(n),-n.errno}}var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function ___setErrNo(e){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=e),e}Module._sbrk=_sbrk;function _emscripten_memcpy_big(e,t,r){return HEAPU8.set(HEAPU8.subarray(t,t+r),e),e}Module._memcpy=_memcpy,Module._memmove=_memmove;var PTHREAD_SPECIFIC_NEXT_KEY=1,ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _pthread_key_create(e,t){return e==0?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___gxx_personality_v0(){}Module._llvm_bswap_i32=_llvm_bswap_i32;function ___syscall146(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.get(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=0;___syscall146.buffer||(___syscall146.buffers=[null,[],[]],___syscall146.printChar=function(c,d){var h=___syscall146.buffers[c];assert(h),d===0||d===10?((c===1?Module.print:Module.printErr)(UTF8ArrayToString(h,0)),h.length=0):h.push(d)});for(var u=0;u<a;u++){for(var s=HEAP32[n+u*8>>2],l=HEAP32[n+(u*8+4)>>2],f=0;f<l;f++)___syscall146.printChar(r,HEAPU8[s+f]);o+=l}return o}catch(c){return(typeof FS=="undefined"||!(c instanceof FS.ErrnoError))&&abort(c),-c.errno}}function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function ___syscall140(e,t){SYSCALLS.varargs=t;try{var r=SYSCALLS.getStreamFromFD(),n=SYSCALLS.get(),a=SYSCALLS.get(),o=SYSCALLS.get(),u=SYSCALLS.get(),s=a;return assert(n===0),FS.llseek(r,s,u),HEAP32[o>>2]=r.position,r.getdents&&s===0&&u===0&&(r.getdents=null),0}catch(l){return(typeof FS=="undefined"||!(l instanceof FS.ErrnoError))&&abort(l),-l.errno}}function _malloc(e){var t=Runtime.dynamicAlloc(e+8);return t+8&4294967288}Module._malloc=_malloc;function ___cxa_allocate_exception(e){return _malloc(e)}function ___syscall54(e,t){SYSCALLS.varargs=t;try{return 0}catch(r){return(typeof FS=="undefined"||!(r instanceof FS.ErrnoError))&&abort(r),-r.errno}}__ATEXIT__.push(function(){var e=Module._fflush;e&&e(0);var t=___syscall146.printChar;if(!!t){var r=___syscall146.buffers;r[1].length&&t(1,10),r[2].length&&t(2,10)}}),DYNAMICTOP_PTR=allocate(1,"i32",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=Runtime.alignMemory(STACK_MAX),HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE,staticSealed=!0,Module.wasmTableSize=44,Module.wasmMaxTableSize=44;function invoke_iiii(e,t,r,n){try{return Module.dynCall_iiii(e,t,r,n)}catch(a){if(typeof a!="number"&&a!=="longjmp")throw a;Module.setThrew(1,0)}}function invoke_viiiii(e,t,r,n,a,o){try{Module.dynCall_viiiii(e,t,r,n,a,o)}catch(u){if(typeof u!="number"&&u!=="longjmp")throw u;Module.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(r){if(typeof r!="number"&&r!=="longjmp")throw r;Module.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(t){if(typeof t!="number"&&t!=="longjmp")throw t;Module.setThrew(1,0)}}function invoke_viiiiii(e,t,r,n,a,o,u){try{Module.dynCall_viiiiii(e,t,r,n,a,o,u)}catch(s){if(typeof s!="number"&&s!=="longjmp")throw s;Module.setThrew(1,0)}}function invoke_viiii(e,t,r,n,a){try{Module.dynCall_viiii(e,t,r,n,a)}catch(o){if(typeof o!="number"&&o!=="longjmp")throw o;Module.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,enlargeMemory,getTotalMemory,abortOnCannotGrowMemory,invoke_iiii,invoke_viiiii,invoke_vi,invoke_ii,invoke_v,invoke_viiiiii,invoke_viiii,_pthread_getspecific,___syscall54,___lock,_pthread_setspecific,___cxa_throw,_pthread_key_create,_abort,___setErrNo,___syscall6,_pthread_once,___syscall140,___syscall146,___cxa_begin_catch,_emscripten_memcpy_big,___gxx_personality_v0,___unlock,___resumeException,___cxa_find_matching_catch,___assert_fail,___cxa_allocate_exception,__ZSt18uncaught_exceptionv,DYNAMICTOP_PTR,tempDoublePtr,ABORT,STACKTOP,STACK_MAX};var asm=Module.asm(Module.asmGlobalArg,Module.asmLibraryArg,buffer);Module.asm=asm;var _llvm_bswap_i32=Module._llvm_bswap_i32=function(){return Module.asm._llvm_bswap_i32.apply(null,arguments)};Module.setThrew=function(){return Module.asm.setThrew.apply(null,arguments)},Module.___cxa_demangle=function(){return Module.asm.___cxa_demangle.apply(null,arguments)},Module._fflush=function(){return Module.asm._fflush.apply(null,arguments)},Module.___cxa_is_pointer_type=function(){return Module.asm.___cxa_is_pointer_type.apply(null,arguments)};var _memset=Module._memset=function(){return Module.asm._memset.apply(null,arguments)},_sbrk=Module._sbrk=function(){return Module.asm._sbrk.apply(null,arguments)},_memcpy=Module._memcpy=function(){return Module.asm._memcpy.apply(null,arguments)};Module.___errno_location=function(){return Module.asm.___errno_location.apply(null,arguments)},Module._newARDetector=function(){return Module.asm._newARDetector.apply(null,arguments)},Module.stackAlloc=function(){return Module.asm.stackAlloc.apply(null,arguments)},Module.getTempRet0=function(){return Module.asm.getTempRet0.apply(null,arguments)},Module._freeResult=function(){return Module.asm._freeResult.apply(null,arguments)},Module.setTempRet0=function(){return Module.asm.setTempRet0.apply(null,arguments)},Module._emscripten_get_global_libc=function(){return Module.asm._emscripten_get_global_libc.apply(null,arguments)},Module.stackSave=function(){return Module.asm.stackSave.apply(null,arguments)},Module.___cxa_can_catch=function(){return Module.asm.___cxa_can_catch.apply(null,arguments)};var _free=Module._free=function(){return Module.asm._free.apply(null,arguments)};Module.runPostSets=function(){return Module.asm.runPostSets.apply(null,arguments)},Module.establishStackSpace=function(){return Module.asm.establishStackSpace.apply(null,arguments)},Module._detect=function(){return Module.asm._detect.apply(null,arguments)},Module.stackRestore=function(){return Module.asm.stackRestore.apply(null,arguments)};var _malloc=Module._malloc=function(){return Module.asm._malloc.apply(null,arguments)},_memmove=Module._memmove=function(){return Module.asm._memmove.apply(null,arguments)};if(Module.dynCall_iiii=function(){return Module.asm.dynCall_iiii.apply(null,arguments)},Module.dynCall_viiiii=function(){return Module.asm.dynCall_viiiii.apply(null,arguments)},Module.dynCall_vi=function(){return Module.asm.dynCall_vi.apply(null,arguments)},Module.dynCall_ii=function(){return Module.asm.dynCall_ii.apply(null,arguments)},Module.dynCall_v=function(){return Module.asm.dynCall_v.apply(null,arguments)},Module.dynCall_viiiiii=function(){return Module.asm.dynCall_viiiiii.apply(null,arguments)},Module.dynCall_viiii=function(){return Module.asm.dynCall_viiii.apply(null,arguments)},Runtime.stackAlloc=Module.stackAlloc,Runtime.stackSave=Module.stackSave,Runtime.stackRestore=Module.stackRestore,Runtime.establishStackSpace=Module.establishStackSpace,Runtime.setTempRet0=Module.setTempRet0,Runtime.getTempRet0=Module.getTempRet0,Module.asm=asm,memoryInitializer)if(typeof Module.locateFile=="function"?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,Runtime.GLOBAL_BASE)}else{let e=function(){Module.readAsync(memoryInitializer,applyMemoryInitializer,function(){throw"could not load memory initializer "+memoryInitializer})};addRunDependency();var applyMemoryInitializer=function(t){t.byteLength&&(t=new Uint8Array(t)),HEAPU8.set(t,Runtime.GLOBAL_BASE),Module.memoryInitializerRequest&&delete Module.memoryInitializerRequest.response,removeRunDependency()};if(Module.memoryInitializerRequest){let t=function(){var r=Module.memoryInitializerRequest;if(r.status!==200&&r.status!==0){console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+r.status+", retrying "+memoryInitializer),e();return}applyMemoryInitializer(r.response)};Module.memoryInitializerRequest.response?setTimeout(t,0):Module.memoryInitializerRequest.addEventListener("load",t)}else e()}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function e(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function e(t){t=t||[],ensureInitRuntime();var r=t.length+1;function n(){for(var l=0;l<4-1;l++)a.push(0)}var a=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var o=0;o<r-1;o=o+1)a.push(allocate(intArrayFromString(t[o]),"i8",ALLOC_NORMAL)),n();a.push(0),a=allocate(a,"i32",ALLOC_NORMAL);try{var u=Module._main(r,a,0);exit(u,!0)}catch(l){if(l instanceof ExitStatus)return;if(l=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else{var s=l;l&&typeof l=="object"&&l.stack&&(s=[l,l.stack]),Module.printErr("exception thrown: "+s),Module.quit(1,l)}}finally{}};function run(e){if(e=e||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function t(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t()}Module.run=Module.run=run;function exit(e,t){t&&Module.noExitRuntime||(Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(e)),ENVIRONMENT_IS_NODE&&process.exit(e),Module.quit(e,new ExitStatus(e)))}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(e){e!==void 0?(Module.print(e),Module.printErr(e),e=JSON.stringify(e)):e="",ABORT=!0;var t=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,r="abort("+e+") at "+stackTrace()+t;throw abortDecorators&&abortDecorators.forEach(function(n){r=n(r,e)}),r}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;return Module.noInitialRun&&(shouldRunNow=!1),run(),Module},CV=CV||{};CV.Image=function(e,t,r){this.width=e||0,this.height=t||0,this.data=r||[]};CV.grayscale=function(e,t){for(var r=e.data,n=t.data,a=r.length,o=0,u=0;o<a;o+=4)n[u++]=r[o]*.299+r[o+1]*.587+r[o+2]*.114+.5|0;return t.width=e.width,t.height=e.height,t};CV.threshold=function(e,t,r){var n=e.data,a=t.data,o=n.length,u=[],s;for(s=0;s<256;++s)u[s]=s<=r?0:255;for(s=0;s<o;++s)a[s]=u[n[s]];return t.width=e.width,t.height=e.height,t};CV.adaptiveThreshold=function(e,t,r,n){var a=e.data,o=t.data,u=a.length,s=[],l;for(CV.stackBoxBlur(e,t,r),l=0;l<768;++l)s[l]=l-255<=-n?255:0;for(l=0;l<u;++l)o[l]=s[a[l]-o[l]+255];return t.width=e.width,t.height=e.height,t};CV.otsu=function(e){var t=e.data,r=t.length,n=[],a=0,o=0,u=0,s=0,l=0,f=0,c,d,h;for(h=0;h<256;++h)n[h]=0;for(h=0;h<r;++h)n[t[h]]++;for(h=0;h<256;++h)o+=n[h]*h;for(h=0;h<256;++h)if(s+=n[h],s!==0){if(l=r-s,l===0)break;u+=n[h]*h,c=u/s-(o-u)/l,d=s*l*c*c,d>f&&(f=d,a=h)}return a};CV.stackBoxBlurMult=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265];CV.stackBoxBlurShift=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13];CV.BlurStack=function(){this.color=0,this.next=null};CV.stackBoxBlur=function(e,t,r){var n=e.data,a=t.data,o=e.height,u=e.width,s=o-1,l=u-1,f=r+r+1,c=r+1,d=CV.stackBoxBlurMult[r],h=CV.stackBoxBlurShift[r],m,p,_,M,y,v,g,E,T,S;for(m=p=new CV.BlurStack,S=1;S<f;++S)m=m.next=new CV.BlurStack;for(m.next=p,y=0,T=0;T<o;++T){for(v=y,_=n[y],M=c*_,m=p,S=0;S<c;++S)m.color=_,m=m.next;for(S=1;S<c;++S)m.color=n[y+S],M+=m.color,m=m.next;for(m=p,E=0;E<u;++E)a[y++]=M*d>>>h,g=E+c,g=v+(g<l?g:l),M-=m.color-n[g],m.color=n[g],m=m.next}for(E=0;E<u;++E){for(y=E,v=y+u,_=a[y],M=c*_,m=p,S=0;S<c;++S)m.color=_,m=m.next;for(S=1;S<c;++S)m.color=a[v],M+=m.color,m=m.next,v+=u;for(m=p,T=0;T<o;++T)a[y]=M*d>>>h,g=T+c,g=E+(g<s?g:s)*u,M-=m.color-a[g],m.color=a[g],m=m.next,y+=u}return t};CV.gaussianBlur=function(e,t,r,n){var a=CV.gaussianKernel(n);return t.width=e.width,t.height=e.height,r.width=e.width,r.height=e.height,CV.gaussianBlurFilter(e,r,a,!0),CV.gaussianBlurFilter(r,t,a,!1),t};CV.gaussianBlurFilter=function(e,t,r,n){var a=e.data,o=t.data,u=e.height,s=e.width,l=0,f=r.length>>1,c,d,h,m,p;for(h=0;h<u;++h)for(m=0;m<s;++m){for(d=0,p=-f;p<=f;++p)n?(c=l+p,(m+p<0||m+p>=s)&&(c=l)):(c=l+p*s,(h+p<0||h+p>=u)&&(c=l)),d+=r[f+p]*a[c];o[l++]=n?d:d+.5&255}return t};CV.gaussianKernel=function(e){var t=[[1],[.25,.5,.25],[.0625,.25,.375,.25,.0625],[.03125,.109375,.21875,.28125,.21875,.109375,.03125]],r=[],n,a,o,u,s,l;if(e<=7&&e%2==1)r=t[e>>1];else{for(n=(e-1)*.5,a=.8+.3*(n-1),o=-.5/(a*a),u=0,l=0;l<e;++l)s=l-n,u+=r[l]=Math.exp(o*s*s);for(u=1/u,l=0;l<e;++l)r[l]*=u}return r};CV.findContours=function(e,t){var r=e.width,n=e.height,a=[],o,u,s,l,f,c,d,h,m;for(o=CV.binaryBorder(e,t),u=CV.neighborhoodDeltas(r+2),s=r+3,f=1,h=0;h<n;++h,s+=2)for(m=0;m<r;++m,++s)l=o[s],l!==0&&(c=d=!1,l===1&&o[s-1]===0?c=!0:l>=1&&o[s+1]===0&&(d=!0),(c||d)&&(++f,a.push(CV.borderFollowing(o,s,f,{x:m,y:h},d,u))));return a};CV.borderFollowing=function(e,t,r,n,a,o){var u=[],s,l,f,c,d;u.hole=a,c=d=a?0:4;do if(c=c-1&7,s=t+o[c],e[s]!==0)break;while(c!==d);if(c===d)e[t]=-r,u.push({x:n.x,y:n.y});else for(l=t;;){d=c;do f=l+o[++c];while(e[f]===0);if(c&=7,c-1>>>0<d>>>0?e[l]=-r:e[l]===1&&(e[l]=r),u.push({x:n.x,y:n.y}),n.x+=CV.neighborhood[c][0],n.y+=CV.neighborhood[c][1],f===t&&l===s)break;l=f,c=c+4&7}return u};CV.neighborhood=[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1],[0,1],[1,1]];CV.neighborhoodDeltas=function(e){for(var t=[],r=CV.neighborhood.length,n=0;n<r;++n)t[n]=CV.neighborhood[n][0]+CV.neighborhood[n][1]*e;return t.concat(t)};CV.approxPolyDP=function(e,t){var r={start_index:0,end_index:0},n={start_index:0,end_index:0},a=[],o=[],u=e.length,s,l,f,c,d,h,m,p,_,M,y;for(t*=t,y=0,_=0;_<3;++_)for(d=0,y=(y+n.start_index)%u,l=e[y],++y===u&&(y=0),M=1;M<u;++M)s=e[y],++y===u&&(y=0),m=s.x-l.x,p=s.y-l.y,c=m*m+p*p,c>d&&(d=c,n.start_index=M);for(d<=t?a.push({x:l.x,y:l.y}):(r.start_index=y,r.end_index=n.start_index+=r.start_index,n.start_index-=n.start_index>=u?u:0,n.end_index=r.start_index,n.end_index<n.start_index&&(n.end_index+=u),o.push({start_index:n.start_index,end_index:n.end_index}),o.push({start_index:r.start_index,end_index:r.end_index}));o.length!==0;){if(r=o.pop(),f=e[r.end_index%u],l=e[y=r.start_index%u],++y===u&&(y=0),r.end_index<=r.start_index+1)h=!0;else{for(d=0,m=f.x-l.x,p=f.y-l.y,_=r.start_index+1;_<r.end_index;++_)s=e[y],++y===u&&(y=0),c=Math.abs((s.y-l.y)*m-(s.x-l.x)*p),c>d&&(d=c,n.start_index=_);h=d*d<=t*(m*m+p*p)}h?a.push({x:l.x,y:l.y}):(n.end_index=r.end_index,r.end_index=n.start_index,o.push({start_index:n.start_index,end_index:n.end_index}),o.push({start_index:r.start_index,end_index:r.end_index}))}return a};CV.warp=function(e,t,r,n){var a=e.data,o=t.data,u=e.width,s=e.height,l=0,f,c,d,h,m,p,_,M,y,v,g,E,T,S,b,O,P,B,V,R,w,H,D;for(T=CV.getPerspectiveTransform(r,n-1),S=T[8],b=T[2],O=T[5],H=0;H<n;++H)for(S+=T[7],b+=T[1],O+=T[4],P=S,B=b,V=O,D=0;D<n;++D)P+=T[6],B+=T[0],V+=T[3],R=B/P,w=V/P,f=R>>>0,c=f===u-1?f:f+1,d=R-f,h=1-d,m=w>>>0,p=m===s-1?m:m+1,_=w-m,M=1-_,y=v=m*u,g=E=p*u,o[l++]=M*(h*a[y+f]+d*a[v+c])+_*(h*a[g+f]+d*a[E+c])|0;return t.width=n,t.height=n,t};CV.getPerspectiveTransform=function(e,t){var r=CV.square2quad(e);return r[0]/=t,r[1]/=t,r[3]/=t,r[4]/=t,r[6]/=t,r[7]/=t,r};CV.square2quad=function(e){var t=[],r,n,a,o,u,s,l;return r=e[0].x-e[1].x+e[2].x-e[3].x,n=e[0].y-e[1].y+e[2].y-e[3].y,r===0&&n===0?(t[0]=e[1].x-e[0].x,t[1]=e[2].x-e[1].x,t[2]=e[0].x,t[3]=e[1].y-e[0].y,t[4]=e[2].y-e[1].y,t[5]=e[0].y,t[6]=0,t[7]=0,t[8]=1):(a=e[1].x-e[2].x,o=e[3].x-e[2].x,u=e[1].y-e[2].y,s=e[3].y-e[2].y,l=a*s-o*u,t[6]=(r*s-o*n)/l,t[7]=(a*n-r*u)/l,t[8]=1,t[0]=e[1].x-e[0].x+t[6]*e[1].x,t[1]=e[3].x-e[0].x+t[7]*e[3].x,t[2]=e[0].x,t[3]=e[1].y-e[0].y+t[6]*e[1].y,t[4]=e[3].y-e[0].y+t[7]*e[3].y,t[5]=e[0].y),t};CV.isContourConvex=function(e){var t=0,r=!0,n=e.length,a=0,o=0,u,s,l,f,c,d,h,m;for(s=e[n-1],u=e[0],c=u.x-s.x,d=u.y-s.y;a<n;++a){if(++o===n&&(o=0),s=u,u=e[o],h=u.x-s.x,m=u.y-s.y,l=h*d,f=m*c,t|=f>l?1:f<l?2:3,t===3){r=!1;break}c=h,d=m}return r};CV.perimeter=function(e){for(var t=e.length,r=0,n=t-1,a=0,o,u;r<t;n=r++)o=e[r].x-e[n].x,u=e[r].y-e[n].y,a+=Math.sqrt(o*o+u*u);return a};CV.minEdgeLength=function(e){for(var t=e.length,r=0,n=t-1,a=1/0,o,u,s;r<t;n=r++)u=e[r].x-e[n].x,s=e[r].y-e[n].y,o=u*u+s*s,o<a&&(a=o);return Math.sqrt(a)};CV.countNonZero=function(e,t){var r=e.data,n=t.height,a=t.width,o=t.x+t.y*e.width,u=e.width-a,s=0,l,f;for(l=0;l<n;++l){for(f=0;f<a;++f)r[o++]!==0&&++s;o+=u}return s};CV.binaryBorder=function(e,t){var r=e.data,n=e.height,a=e.width,o=0,u=0,s,l;for(l=-2;l<a;++l)t[u++]=0;for(s=0;s<n;++s){for(t[u++]=0,l=0;l<a;++l)t[u++]=r[o++]===0?0:1;t[u++]=0}for(l=-2;l<a;++l)t[u++]=0;return t};var AR=AR||{};AR.Marker=function(e,t){this.id=e,this.corners=t};AR.Detector=function(e,t){this.grey=new CV.Image(e,t,new Uint8Array(e*t)),this.thres=new CV.Image(e,t,new Uint8Array(e*t)),this.homography=new CV.Image(e,t,new Uint8Array(e*t)),this.binary=new Int16Array((e+2)*(t+2)),this.contours=[],this.polys=[],this.candidates=[]};AR.Detector.prototype.detect=function(e){return CV.grayscale(e,this.grey),CV.adaptiveThreshold(this.grey,this.thres,2,7),this.contours=CV.findContours(this.thres,this.binary),this.candidates=this.findCandidates(this.contours,e.width*.2,.05,10),this.candidates=this.clockwiseCorners(this.candidates),this.candidates=this.notTooNear(this.candidates,10),this.findMarkers(this.grey,this.candidates,49)};AR.Detector.prototype.findCandidates=function(e,t,r,n){var a=[],o=e.length,u,s,l;for(this.polys=[],l=0;l<o;++l)u=e[l],u.length>=t&&(s=CV.approxPolyDP(u,u.length*r),this.polys.push(s),s.length===4&&CV.isContourConvex(s)&&CV.minEdgeLength(s)>=n&&a.push(s));return a};AR.Detector.prototype.clockwiseCorners=function(e){var t=e.length,r,n,a,o,u,s;for(s=0;s<t;++s)r=e[s][1].x-e[s][0].x,a=e[s][1].y-e[s][0].y,n=e[s][2].x-e[s][0].x,o=e[s][2].y-e[s][0].y,r*o-a*n<0&&(u=e[s][1],e[s][1]=e[s][3],e[s][3]=u);return e};AR.Detector.prototype.notTooNear=function(e,t){var r=[],n=e.length,a,o,u,s,l,f;for(s=0;s<n;++s)for(l=s+1;l<n;++l){for(a=0,f=0;f<4;++f)o=e[s][f].x-e[l][f].x,u=e[s][f].y-e[l][f].y,a+=o*o+u*u;a/4<t*t&&(CV.perimeter(e[s])<CV.perimeter(e[l])?e[s].tooNear=!0:e[l].tooNear=!0)}for(s=0;s<n;++s)e[s].tooNear||r.push(e[s]);return r};AR.Detector.prototype.findMarkers=function(e,t,r){var n=[],a=t.length,o,u,s;for(s=0;s<a;++s)o=t[s],CV.warp(e,this.homography,o,r),CV.threshold(this.homography,this.homography,CV.otsu(this.homography)),u=this.getMarker(this.homography,o),u&&n.push(u);return n};AR.Detector.prototype.getMarker=function(e,t){var r=e.width/7>>>0,n=r*r>>1,a=[],o=[],u=[],s,l,f,c,d;for(c=0;c<7;++c)for(f=c===0||c===6?1:6,d=0;d<7;d+=f)if(s={x:d*r,y:c*r,width:r,height:r},CV.countNonZero(e,s)>n)return null;for(c=0;c<5;++c)for(a[c]=[],d=0;d<5;++d)s={x:(d+1)*r,y:(c+1)*r,width:r,height:r},a[c][d]=CV.countNonZero(e,s)>n?1:0;for(o[0]=a,u[0]=this.hammingDistance(o[0]),l={first:u[0],second:0},c=1;c<4;++c)o[c]=this.rotate(o[c-1]),u[c]=this.hammingDistance(o[c]),u[c]<l.first&&(l.first=u[c],l.second=c);return l.first!==0?null:new AR.Marker(this.mat2id(o[l.second]),this.rotate2(t,4-l.second))};AR.Detector.prototype.hammingDistance=function(e){var t=[[1,0,0,0,0],[1,0,1,1,1],[0,1,0,0,1],[0,1,1,1,0]],r=0,n,a,o,u,s;for(o=0;o<5;++o){for(a=1/0,u=0;u<4;++u){for(n=0,s=0;s<5;++s)n+=e[o][s]===t[u][s]?0:1;n<a&&(a=n)}r+=a}return r};AR.Detector.prototype.mat2id=function(e){var t=0,r;for(r=0;r<5;++r)t<<=1,t|=e[r][1],t<<=1,t|=e[r][3];return t};AR.Detector.prototype.rotate=function(e){var t=[],r=e.length,n,a;for(n=0;n<r;++n)for(t[n]=[],a=0;a<e[n].length;++a)t[n][a]=e[e[n].length-a-1][n];return t};AR.Detector.prototype.rotate2=function(e,t){var r=[],n=e.length,a;for(a=0;a<n;++a)r[a]=e[(t+a)%n];return r};class VideoMarkerDetectionWasmTest extends WasmTestVideoAbstractBaseClass{pointer0;_detector;constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s)}render(t){if(this.updateOriginalImageData(),this.jsElapsedTime+=this.runJavaScriptBenchmark(),this.wsElapsedTime+=this.runWasmBenchmark(),this.count++,this.count===this.benchmarkRunLoops){const r=(this.jsElapsedTime/this.benchmarkRunLoops).toFixed(4),n=(this.wsElapsedTime/this.benchmarkRunLoops).toFixed(4);t.jsPerformance=r,t.wsPerformance=n,t.comparison=(Number(r)/Number(n)).toFixed(4),this.jsElapsedTime=0,this.wsElapsedTime=0,this.count=0}}checkFunctionality(){this.videoCanvasDataInited||(this.initVideoCanvasData(),this.videoCanvasDataInited=!0);const t=this.runJavaScript(),r=this.runWasm();return this.renderDetection(this.jsContext,t),this.renderDetection(this.wsContext,r),this.equalMarkers(t,r)}runWasm(){const t=this.module._detect(this.pointer0,this.pointer1,this.width,this.height),r=[];let n=t/4;const a=this.module.HEAP32,o=a[n++];for(let u=0;u<o;u++)r[u]=new AR.Marker(a[n++],[{x:a[n++],y:a[n++]},{x:a[n++],y:a[n++]},{x:a[n++],y:a[n++]},{x:a[n++],y:a[n++]}]);return this.module._freeResult(t),r}runJavaScript(){return this._detector===void 0&&(this._detector=new AR.Detector(this.width,this.height)),this._detector.detect(new CV.Image(this.width,this.height,this.videoDataArray))}runJavaScriptBenchmark(){const t=1;let r=0,n;for(let a=0;a<t;a++){let o=performance.now();n=this.runJavaScript(),r+=performance.now()-o}return this.renderDetection(this.jsContext,n),r/t}runWasmBenchmark(){const t=1;let r=0,n;for(let a=0;a<t;a++){let o=performance.now();n=this.runWasm(),r+=performance.now()-o}return this.renderDetection(this.wsContext,n),r/t}initVideoCanvasData(){this.pointer0=this.module._newARDetector(this.width,this.height),this.pointer1=this.module._malloc(this.length),this.videoDataArray=this.module.HEAPU8.subarray(this.pointer1,this.pointer1+this.length),this.updateOriginalImageData()}equalMarkers(t,r){if(t.length!==r.length)return!1;for(let n=0,a=t.length;n<a;n++){let o=t[n],u=r[n];if(o.id!==u.id)return!1;for(let s=0;s<4;s++)if(o.corners[s].x!==u.corners[s].x||o.corners[s].y!==u.corners[s].y)return!1}return!0}renderDetection(t,r){t.clearRect(0,0,this.width,this.height);for(let n=0,a=r.length;n<a;n++){let u=r[n].corners;t.beginPath(),t.strokeStyle="red",t.lineWidth=5,t.moveTo(u[0].x,u[0].y);for(let s=1;s<4;s++)t.lineTo(u[s].x,u[s].y);t.lineTo(u[0].x,u[0].y),t.closePath(),t.stroke()}}}class VideoThresholdWasmTest extends WasmTestVideoAbstractBaseClass{_work;constructor(t,r,n,a,o,u,s){super(t,r,n,a,o,u,s)}render(t){if(this.updateOriginalImageData(),this.copyArray(this.videoDataArray,this.jsImageDataArray),this.copyArray(this.videoDataArray,this.wsImageDataArray),this.jsElapsedTime+=this.runJavaScriptBenchmark(),this.wsElapsedTime+=this.runWasmBenchmark(),this.jsContext.putImageData(this.jsImageData,0,0),this.wsContext.putImageData(this.wsImageData,0,0),this.count++,this.count===this.benchmarkRunLoops){const r=(this.jsElapsedTime/this.benchmarkRunLoops).toFixed(4),n=(this.wsElapsedTime/this.benchmarkRunLoops).toFixed(4);t.jsPerformance=r,t.wsPerformance=n,t.comparison=(Number(r)/Number(n)).toFixed(4),this.jsElapsedTime=0,this.wsElapsedTime=0,this.count=0}}checkFunctionality(){return this.videoCanvasDataInited||(this.initVideoCanvasData(),this.videoCanvasDataInited=!0),this.copyArray(this.videoDataArray,this.jsImageDataArray),this.copyArray(this.videoDataArray,this.wsImageDataArray),this.runWasm(),this.runJavaScript(),this.equalArray(this.jsImageDataArray,this.wsImageDataArray)}runWasm(){this.module._imageThreshold(this.pointer1,this.width,this.height)}runJavaScript(){this._work===void 0&&(this._work=new Int32Array(this.width*this.height));const t=this._work,n=8/2,o=(100-15)/100;for(let u=0;u<this.width;u++){let s=0;for(let l=0;l<this.height;l++){const f=l*this.width+u,c=this.jsImageDataArray[f*4+0],d=this.jsImageDataArray[f*4+1],h=this.jsImageDataArray[f*4+2];this.jsImageDataArray[f*4]=.2126*c+.7152*d+.0722*h|0,s+=this.jsImageDataArray[f*4],u===0?t[f]=s:t[f]=t[f-1]+s}}for(let u=0;u<this.width;u++)for(let s=0;s<this.height;s++){let l=u-n,f=u+n,c=s-n,d=s+n,h=l-1,m=c-1;l<0&&(l=0),f>=this.width&&(f=this.width-1),h<0&&(h=0),c<0&&(c=0),d>=this.height&&(d=this.height-1),m<0&&(m=0);const p=(f-l)*(d-c),_=s*this.width+u,M=d*this.width+f,y=m*this.width+f,v=d*this.width+h,g=m*this.width+h,E=t[M]-t[y]-t[v]+t[g];this.jsImageDataArray[_*4]*p<=E*o?this.jsImageDataArray[_*4+0]=this.jsImageDataArray[_*4+1]=this.jsImageDataArray[_*4+2]=0:this.jsImageDataArray[_*4+0]=this.jsImageDataArray[_*4+1]=this.jsImageDataArray[_*4+2]=255}}}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var md5={exports:{}},core={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(commonjsGlobal,function(){var r=r||function(n,a){var o;if(typeof window!="undefined"&&window.crypto&&(o=window.crypto),typeof self!="undefined"&&self.crypto&&(o=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window!="undefined"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof commonjsGlobal!="undefined"&&commonjsGlobal.crypto&&(o=commonjsGlobal.crypto),!o&&typeof commonjsRequire=="function")try{o=require("crypto")}catch{}var u=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function v(){}return function(g){var E;return v.prototype=g,E=new v,v.prototype=null,E}}(),l={},f=l.lib={},c=f.Base=function(){return{extend:function(v){var g=s(this);return v&&g.mixIn(v),(!g.hasOwnProperty("init")||this.init===g.init)&&(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var g in v)v.hasOwnProperty(g)&&(this[g]=v[g]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=f.WordArray=c.extend({init:function(v,g){v=this.words=v||[],g!=a?this.sigBytes=g:this.sigBytes=v.length*4},toString:function(v){return(v||m).stringify(this)},concat:function(v){var g=this.words,E=v.words,T=this.sigBytes,S=v.sigBytes;if(this.clamp(),T%4)for(var b=0;b<S;b++){var O=E[b>>>2]>>>24-b%4*8&255;g[T+b>>>2]|=O<<24-(T+b)%4*8}else for(var P=0;P<S;P+=4)g[T+P>>>2]=E[P>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,g=this.sigBytes;v[g>>>2]&=4294967295<<32-g%4*8,v.length=n.ceil(g/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var g=[],E=0;E<v;E+=4)g.push(u());return new d.init(g,v)}}),h=l.enc={},m=h.Hex={stringify:function(v){for(var g=v.words,E=v.sigBytes,T=[],S=0;S<E;S++){var b=g[S>>>2]>>>24-S%4*8&255;T.push((b>>>4).toString(16)),T.push((b&15).toString(16))}return T.join("")},parse:function(v){for(var g=v.length,E=[],T=0;T<g;T+=2)E[T>>>3]|=parseInt(v.substr(T,2),16)<<24-T%8*4;return new d.init(E,g/2)}},p=h.Latin1={stringify:function(v){for(var g=v.words,E=v.sigBytes,T=[],S=0;S<E;S++){var b=g[S>>>2]>>>24-S%4*8&255;T.push(String.fromCharCode(b))}return T.join("")},parse:function(v){for(var g=v.length,E=[],T=0;T<g;T++)E[T>>>2]|=(v.charCodeAt(T)&255)<<24-T%4*8;return new d.init(E,g)}},_=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},M=f.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=_.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var g,E=this._data,T=E.words,S=E.sigBytes,b=this.blockSize,O=b*4,P=S/O;v?P=n.ceil(P):P=n.max((P|0)-this._minBufferSize,0);var B=P*b,V=n.min(B*4,S);if(B){for(var R=0;R<B;R+=b)this._doProcessBlock(T,R);g=T.splice(0,B),E.sigBytes-=V}return new d.init(g,V)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});f.Hasher=M.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){M.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var g=this._doFinalize();return g},blockSize:512/32,_createHelper:function(v){return function(g,E){return new v.init(E).finalize(g)}},_createHmacHelper:function(v){return function(g,E){return new y.HMAC.init(v,E).finalize(g)}}});var y=l.algo={};return l}(Math);return r})})(core);(function(e,t){(function(r,n){e.exports=n(core.exports)})(commonjsGlobal,function(r){return function(n){var a=r,o=a.lib,u=o.WordArray,s=o.Hasher,l=a.algo,f=[];(function(){for(var _=0;_<64;_++)f[_]=n.abs(n.sin(_+1))*4294967296|0})();var c=l.MD5=s.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,M){for(var y=0;y<16;y++){var v=M+y,g=_[v];_[v]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var E=this._hash.words,T=_[M+0],S=_[M+1],b=_[M+2],O=_[M+3],P=_[M+4],B=_[M+5],V=_[M+6],R=_[M+7],w=_[M+8],H=_[M+9],D=_[M+10],K=_[M+11],W=_[M+12],k=_[M+13],J=_[M+14],X=_[M+15],I=E[0],L=E[1],U=E[2],G=E[3];I=d(I,L,U,G,T,7,f[0]),G=d(G,I,L,U,S,12,f[1]),U=d(U,G,I,L,b,17,f[2]),L=d(L,U,G,I,O,22,f[3]),I=d(I,L,U,G,P,7,f[4]),G=d(G,I,L,U,B,12,f[5]),U=d(U,G,I,L,V,17,f[6]),L=d(L,U,G,I,R,22,f[7]),I=d(I,L,U,G,w,7,f[8]),G=d(G,I,L,U,H,12,f[9]),U=d(U,G,I,L,D,17,f[10]),L=d(L,U,G,I,K,22,f[11]),I=d(I,L,U,G,W,7,f[12]),G=d(G,I,L,U,k,12,f[13]),U=d(U,G,I,L,J,17,f[14]),L=d(L,U,G,I,X,22,f[15]),I=h(I,L,U,G,S,5,f[16]),G=h(G,I,L,U,V,9,f[17]),U=h(U,G,I,L,K,14,f[18]),L=h(L,U,G,I,T,20,f[19]),I=h(I,L,U,G,B,5,f[20]),G=h(G,I,L,U,D,9,f[21]),U=h(U,G,I,L,X,14,f[22]),L=h(L,U,G,I,P,20,f[23]),I=h(I,L,U,G,H,5,f[24]),G=h(G,I,L,U,J,9,f[25]),U=h(U,G,I,L,O,14,f[26]),L=h(L,U,G,I,w,20,f[27]),I=h(I,L,U,G,k,5,f[28]),G=h(G,I,L,U,b,9,f[29]),U=h(U,G,I,L,R,14,f[30]),L=h(L,U,G,I,W,20,f[31]),I=m(I,L,U,G,B,4,f[32]),G=m(G,I,L,U,w,11,f[33]),U=m(U,G,I,L,K,16,f[34]),L=m(L,U,G,I,J,23,f[35]),I=m(I,L,U,G,S,4,f[36]),G=m(G,I,L,U,P,11,f[37]),U=m(U,G,I,L,R,16,f[38]),L=m(L,U,G,I,D,23,f[39]),I=m(I,L,U,G,k,4,f[40]),G=m(G,I,L,U,T,11,f[41]),U=m(U,G,I,L,O,16,f[42]),L=m(L,U,G,I,V,23,f[43]),I=m(I,L,U,G,H,4,f[44]),G=m(G,I,L,U,W,11,f[45]),U=m(U,G,I,L,X,16,f[46]),L=m(L,U,G,I,b,23,f[47]),I=p(I,L,U,G,T,6,f[48]),G=p(G,I,L,U,R,10,f[49]),U=p(U,G,I,L,J,15,f[50]),L=p(L,U,G,I,B,21,f[51]),I=p(I,L,U,G,W,6,f[52]),G=p(G,I,L,U,O,10,f[53]),U=p(U,G,I,L,D,15,f[54]),L=p(L,U,G,I,S,21,f[55]),I=p(I,L,U,G,w,6,f[56]),G=p(G,I,L,U,X,10,f[57]),U=p(U,G,I,L,V,15,f[58]),L=p(L,U,G,I,k,21,f[59]),I=p(I,L,U,G,P,6,f[60]),G=p(G,I,L,U,K,10,f[61]),U=p(U,G,I,L,b,15,f[62]),L=p(L,U,G,I,H,21,f[63]),E[0]=E[0]+I|0,E[1]=E[1]+L|0,E[2]=E[2]+U|0,E[3]=E[3]+G|0},_doFinalize:function(){var _=this._data,M=_.words,y=this._nDataBytes*8,v=_.sigBytes*8;M[v>>>5]|=128<<24-v%32;var g=n.floor(y/4294967296),E=y;M[(v+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,M[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_.sigBytes=(M.length+1)*4,this._process();for(var T=this._hash,S=T.words,b=0;b<4;b++){var O=S[b];S[b]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return T},clone:function(){var _=s.clone.call(this);return _._hash=this._hash.clone(),_}});function d(_,M,y,v,g,E,T){var S=_+(M&y|~M&v)+g+T;return(S<<E|S>>>32-E)+M}function h(_,M,y,v,g,E,T){var S=_+(M&v|y&~v)+g+T;return(S<<E|S>>>32-E)+M}function m(_,M,y,v,g,E,T){var S=_+(M^y^v)+g+T;return(S<<E|S>>>32-E)+M}function p(_,M,y,v,g,E,T){var S=_+(y^(M|~v))+g+T;return(S<<E|S>>>32-E)+M}a.MD5=s._createHelper(c),a.HmacMD5=s._createHmacHelper(c)}(Math),r.MD5})})(md5);var jsMd5=md5.exports;class Md5WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];md5;constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustMd5()}async initRustMd5(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}check(t,r){return this.equalArray(this.javascriptResult,this.wasmResult)}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsMd5(this.testStrings[t]).toString()}async runRustWasm(){this.clearArray(this.wasmResult);for(let t=0;t<this.dataSize;t++);}clearArray(t){for(let r=0,n=t.length;r<n;r++)t[r]=""}}var sha1={exports:{}};(function(e,t){(function(r,n){e.exports=n(core.exports)})(commonjsGlobal,function(r){return function(){var n=r,a=n.lib,o=a.WordArray,u=a.Hasher,s=n.algo,l=[],f=s.SHA1=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var h=this._hash.words,m=h[0],p=h[1],_=h[2],M=h[3],y=h[4],v=0;v<80;v++){if(v<16)l[v]=c[d+v]|0;else{var g=l[v-3]^l[v-8]^l[v-14]^l[v-16];l[v]=g<<1|g>>>31}var E=(m<<5|m>>>27)+y+l[v];v<20?E+=(p&_|~p&M)+1518500249:v<40?E+=(p^_^M)+1859775393:v<60?E+=(p&_|p&M|_&M)-1894007588:E+=(p^_^M)-899497514,y=M,M=_,_=p<<30|p>>>2,p=m,m=E}h[0]=h[0]+m|0,h[1]=h[1]+p|0,h[2]=h[2]+_|0,h[3]=h[3]+M|0,h[4]=h[4]+y|0},_doFinalize:function(){var c=this._data,d=c.words,h=this._nDataBytes*8,m=c.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(h/4294967296),d[(m+64>>>9<<4)+15]=h,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=u.clone.call(this);return c._hash=this._hash.clone(),c}});n.SHA1=u._createHelper(f),n.HmacSHA1=u._createHmacHelper(f)}(),r.SHA1})})(sha1);var jsSha1=sha1.exports;class Sha1WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha1()}async initRustSha1(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha1(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}var sha256={exports:{}};(function(e,t){(function(r,n){e.exports=n(core.exports)})(commonjsGlobal,function(r){return function(n){var a=r,o=a.lib,u=o.WordArray,s=o.Hasher,l=a.algo,f=[],c=[];(function(){function m(y){for(var v=n.sqrt(y),g=2;g<=v;g++)if(!(y%g))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var _=2,M=0;M<64;)m(_)&&(M<8&&(f[M]=p(n.pow(_,1/2))),c[M]=p(n.pow(_,1/3)),M++),_++})();var d=[],h=l.SHA256=s.extend({_doReset:function(){this._hash=new u.init(f.slice(0))},_doProcessBlock:function(m,p){for(var _=this._hash.words,M=_[0],y=_[1],v=_[2],g=_[3],E=_[4],T=_[5],S=_[6],b=_[7],O=0;O<64;O++){if(O<16)d[O]=m[p+O]|0;else{var P=d[O-15],B=(P<<25|P>>>7)^(P<<14|P>>>18)^P>>>3,V=d[O-2],R=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;d[O]=B+d[O-7]+R+d[O-16]}var w=E&T^~E&S,H=M&y^M&v^y&v,D=(M<<30|M>>>2)^(M<<19|M>>>13)^(M<<10|M>>>22),K=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),W=b+K+w+c[O]+d[O],k=D+H;b=S,S=T,T=E,E=g+W|0,g=v,v=y,y=M,M=W+k|0}_[0]=_[0]+M|0,_[1]=_[1]+y|0,_[2]=_[2]+v|0,_[3]=_[3]+g|0,_[4]=_[4]+E|0,_[5]=_[5]+T|0,_[6]=_[6]+S|0,_[7]=_[7]+b|0},_doFinalize:function(){var m=this._data,p=m.words,_=this._nDataBytes*8,M=m.sigBytes*8;return p[M>>>5]|=128<<24-M%32,p[(M+64>>>9<<4)+14]=n.floor(_/4294967296),p[(M+64>>>9<<4)+15]=_,m.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});a.SHA256=s._createHelper(h),a.HmacSHA256=s._createHmacHelper(h)}(Math),r.SHA256})})(sha256);var jsSha256=sha256.exports;class Sha256WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha256()}async initRustSha256(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha256(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}var sha224={exports:{}};(function(e,t){(function(r,n,a){e.exports=n(core.exports,sha256.exports)})(commonjsGlobal,function(r){return function(){var n=r,a=n.lib,o=a.WordArray,u=n.algo,s=u.SHA256,l=u.SHA224=s.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var f=s._doFinalize.call(this);return f.sigBytes-=4,f}});n.SHA224=s._createHelper(l),n.HmacSHA224=s._createHmacHelper(l)}(),r.SHA224})})(sha224);var jsSha224=sha224.exports;class Sha224WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha224()}async initRustSha224(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha224(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}var sha512={exports:{}},x64Core={exports:{}};(function(e,t){(function(r,n){e.exports=n(core.exports)})(commonjsGlobal,function(r){return function(n){var a=r,o=a.lib,u=o.Base,s=o.WordArray,l=a.x64={};l.Word=u.extend({init:function(f,c){this.high=f,this.low=c}}),l.WordArray=u.extend({init:function(f,c){f=this.words=f||[],c!=n?this.sigBytes=c:this.sigBytes=f.length*8},toX32:function(){for(var f=this.words,c=f.length,d=[],h=0;h<c;h++){var m=f[h];d.push(m.high),d.push(m.low)}return s.create(d,this.sigBytes)},clone:function(){for(var f=u.clone.call(this),c=f.words=this.words.slice(0),d=c.length,h=0;h<d;h++)c[h]=c[h].clone();return f}})}(),r})})(x64Core);(function(e,t){(function(r,n,a){e.exports=n(core.exports,x64Core.exports)})(commonjsGlobal,function(r){return function(){var n=r,a=n.lib,o=a.Hasher,u=n.x64,s=u.Word,l=u.WordArray,f=n.algo;function c(){return s.create.apply(s,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],h=[];(function(){for(var p=0;p<80;p++)h[p]=c()})();var m=f.SHA512=o.extend({_doReset:function(){this._hash=new l.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,_){for(var M=this._hash.words,y=M[0],v=M[1],g=M[2],E=M[3],T=M[4],S=M[5],b=M[6],O=M[7],P=y.high,B=y.low,V=v.high,R=v.low,w=g.high,H=g.low,D=E.high,K=E.low,W=T.high,k=T.low,J=S.high,X=S.low,I=b.high,L=b.low,U=O.high,G=O.low,j=P,oe=B,z=V,x=R,fe=w,$=H,ue=D,Z=K,ce=W,pe=k,Oe=J,Fe=X,Ie=I,we=L,Ne=U,Ue=G,Re=0;Re<80;Re++){var be,de,he=h[Re];if(Re<16)de=he.high=p[_+Re*2]|0,be=he.low=p[_+Re*2+1]|0;else{var F=h[Re-15],Q=F.high,ae=F.low,ge=(Q>>>1|ae<<31)^(Q>>>8|ae<<24)^Q>>>7,re=(ae>>>1|Q<<31)^(ae>>>8|Q<<24)^(ae>>>7|Q<<25),ve=h[Re-2],ye=ve.high,Me=ve.low,Ce=(ye>>>19|Me<<13)^(ye<<3|Me>>>29)^ye>>>6,Ae=(Me>>>19|ye<<13)^(Me<<3|ye>>>29)^(Me>>>6|ye<<26),Le=h[Re-7],De=Le.high,Xe=Le.low,Ye=h[Re-16],Je=Ye.high,je=Ye.low;be=re+Xe,de=ge+De+(be>>>0<re>>>0?1:0),be=be+Ae,de=de+Ce+(be>>>0<Ae>>>0?1:0),be=be+je,de=de+Je+(be>>>0<je>>>0?1:0),he.high=de,he.low=be}var ze=ce&Oe^~ce&Ie,We=pe&Fe^~pe&we,Ge=j&z^j&fe^z&fe,Qe=oe&x^oe&$^x&$,tt=(j>>>28|oe<<4)^(j<<30|oe>>>2)^(j<<25|oe>>>7),qe=(oe>>>28|j<<4)^(oe<<30|j>>>2)^(oe<<25|j>>>7),rt=(ce>>>14|pe<<18)^(ce>>>18|pe<<14)^(ce<<23|pe>>>9),nt=(pe>>>14|ce<<18)^(pe>>>18|ce<<14)^(pe<<23|ce>>>9),$e=d[Re],it=$e.high,Ze=$e.low,Be=Ue+nt,Ve=Ne+rt+(Be>>>0<Ue>>>0?1:0),Be=Be+We,Ve=Ve+ze+(Be>>>0<We>>>0?1:0),Be=Be+Ze,Ve=Ve+it+(Be>>>0<Ze>>>0?1:0),Be=Be+be,Ve=Ve+de+(Be>>>0<be>>>0?1:0),et=qe+Qe,at=tt+Ge+(et>>>0<qe>>>0?1:0);Ne=Ie,Ue=we,Ie=Oe,we=Fe,Oe=ce,Fe=pe,pe=Z+Be|0,ce=ue+Ve+(pe>>>0<Z>>>0?1:0)|0,ue=fe,Z=$,fe=z,$=x,z=j,x=oe,oe=Be+et|0,j=Ve+at+(oe>>>0<Be>>>0?1:0)|0}B=y.low=B+oe,y.high=P+j+(B>>>0<oe>>>0?1:0),R=v.low=R+x,v.high=V+z+(R>>>0<x>>>0?1:0),H=g.low=H+$,g.high=w+fe+(H>>>0<$>>>0?1:0),K=E.low=K+Z,E.high=D+ue+(K>>>0<Z>>>0?1:0),k=T.low=k+pe,T.high=W+ce+(k>>>0<pe>>>0?1:0),X=S.low=X+Fe,S.high=J+Oe+(X>>>0<Fe>>>0?1:0),L=b.low=L+we,b.high=I+Ie+(L>>>0<we>>>0?1:0),G=O.low=G+Ue,O.high=U+Ne+(G>>>0<Ue>>>0?1:0)},_doFinalize:function(){var p=this._data,_=p.words,M=this._nDataBytes*8,y=p.sigBytes*8;_[y>>>5]|=128<<24-y%32,_[(y+128>>>10<<5)+30]=Math.floor(M/4294967296),_[(y+128>>>10<<5)+31]=M,p.sigBytes=_.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});n.SHA512=o._createHelper(m),n.HmacSHA512=o._createHmacHelper(m)}(),r.SHA512})})(sha512);var jsSha512=sha512.exports;class Sha512WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha512()}async initRustSha512(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha512(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}var sha384={exports:{}};(function(e,t){(function(r,n,a){e.exports=n(core.exports,x64Core.exports,sha512.exports)})(commonjsGlobal,function(r){return function(){var n=r,a=n.x64,o=a.Word,u=a.WordArray,s=n.algo,l=s.SHA512,f=s.SHA384=l.extend({_doReset:function(){this._hash=new u.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});n.SHA384=l._createHelper(f),n.HmacSHA384=l._createHmacHelper(f)}(),r.SHA384})})(sha384);var jsSha384=sha384.exports;class Sha384WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024*10;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha384()}async initRustSha384(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha384(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}var sha3={exports:{}};(function(e,t){(function(r,n,a){e.exports=n(core.exports,x64Core.exports)})(commonjsGlobal,function(r){return function(n){var a=r,o=a.lib,u=o.WordArray,s=o.Hasher,l=a.x64,f=l.Word,c=a.algo,d=[],h=[],m=[];(function(){for(var M=1,y=0,v=0;v<24;v++){d[M+5*y]=(v+1)*(v+2)/2%64;var g=y%5,E=(2*M+3*y)%5;M=g,y=E}for(var M=0;M<5;M++)for(var y=0;y<5;y++)h[M+5*y]=y+(2*M+3*y)%5*5;for(var T=1,S=0;S<24;S++){for(var b=0,O=0,P=0;P<7;P++){if(T&1){var B=(1<<P)-1;B<32?O^=1<<B:b^=1<<B-32}T&128?T=T<<1^113:T<<=1}m[S]=f.create(b,O)}})();var p=[];(function(){for(var M=0;M<25;M++)p[M]=f.create()})();var _=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var M=this._state=[],y=0;y<25;y++)M[y]=new f.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(M,y){for(var v=this._state,g=this.blockSize/2,E=0;E<g;E++){var T=M[y+2*E],S=M[y+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var b=v[E];b.high^=S,b.low^=T}for(var O=0;O<24;O++){for(var P=0;P<5;P++){for(var B=0,V=0,R=0;R<5;R++){var b=v[P+5*R];B^=b.high,V^=b.low}var w=p[P];w.high=B,w.low=V}for(var P=0;P<5;P++)for(var H=p[(P+4)%5],D=p[(P+1)%5],K=D.high,W=D.low,B=H.high^(K<<1|W>>>31),V=H.low^(W<<1|K>>>31),R=0;R<5;R++){var b=v[P+5*R];b.high^=B,b.low^=V}for(var k=1;k<25;k++){var B,V,b=v[k],J=b.high,X=b.low,I=d[k];I<32?(B=J<<I|X>>>32-I,V=X<<I|J>>>32-I):(B=X<<I-32|J>>>64-I,V=J<<I-32|X>>>64-I);var L=p[h[k]];L.high=B,L.low=V}var U=p[0],G=v[0];U.high=G.high,U.low=G.low;for(var P=0;P<5;P++)for(var R=0;R<5;R++){var k=P+5*R,b=v[k],j=p[k],oe=p[(P+1)%5+5*R],z=p[(P+2)%5+5*R];b.high=j.high^~oe.high&z.high,b.low=j.low^~oe.low&z.low}var b=v[0],x=m[O];b.high^=x.high,b.low^=x.low}},_doFinalize:function(){var M=this._data,y=M.words;this._nDataBytes*8;var v=M.sigBytes*8,g=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(n.ceil((v+1)/g)*g>>>5)-1]|=128,M.sigBytes=y.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,S=T/8,b=[],O=0;O<S;O++){var P=E[O],B=P.high,V=P.low;B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360,b.push(V),b.push(B)}return new u.init(b,T)},clone:function(){for(var M=s.clone.call(this),y=M._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return M}});a.SHA3=s._createHelper(_),a.HmacSHA3=s._createHmacHelper(_)}(Math),r.SHA3})})(sha3);var jsSha3=sha3.exports;class Sha3WasmTest extends WasmTestBaseClass{dataSize;testStrings=[];testStringLength=1024*1024;javascriptResult=[];wasmResult=[];constructor(t,r,n,a){super(r,n,a);this.dataSize=t,this.initTestData(),this.initRustSha3()}async initRustSha3(){}initTestData(){for(let t=0;t<this.dataSize;t++)this.testStrings[t]=this.generateRandomString(this.testStringLength)}generateRandomString(t){for(var r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<t;o++)r+=n.charAt(Math.floor(Math.random()*a));return r}runJavaScript(){for(let t=0;t<this.dataSize;t++)this.javascriptResult[t]=jsSha3(this.testStrings[t]).toString();return this.javascriptResult}runRustWasm(){for(let t=0;t<this.dataSize;t++);return this.wasmResult}}const benchmarkDatasets={collisionDetection:{cGlueFunc:Module$c,cWasmUrl:"/c_wasm_files/collisionDetection.wasm",rustWasmLoad:__vitePreload(()=>import("./collisionDetectionRust_bg.7423ce9b.js"),["assets/collisionDetectionRust_bg.7423ce9b.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:CollisionDetectionWasmTest,dataSize:16384},fibonacci:{cGlueFunc:Module$b,cWasmUrl:"/c_wasm_files/fib.wasm",rustWasmLoad:__vitePreload(()=>import("./fibRust.5d92cec2.js"),["assets/fibRust.5d92cec2.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:FibWasmTest,dataSize:40},imageConvolute:{cGlueFunc:Module$a,cWasmUrl:"/c_wasm_files/imageConvolute.wasm",rustWasmLoad:__vitePreload(()=>import("./imageConvoluteRust_bg.4661cf78.js"),["assets/imageConvoluteRust_bg.4661cf78.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:ImageConvoluteWasmTest,image:"/src/assets/image.jpg"},imageGrayscale:{cGlueFunc:Module$9,cWasmUrl:"/c_wasm_files/imageGrayscale.wasm",testbench:ImageGrayscaleWasmTest,image:"/src/assets/image.jpg"},imageThreshold:{cGlueFunc:Module$8,cWasmUrl:"/c_wasm_files/imageThreshold.wasm",testbench:ImageThresholdWasmTest,image:"/src/assets/image.jpg"},multiplyDouble:{cGlueFunc:Module$7,cWasmUrl:"/c_wasm_files/multiplyDouble.wasm",rustWasmLoad:__vitePreload(()=>import("./multiplyDoubleRust.350a13c0.js"),["assets/multiplyDoubleRust.350a13c0.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:MultiplyDoubleWasmTest,dataSize:268435456},multiplyIntVec:{cGlueFunc:Module$6,cWasmUrl:"/c_wasm_files/multiplyIntVec.wasm",rustWasmLoad:__vitePreload(()=>import("./multiplyIntVecRust.9a1966c6.js"),["assets/multiplyIntVecRust.9a1966c6.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:MultiplyIntVecWasmTest,dataSize:33554432},multiplyDoubleVec:{cGlueFunc:Module$5,cWasmUrl:"/c_wasm_files/multiplyDoubleVec.wasm",rustWasmLoad:__vitePreload(()=>import("./multiplyDoubleVecRust.786d1136.js"),["assets/multiplyDoubleVecRust.786d1136.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:MultiplyDoubleVecWasmTest,dataSize:33554432},quicksortInt:{cGlueFunc:Module$4,cWasmUrl:"/c_wasm_files/quicksortInt.wasm",testbench:quicksortIntWasmTest,dataSize:2097152},quicksortDouble:{cGlueFunc:Module$3,cWasmUrl:"/c_wasm_files/quicksortDouble.wasm",testbench:quicksortDoubleWasmTest,dataSize:2097152},sumInt:{cGlueFunc:Module$2,cWasmUrl:"/c_wasm_files/sumInt.wasm",rustWasmLoad:__vitePreload(()=>import("./sumIntRust.4c96484c.js"),["assets/sumIntRust.4c96484c.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:SumIntWasmTest,dataSize:134217728},sumDouble:{cGlueFunc:Module$1,cWasmUrl:"/c_wasm_files/sumDouble.wasm",rustWasmLoad:__vitePreload(()=>import("./sumDoubleRust.d6614dd8.js"),["assets/sumDoubleRust.d6614dd8.js","assets/__vite-wasm-helper.868871dd.js"]),testbench:SumDoubleWasmTest,dataSize:67108864},videoConvolute:{Module:Module$a,testbench:VideoConvoluteWasmTest,url:"/c_wasm_files/imageConvolute.wasm",video:"/src/assets/marker.mp4"},videoGrayscale:{Module:Module$9,testbench:VideoGrayscaleWasmTest,url:"/c_wasm_files/imageGrayscale.wasm",video:"/src/assets/marker.mp4"},videoMarkerDetection:{Module,testbench:VideoMarkerDetectionWasmTest,url:"/c_wasm_files/markerDetection.wasm",video:"/src/assets/marker.mp4"},videoThreshold:{Module:Module$8,testbench:VideoThresholdWasmTest,url:"/c_wasm_files/imageThreshold.wasm",video:"/src/assets/marker.mp4"},md5:{testbench:Md5WasmTest,dataSize:1},sha1:{testbench:Sha1WasmTest,dataSize:1},sha256:{testbench:Sha256WasmTest,dataSize:1},sha224:{testbench:Sha224WasmTest,dataSize:1},sha512:{testbench:Sha512WasmTest,dataSize:1},sha384:{testbench:Sha384WasmTest,dataSize:1},sha3:{testbench:Sha3WasmTest,dataSize:1}};var block0={};const _sfc_main={name:"benchmark",data(){return{shouldLoadWasm:!this.getBenchmarkDataset().image&&!this.getBenchmarkDataset().video,toggleImagesString:"- images",displayImages:!0,toggleVideosString:"- videos",displayVideos:!0}},setup(){const e=ref(null),t=ref(null),r=ref(null),n=ref(null),a=ref(null),o=ref(null);return{testNames:["collisionDetection","fibonacci","imageConvolute","imageGrayscale","imageThreshold","multiplyDouble","multiplyIntVec","multiplyDoubleVec","quicksortInt","quicksortDouble","sumInt","sumDouble","videoConvolute","videoGrayscale","videoMarkerDetection","videoThreshold","md5","sha1","sha256","sha224","sha512","sha384","sha3"],benchmarkDatasets,image:e,video:t,js_image_canvas:r,ws_image_canvas:n,js_video_canvas:a,ws_video_canvas:o}},components:{Suspense},methods:{getBenchmarkDataset(){const e=this.$route.params.benchmark;return benchmarkDatasets[e]?(benchmarkDatasets[e].image&&(benchmarkDatasets[e].dom=this.image,benchmarkDatasets[e].jsCanvas=this.js_image_canvas,benchmarkDatasets[e].wsCanvas=this.ws_image_canvas),benchmarkDatasets[e].video&&(benchmarkDatasets[e].dom=this.video,benchmarkDatasets[e].jsCanvas=this.js_video_canvas,benchmarkDatasets[e].wsCanvas=this.ws_video_canvas),benchmarkDatasets[e]):benchmarkDatasets.collisionDetection},onDomLoad(){this.shouldLoadWasm=!0},getImage(){return this.getBenchmarkDataset().image},getVideo(){return this.getBenchmarkDataset().video},toggleImages(){this.displayImages=!this.displayImages,this.displayImages?this.toggleImagesString="- images":this.toggleImagesString="+ images"},toggleVideos(){this.displayVideos=!this.displayVideos,this.displayVideos?this.toggleVideoString="- videos":this.toggleVideoString="+ videos"}}},_hoisted_1={style:{width:"100%"}},_hoisted_2={style:{"margin-top":"3rem"}},_hoisted_3={key:0},_hoisted_4={style:{display:"flex","justify-content":"space-around","margin-bottom":"25px"}},_hoisted_5=createBaseVNode("p",null,"Original Image:",-1),_hoisted_6=["src"],_hoisted_7=createBaseVNode("p",null,"JavaScript Result:",-1),_hoisted_8={style:{width:"calc(30vw)",border:"1px solid"},ref:"js_image_canvas"},_hoisted_9=createBaseVNode("p",null,"WASM Result:",-1),_hoisted_10={style:{width:"calc(30vw)",border:"1px solid"},ref:"ws_image_canvas"},_hoisted_11={key:1},_hoisted_12={style:{display:"flex","justify-content":"space-around","margin-bottom":"25px"}},_hoisted_13=createBaseVNode("p",null,"Original Video:",-1),_hoisted_14=["src"],_hoisted_15=createBaseVNode("p",null,"JavaScript Result:",-1),_hoisted_16={style:{width:"482px",height:"296px",border:"1px solid"},ref:"js_video_canvas"},_hoisted_17=createBaseVNode("p",null,"WASM Result:",-1),_hoisted_18={style:{border:"1px solid"},ref:"ws_video_canvas"},_hoisted_19={style:{width:"100%",display:"flex","justify-content":"center"}},_hoisted_20={style:{"margin-left":"5rem",display:"flex","flex-direction":"column","justify-content":"center","text-align":"left"}},_hoisted_21={style:{width:"100%","margin-left":"0",display:"flex","flex-direction":"column","justify-content":"center"}},_hoisted_22={key:0,style:{display:"flex","justify-content":"center"}},_hoisted_23=createBaseVNode("h2",null,"Loading WASM",-1);function _sfc_render(e,t,r,n,a,o){const u=resolveComponent("router-link"),s=__unplugin_components_0,l=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("h1",_hoisted_2,"Benchmark : "+toDisplayString(e.$route.params.benchmark),1),o.getImage()?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("button",{style:{"font-size":"15px","margin-bottom":"25px"},onClick:t[0]||(t[0]=(...f)=>o.toggleImages&&o.toggleImages(...f))},toDisplayString(a.toggleImagesString),1),withDirectives(createBaseVNode("div",_hoisted_4,[createBaseVNode("div",null,[_hoisted_5,createBaseVNode("img",{style:{width:"calc(30vw)"},onLoad:t[1]||(t[1]=(...f)=>o.onDomLoad&&o.onDomLoad(...f)),ref:"image",src:o.getImage()},null,40,_hoisted_6)]),createBaseVNode("div",null,[_hoisted_7,createBaseVNode("canvas",_hoisted_8,null,512)]),createBaseVNode("div",null,[_hoisted_9,createBaseVNode("canvas",_hoisted_10,null,512)])],512),[[vShow,a.displayImages]])])):createCommentVNode("",!0),o.getVideo()?(openBlock(),createElementBlock("div",_hoisted_11,[createBaseVNode("button",{style:{"font-size":"15px","margin-bottom":"25px"},onClick:t[2]||(t[2]=(...f)=>o.toggleVideos&&o.toggleVideos(...f))},toDisplayString(a.toggleVideosString),1),withDirectives(createBaseVNode("div",_hoisted_12,[createBaseVNode("div",null,[_hoisted_13,createBaseVNode("video",{loop:"",autoplay:"",muted:"",onPlaying:t[3]||(t[3]=(...f)=>o.onDomLoad&&o.onDomLoad(...f)),ref:"video",src:o.getVideo()},null,40,_hoisted_14)]),createBaseVNode("div",null,[_hoisted_15,createBaseVNode("canvas",_hoisted_16,null,512)]),createBaseVNode("div",null,[_hoisted_17,createBaseVNode("canvas",_hoisted_18,null,512)])],512),[[vShow,a.displayVideos]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_19,[createBaseVNode("ul",_hoisted_20,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.testNames,f=>(openBlock(),createElementBlock("li",null,[createVNode(u,{class:"text-router-link",to:"/benchmark/browser/"+f},{default:withCtx(()=>[createTextVNode(toDisplayString(f),1)]),_:2},1032,["to"])]))),256))]),createBaseVNode("div",_hoisted_21,[a.shouldLoadWasm?(openBlock(),createElementBlock("div",_hoisted_22,[(openBlock(),createBlock(Suspense,{timeout:0},{default:withCtx(()=>[o.getVideo()?(openBlock(),createBlock(s,{key:e.$route.params.benchmark,benchmarkDataset:o.getBenchmarkDataset()},null,8,["benchmarkDataset"])):(openBlock(),createBlock(l,{key:e.$route.params.benchmark,benchmarkDataset:o.getBenchmarkDataset()},null,8,["benchmarkDataset"]))]),fallback:withCtx(()=>[_hoisted_23]),_:1}))])):createCommentVNode("",!0)])])])}typeof block0=="function"&&block0(_sfc_main);var _benchmark=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{_benchmark as default};
